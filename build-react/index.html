<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/ho_blog/component---src-layouts-index-js-14ce98a91c2ea25f4173.js" as="script"/><link rel="preload" href="/ho_blog/component---src-templates-blog-post-js-dabe65ee189101b630a0.js" as="script"/><link rel="preload" href="/ho_blog/path---build-react-f434a341563ef68309f3.js" as="script"/><link rel="preload" href="/ho_blog/app-ae3b9848c8b3fc2dcc4d.js" as="script"/><link rel="preload" href="/ho_blog/commons-241c3561f1c9cf4619a9.js" as="script"/><style id="glamor-styles"></style><script id="glamor-ids">
        // <![CDATA[
        window._glamor = []
        // ]]>
        </script><link rel="alternate" type="application/rss+xml" href="/ho_blog/rss.xml"/><title data-react-helmet="true">build-react | Merlin Tec Blog</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:106.25%/1.53 'Source Sans Pro',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Source Sans Pro',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:2.295rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:2.295rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.1487rem;line-height:1.53rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.53rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.917rem;line-height:1.53rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;color:inherit;font-family:Source Sans Pro,sans-serif;font-weight:400;text-rendering:optimizeLegibility;font-size:0.8409rem;line-height:1.53rem;text-transform:uppercase;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}ul{margin-left:1.53rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.53rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;font-size:0.85rem;line-height:1.42;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.53rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;font-size:1rem;line-height:1.53rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}blockquote{margin-left:1.53rem;margin-right:1.53rem;margin-top:0;padding-bottom:0.51rem;padding-left:1.02rem;padding-right:1.02rem;padding-top:0.51rem;margin-bottom:1.53rem;font-size:1.18921rem;line-height:1.53rem;border-left:0.255rem solid;border-color:hsla(0,0%,0%,0.07);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.53rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.53rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.53rem;margin-bottom:calc(1.53rem / 2);margin-top:calc(1.53rem / 2);}li > ul{margin-left:1.53rem;margin-bottom:calc(1.53rem / 2);margin-top:calc(1.53rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.53rem / 2);}code{font-size:0.85rem;line-height:1.53rem;}kbd{font-size:0.85rem;line-height:1.53rem;}samp{font-size:0.85rem;line-height:1.53rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.02rem;padding-right:1.02rem;padding-top:0.765rem;padding-bottom:calc(0.765rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;}pre code{background:none;line-height:1.42;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:"Â ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:none;}a{color:#0071bc;text-decoration:none;}a:visited{color:#4c2c92;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.53rem;color:hsla(204,5.275997423999999%,0%,0.46);font-weight:400;font-style:normal;}div.gatsby-highlight{margin-bottom:20px;}</style><link href="//fonts.googleapis.com/css?family=Merriweather:700|Source+Sans+Pro:400,400i,700" rel="stylesheet" type="text/css"/><style id="gatsby-inlined-css">.editor .wrap-guide{background:hsla(0,0%,100%,.1)}.editor .indent-guide{color:hsla(0,0%,100%,.15)}.editor,.editor .gutter{background-color:#282828;color:#f8f8f2}.editor.is-focused .cursor{border-color:#f8f8f0}.editor.is-focused .line-number.cursor-line-no-selection,.editor.is-focused .selection .region{background-color:#49483e}.editor .invisible-character{color:hsla(0,0%,84%,.15)}.editor .comment{color:#75715e}.editor .string{color:#e6db74}.editor .constant.character,.editor .constant.language,.editor .constant.numeric,.editor .constant.other{color:#ae81ff}.editor .keyword,.editor .storage{color:#f92672}.editor .storage.type{font-style:italic;color:#66d9ef}.editor .entity.name.class,.editor .entity.other.inherited-class{text-decoration:underline;color:#a6e22e}.editor .entity.other.inherited-class{font-style:italic}.editor .entity.name.function{color:#a6e22e}.editor .entity.name.instance{color:#66d9ef}.editor .variable.parameter{font-style:italic;color:#fd971f}.editor .entity.name.tag{color:#f92672}.editor .entity.other.attribute-name{color:#a6e22e}.editor .support.constant,.editor .support.function{color:#66d9ef}.editor .support.class,.editor .support.type{font-style:italic;color:#66d9ef}.editor .invalid{color:#f8f8f0;background-color:#f92672}.editor .invalid.deprecated{color:#f8f8f0;background-color:#ae81ff}.editor .class.jade{color:#ae81ff}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/ho_blog/static/montserrat-latin-100.50d27986.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-100.5e334eff.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/ho_blog/static/montserrat-latin-100italic.8c070533.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-100italic.03e19243.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/ho_blog/static/montserrat-latin-200.4343d3d9.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-200.f2022ecd.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/ho_blog/static/montserrat-latin-200italic.116c4c4b.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-200italic.89614a60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/ho_blog/static/montserrat-latin-300.d2ad295b.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-300.3a371ee0.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/ho_blog/static/montserrat-latin-300italic.f6b6bf24.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-300italic.16521668.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/ho_blog/static/montserrat-latin-400.240a8444.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-400.b20cc131.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/ho_blog/static/montserrat-latin-400italic.86172bb8.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-400italic.9405e787.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/ho_blog/static/montserrat-latin-500.fb8d6b71.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-500.50825d47.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/ho_blog/static/montserrat-latin-500italic.c0a555a4.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-500italic.635de59c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/ho_blog/static/montserrat-latin-600.d5615136.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-600.f300da4f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/ho_blog/static/montserrat-latin-600italic.10f29d13.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-600italic.2bc37d86.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/ho_blog/static/montserrat-latin-700.7d77e1f0.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-700.81826529.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/ho_blog/static/montserrat-latin-700italic.1dd2b53f.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-700italic.c162d257.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/ho_blog/static/montserrat-latin-800.d4e7bf86.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-800.895aadbf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/ho_blog/static/montserrat-latin-800italic.fc0cbe44.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-800italic.b3362875.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/ho_blog/static/montserrat-latin-900.c8bdd772.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-900.1b99ef78.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/ho_blog/static/montserrat-latin-900italic.cb72c1f9.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-900italic.b78bb9f8.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/ho_blog/static/merriweather-latin-300.f015f1e9.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-300.92dfe81b.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/ho_blog/static/merriweather-latin-300italic.7fd86b32.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-300italic.878b76f5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/ho_blog/static/merriweather-latin-400.12dbf4c0.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-400.1fffad22.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/ho_blog/static/merriweather-latin-400italic.1e0d3e81.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-400italic.de18d4c4.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/ho_blog/static/merriweather-latin-700.dc8fec81.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-700.d7d2ed8e.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/ho_blog/static/merriweather-latin-700italic.b7b7e5da.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-700italic.6210a5fc.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/ho_blog/static/merriweather-latin-900.43f870d5.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-900.8f3806df.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/ho_blog/static/merriweather-latin-900italic.168c1ab2.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-900italic.ae7778f0.woff) format("woff")}</style></head><body><div id="___gatsby"><div style="max-width:52.02rem;margin-left:auto;margin-right:auto;padding:2.295rem 1.1475rem;" data-reactroot="" data-reactid="1" data-react-checksum="-1634202818"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;" data-reactid="2"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/ho_blog/" data-reactid="3">Merlin Tec Blog</a></h3><div data-reactid="4"><!-- react-empty: 5 --><h1 data-reactid="6">build-react</h1><p style="font-size:0.87055rem;line-height:1.53rem;display:block;margin-bottom:1.53rem;margin-top:-1.53rem;" data-reactid="7">June 03, 2019</p><div data-reactid="8"><p>ì´ ê¸ì ìë ë§í¬ì ìë ê¸ì ì°¸ì¡° íìµëë¤.
<a href="https://engineering.hexacta.com/didact-learning-how-react-works-by-building-it-from-scratch-51007984e5c5">ì°¸ì¡°</a></p>
<h2>Rendering DOM element</h2>
<p>ì°ë¦¬ê° render í  ë íìíê² ë­ì§ ì¤ëªíê¸° ìí´ plain JS object ë¥¼ íë ë§ë¤ ê²ìëë¤.
ì´ê²ì ì°ë¦¬ë element ë¼ê³  ë¶ë¥¼ ê²ìëë¤. ì¬ê¸°ìë <code>type</code> ê³¼ <code>props</code>ë¼ë 2 ê°ì íë¡í¼í°ê° ìêµ¬ë©ëë¤.
<code>type</code>ì ê¸°ë³¸ string ëë function ì´ ë  ì ìê³ , props ë ë¹ì´ìì ì ìë ê°ì²´ê° ë ê²ìëë¤. null ì ì¤ì§ ììµëë¤. ì¬ê¸°ì props ë children ì´ë¼ë íë¡í¼í°ë ê°ì§ ê²ìëë¤. children ì ë°°ì´ë¡ êµ¬ì±ë  ê²ìëë¤.</p>
<p>ìë¥¼ ë¤ë©´ ìëì ê°ìµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>element</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;id</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>container</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>input</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;value</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>foo</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>text</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;href</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>/bar</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>span</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p>ì ê°ì²´ë ìë dom ì ì¤ëªíë ê²ì´ ë©ëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span>&nbsp;</span><span class="meta attribute-with-value id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>container</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>input</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>value</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>foo</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>type</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>text</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;</span><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>a</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>href</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>/bar</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>a</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;</span><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>span</span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>span</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre>
<p>DOM Element ë¥¼ ê·¸ë ¤ë´ìë¤.</p>
<p>ë¤ì ë¨ê³ë element ì ê·¸ element ì children ì dom ì ê·¸ë¦¬ë ì¼ìëë¤. ì¬ê¸°ì ì°ë¦¬ë element ì dom container ë¥¼ ë°ë <code>render</code> í¨ì (<code>ReactDom.render</code>ì ê°ì )ë¥¼ ì´ì©í  ê²ìëë¤. ì´ í¨ìë element ì ì ìë dom sub-tree ë¥¼ ìì±íê³  container ì ê·¸ê²ì ì¶ê°í  ê²ìëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>render</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>element</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>parentDom</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="constant other js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant other js"><span>props</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;element</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>dom</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>type</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>props</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>children</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>childElement</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>childElement</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>render</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>childElement</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;dom</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>dom</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>render</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>element</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>root</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre>
<p><code>render</code>í¨ìë root Dom ì ì¤ì  element ë¥¼ ì¤ì  Dom ê°ì²´ë¡ ë°ê¿ì append ìí¨ë¤.
ììì ë¹ ë¨ë¦° ë¶ë¶ì´ ìë¤ë©´ íë¡í¼í°ë¤ê³¼ ì´ë²¤í¸ ë¦¬ì¤ëì´ë¤. <code>props</code> íë¡í¼í° ì´ë¦ë¤ì <code>Object.keys</code> ë¥¼ ì´ì©í´ì ìííê³  ìë§ê² ìíí´ë³´ì.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>render</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>element</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>parentDom</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="constant other js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant other js"><span>props</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;element</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>dom</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>type</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;props&nbsp;setting&nbsp;start</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isListener</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="variable other object js"><span>name</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>startWith</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>on</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>keys</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>props</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>filter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>isListener</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>eventType</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>name</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>toLowerCase</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>substring</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>2</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>dom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>addEventListener</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>eventType</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isAttribute</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>!</span></span><span class="meta function-call js"><span class="entity name function js"><span>isListener</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>name</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;name&nbsp;</span><span class="keyword operator comparison js"><span>!=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>children</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>keys</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>props</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>filter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>isAttribute</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dom</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;props</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;end</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>props</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>children</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>childElement</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>childElement</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>render</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>childElement</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;dom</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>dom</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>ë¤ìì DOM ì Text Nodes ë¥¼ render íë ë°©ë²ì´ë¤.
ì¬ê¸°ì Text Node ë¥¼ íííë ë°©ë²ì children ë°°ì´ì element ê°ì²´ê° ìë plain text ê° ë¤ì´ê° ê²½ì°ê° ë  ê²ìëë¤.
ì´ì  ê¹ì§ë children ì element ê°ì²´ë¥¼ íì ë°°ì´ì´ììµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>reactElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>span</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Foo</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p>íì§ë§ ì¬ê¸°ì children ë°°ì´ì type ê³¼ props ê° ë¤ì´ê° ê°ì²´ë§ ì¨ë¤ë ë£°ì ê°ì§ê³  ìì¼ë©´ ì°ë¦° ë ì ì if ë¬¸ì ë§ë¤ ì ìì ê²ì´ë¤. í´ì text íìì âTEXT ELEMENTâ ë¼ê³  props ìë nodeValue ë¼ë íë¡í¼í°ë¥¼ ê°ê² ë§ë¤ì´ ë´ìë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>textElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>span</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>TEXT_ELEMENT</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;nodeValue</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Foo</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p>ì¬ê¸°ì ì°ë¦¬ê° ì ìí text element ëë¡ render íë í¨ìë¥¼ ë¤ì ìì í´ë³´ì. ì¬ê¸°ì ë¬ë¼ì§ë ì ì´ ìë¤ë©´ ì¼ë° dom type ì¼ ê²½ì°ìë <code>createElement</code> ì dom api ë¥¼ ì¼ìíë° text ë <code>createTextNode</code> ë¼ë dom api ë¥¼ ì¬ì©íì.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>render</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>element</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>parentDom</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="constant other js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant other js"><span>props</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;element</span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Create&nbsp;DOM&nbsp;element</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isTextElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;type&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>TEXT&nbsp;ELEMENT</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;íìì&nbsp;ë°ë¼&nbsp;ë¤ë¥¸&nbsp;apië¥¼&nbsp;ì¬ì©íë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>dom</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;isTextElement</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createTextNode</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>type</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Add&nbsp;event&nbsp;listeners</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isListener</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="variable other object js"><span>name</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>startsWith</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>on</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>keys</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>props</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>filter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>isListener</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>eventType</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>name</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>toLowerCase</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>substring</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>2</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>dom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>addEventListener</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>eventType</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Set&nbsp;properties</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì¬ê¸°ì&nbsp;nodeValueë&nbsp;ìííë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isAttribute</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>!</span></span><span class="meta function-call js"><span class="entity name function js"><span>isListener</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>name</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;name&nbsp;</span><span class="keyword operator comparison js"><span>!==</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>children</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>keys</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>props</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>filter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>isAttribute</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dom</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;props</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Render&nbsp;children</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childElements</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>props</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>children</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>childElements</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>childElement</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>render</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>childElement</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;dom</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Append&nbsp;to&nbsp;parent</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>dom</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<h2>Element creation and JSX</h2>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>element</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;id</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>container</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>input</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;value</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>foo</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>text</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>/bar</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>TEXT&nbsp;ELEMENT</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;nodeValue</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>bar</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>span</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function arrow json js"><span class="entity name function js"><span>onClick</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta parameters js"><span class="variable parameter function js"><span>e</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>alert</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Hi</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>TEXT&nbsp;ELEMENT</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;nodeValue</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>click&nbsp;me</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p>ì Element ë¥¼ ì¢ ë ì½ê² ë§ë¤ê¸° ìí´ JSX ë¥¼ ì¬ì©íë©´ ì½ê² ì½íë©´ìë ì½ê² ííì´ ëë¤. ì¬ê¸°ì JSX ë ì°ë¦¬ê° DOM ì ë¬´ìì íííê³  ì¶ìì§ë¥¼ ì¤ëªí´ì£¼ë í ë°©ë²ì´ë¤.</p>
<p>ë°ë²¨ì ì¬ì©íë¤ë©´ JSX ííì ë¤ìê³¼ ê°ì´ ë³ê²½ëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>element</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>div&nbsp;id</span><span class="keyword operator assignment js"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>container</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="keyword operator comparison js"><span>&gt;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>input&nbsp;value</span><span class="keyword operator assignment js"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>foo</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;type</span><span class="keyword operator assignment js"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>text</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>/</span></span><span class="keyword operator comparison js"><span>&gt;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>a&nbsp;href</span><span class="keyword operator assignment js"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>/bar</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="keyword operator comparison js"><span>&gt;</span></span><span>bar</span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="keyword operator js"><span>/</span></span><span>a</span><span class="keyword operator comparison js"><span>&gt;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>span&nbsp;onClick</span><span class="keyword operator assignment js"><span>=</span></span><span class="meta brace curly js"><span>{</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>e</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>alert</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Hi</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta brace curly js"><span>}</span></span><span class="keyword operator comparison js"><span>&gt;</span></span><span>click&nbsp;me</span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="keyword operator js"><span>/</span></span><span>span</span><span class="keyword operator comparison js"><span>&gt;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="keyword operator js"><span>/</span></span><span>div</span><span class="keyword operator comparison js"><span>&gt;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace round js"><span>)</span></span></span></div></pre>
<p><a href="https://babeljs.io/repl/#?babili=false&#x26;evaluate=true&#x26;lineWrap=false&#x26;presets=react&#x26;targets=&#x26;browsers=&#x26;builtIns=false&#x26;debug=false&#x26;code=%2F**%20%40jsx%20createElement%20*%2F%0A%0Aconst%20element%20%3D%20%28%0A%20%20%3Cdiv%20id%3D%22container%22%3E%0A%20%20%20%20%3Cinput%20value%3D%22foo%22%20type%3D%22text%22%20%2F%3E%0A%20%20%20%20%3Ca%20href%3D%22%2Fbar%22%3Ebar%3C%2Fa%3E%0A%20%20%20%20%3Cspan%20onClick%3D%7Be%20%3D%3E%20alert%28%22Hi%22%29%7D%3Eclick%20me%3C%2Fspan%3E%0A%20%20%3C%2Fdiv%3E%0A%29%3B">try it on babel REPL</a></p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>element</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;id</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>container</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>input</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;value</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>foo</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>text</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;href</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>/bar</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>bar</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>span</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="meta function arrow json js"><span class="entity name function js"><span>onClick</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta parameters js"><span class="variable parameter function js"><span>e</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>alert</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Hi</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>click&nbsp;me</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre>
<p>ê·¸ëì ì°ë¦° <code>createElement</code> í¨ìë¥¼ ë§ë¤ì´ ì¤ ê²ì´ë¤. ì²«ë²ì§¸ ì¸ìë <code>type</code> ì¸ìì´ê³  ëë²ì§¸ ì¸ìë <code>props</code> ì´ë¤. ê·¸ë¦¬ê³  ëë¨¸ì§ ì¸ìë¤ì <code>children</code> ì´ë¤.
<code>createElement</code> í¨ìë <code>props</code> ê°ì²´ë¥¼ ë§ë¤ì´ì£¼ê³  ëë²ì§¸ ì¸ìì ê°ë¤ì ì ë¶ í ë¹í´ ì£¼ì´ì¼ íë¤. ë, <code>children</code> íë¡í¼í°ë ëë²ì§¸ ì´íë¡ ì¤ë ì¸ìë¤ì(â¦args) ë°°ì´ë¡ ë§ë¤ì´ì <code>props</code> ì <code>children</code> íë¡í¼í°ì ìíí´ì¤ë¤. ê·¸ë¦¬ê³  type ê³¼ props ë¥¼ ë°ííë©´ ëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>createElement</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>props</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="keyword operator spread js"><span>...</span></span><span class="variable parameter rest function js"><span>args</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>props</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>assign</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;config</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>hasChildren</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>args</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property js"><span>length</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>&gt;</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>props</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>children</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;hasChildren&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>concat</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="keyword operator spread js"><span>...</span></span><span>args</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;type</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>ì createElement í¨ììì text node ì í´ë¹íëê² íë ë¹ ì ¸ìë¤. ì í¨ìëë¡ ìëì íë¤ë©´ ìë span ì text node ì ê²½ì°ì ê·¸ë¥ string ê°ì´ ë¤ì´ê° ê²ì´ë¤.</p>
<p>ìê¹ ì°ë¦° ììì text node ë <code>{ type: TEXT_ELEMENT, props: {nodeValue: 'test'}}</code> ë¡ ë§ë¤ì´ ì£¼ê¸°ë¡ íìë¤. í´ì createElement ë¥¼ ìì í´ì¼ íë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>spanElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>span</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="meta function arrow json js"><span class="entity name function js"><span>onClick</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta parameters js"><span class="variable parameter function js"><span>e</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>alert</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Hi</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>click&nbsp;me</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>spanElement&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>span</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function arrow json js"><span class="entity name function js"><span>onClick</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta parameters js"><span class="variable parameter function js"><span>e</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>alert</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Hi</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>click&nbsp;me</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;[{type:&nbsp;TEXT_ELEMTN,&nbsp;props:&nbsp;{nodeValue:&nbsp;&#39;click&nbsp;me&#39;}}]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p>ìì í´ ë³´ì.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>TEXT_ELEMENT</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>TEXT&nbsp;ELEMENT</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>createElement</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>config</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="keyword operator spread js"><span>...</span></span><span class="variable parameter rest function js"><span>args</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>props</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>assign</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;config</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>hasChildren</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>args</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property js"><span>length</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>&gt;</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>rawChildren</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;hasChildren&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>concat</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="keyword operator spread js"><span>...</span></span><span>args</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;children&nbsp;ë°°ì´ì&nbsp;ëë©´ì&nbsp;textElementë&nbsp;TEXT&nbsp;ELEMENT&nbsp;íìì¼ë¡&nbsp;ë³íí´ì&nbsp;ë£ì´ì¤ë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>props</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>children</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;rawChildren</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>filter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>c</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;c&nbsp;</span><span class="keyword operator comparison js"><span>!=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;c&nbsp;</span><span class="keyword operator comparison js"><span>!==</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>map</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>c</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>c&nbsp;</span><span class="keyword operator instanceof js"><span>instanceof</span></span><span>&nbsp;</span><span class="support class js"><span>Object</span></span><span>&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span>c</span><span>&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>createTextElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>c</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;type</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;text&nbsp;element&nbsp;ìì±</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>createTextElement</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>value</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant other js"><span>TEXT_ELEMENT</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;nodeValue</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;value&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<h2>Instances, reconciliation and virtual DOM</h2>
<p>ì§ê¸ê¹ì§ë JSX ì¤ëªì ê¸°ë°ì¼ë¡ dom ììë¥¼ ë§ëë ë©ì»¤ëì¦ì êµ¬ííìµëë¤. ì´ë²ìë DOM ì ì´ë»ê² ìë°ì´í¸ ìí¤ëì§ì ëí´ì í¬ì»¤ì¤ë¥¼ ë ê²ìëë¤.
ì°ì  setState ë¥¼ ì¤ëªíê¸° ì ê¹ì§ dom update ë¥¼ í ì ìë ë°©ë²ì ë¬ë¼ì§ element ë¥¼ ê°ì§ê³  render í¨ìë¥¼ ë°ë³µí´ì ìí¤ë ë°©ë²ìëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>rootDom</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>root</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>tick</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>time</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor js"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Date</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>toLocaleTimeString</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>clockElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>h1</span><span class="keyword operator comparison js"><span>&gt;</span></span><span class="meta brace curly js"><span>{</span></span><span>time</span><span class="meta brace curly js"><span>}</span></span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="keyword operator js"><span>/</span></span><span>h1</span><span class="keyword operator comparison js"><span>&gt;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>render</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>clockElement</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rootDom</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="entity name function js"><span>tick</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="support function js"><span>setInterval</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>tick</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1000</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre>
<p><a href="https://codepen.io/pomber/pen/KmXeXr?editors=0010">codepen</a></p>
<p>ììì ê³ì ë°ìë <code>render</code> í¨ìë container ì element ë¥¼ ëê¸°ë©´ element ë¥¼ dom ì¼ë¡ ë§ë¤ì´ì container ì append ìí¤ë í¨ìì´ë¤. element ì children ë <code>render</code> ì¬ê·ë¡ ëë©´ì ì¤ííê² ëë¤.</p>
<p>ê¸°ì¡´ <code>render</code> ë ë§¤ <code>tick</code>í  ìì ê°ì div ë¥¼ ìë°ì´í¸íë ëì ì ìë¡ì´ ê²ì ì¶ê°íë ë°©ìì´ë¼ì update ì ì í©íì§ê° ìë¤.
ê·¸ëì ì²ìì¼ë¡ ë°ê¿ì¼ í  ë¶ë¶ì ê° ìë°ì´í¸ì ëí´ dom ì replace íë ììì´ê³ , render í¨ì ë§ì§ë§ ë¶ë¶ì ì°ë¦¬ë parent ì ì´ë¤ child ê° ìë¤ë©´ ê·¸ê²ì ìë¡­ê² element ë¡ ë§ë¤ì´ì§ dom ì¼ë¡ êµì²´ ëëë¡ íë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>render</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>element</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>parentDom</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;...</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Create&nbsp;dom&nbsp;from&nbsp;element</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;...</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Append&nbsp;or&nbsp;replace&nbsp;dom</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;lastChildë&nbsp;ë¸ëì&nbsp;ë§ì§ë§&nbsp;ììì&nbsp;ë°íí©ëë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator logical js"><span>!</span></span><span class="variable other object js"><span>parentDom</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>lastChild</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>dom</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;replaceChild(newChild,&nbsp;oldChild);</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>replaceChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>dom</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>lastChild</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p><a href="https://codepen.io/pomber/pen/eWGQRz?editors=0010">codepen</a></p>
<p>ì²«ë²ì§¸ render ìì h1 ì TEXT<em>ELEMENT ë¥¼ ë¨¼ì  append íê³  h1 ì root ì»¨íì´ë dom ì append í©ëë¤.
ëë²ì§¸ ë¶í°ë render ììë ëê°ì´ h1 ì TEXT</em>ELEMENT ë¥¼ ë¨¼ì  append íê³  ë§ë¤ì´ì§ h1 ì root ì»¨íì´ëì append íê¸° ì ì root ì»¨íì´ëì lastchild ê° ìë¤ë©´ parentDom.lastchild ë¥¼ dom ì¼ë¡ replace íë¤.</p>
<p><strong>ì¬ê¸°ì ë¬¸ì ì ì update ìí©ìì render ìì ëª¨ë  children ì ì¬ ìì±í´ì ë§ì§ë§ root container dom ìë§ replace íë¤ë ì ì´ë¤. render ìì ëª¨ë  element íìì ëí´ì ìë¡ ë§ë¤ê¸° ëë¬¸ì ììë¤ì ë¶ëª¨ì lastChild ë null ì´ ëì´ appendChild ê° ì¤íë  ê²ì´ë¤. ê·¸ ìí©ìì ê¸°ì¡´ì ê·¸ë ¤ë¨ë root ì ê²½ì°ìë ì´ë¯¸ íë² ê·¸ë ¤ì ¸ ìëê² ìê¸° ëë¬¸ì replace ë¡ì§ì¼ë¡ ì²ë¦¬ê° ëë¤.</strong></p>
<p>ì´ë° ìì ìí©ììë ì ëìíì§ë§ ì¢ ë ë³µì¡í ì¼ì´ì¤ììë ëª¨ë  child node ë¤ì ì¬ ìì± íë í¼í¬ë¨¼ì¤ ë¹ì©ì´ ë§ì¡±ì¤ë½ì§ ììµëë¤.
ê·¸ëì ì°ë¦° íì¬ <strong>ìë¡ ìì±í elements tree ì ì´ì  render ë¥¼ í¸ì¶íì ë ì¬ì©ëìë element tree ë¥¼ ë¹êµ</strong>í´ì ë¬ë¼ì§ ê³³ë§ update ìì¼ì¼ íë¤.</p>
<h3>Virtual DOM and Reconciliation</h3>
<p>React ììë ììì ë§í ë¬ë¼ì§ ê³³ì ë¹êµíë ì´ âdiffingâ íë¡ì¸ì±ì <strong>reconciliation</strong> ì´ë¼ ë¶ë¦ëë¤. ì°ë¦¬ë ì´ìê°ì´ íê¸° ìí´ì <strong>ì´ì  render ì ì¬ì© ëìë element tree êµ¬ì¡°ë¥¼ ë³´ê´í  íìê° ìê³  ì´ê²ì ìë¡ì´ element tree êµ¬ì¡°ì ë¹êµí  ê²ìëë¤. ë¤ë¥¸ë§ë¡ íë©´ ì°ë¦¬ì virtual DOM ë²ì ¼ì ê³ì ì ì§í´ ëê° ê²ì´ë¤.</strong></p>
<p>virtual DOM ìì ìë âë¸ëë¤âì ë¬´ìì í´ì¼ í ê¹ì? íê°ì§ ìµìì¼ë¡ ë¨ì§ Elements ë¡ ì¬ì©ì íë ê²ìëë¤. ì´ Elements ë¤ì <code>props.children</code> íë¡í¼í°ë¥¼ ì´ë¯¸ ê°ì§ê³  ìë¤. ì´ íë¡í¼í°ë tree êµ¬ì¡° ì²ë¼ element ë¤ íìì ê°ë¥íê² í©ëë¤. íì§ë§ ì¬ê¸°ì 2 ê°ì§ ë¬¸ì ì ì´ ìëë°, íëë reconciliation ì ì¢ ë ì½ê² ì§ííê¸° ìí´ì ê° ë¸ëì virtual DOM ì ì¤ì  dom ì ì°¸ì¡°íê³  ìì´ì¼ íë¤ë ì ì´ê³ , element ë¤ì immutable íê² ì ì§í´ì¼ íë¤. ëë²ì§¸ ë¬¸ì ë ì°ë¦¬ë ëì¤ì ë³¸ì¸ë§ì state ë¥¼ ê°ê³  ìë Components ë¥¼ ì§ìí  ê²ì´ê³  element ë¤ì´ ê·¸ê²ì ë¤ë£¨ì§ ëª»íê² í´ì¼íë¤.</p>
<h3>Instances</h3>
<p>ê·¸ëì ì°ë¦¬ë ìë¡ì´ ì©ì´ì¸ Instances ë¥¼ ìê°í  ê²ìëë¤. <strong>instance ë DOM ì ë ëë§ ë element ë¥¼ ëíëëë¤.</strong> ëí element, dom, ê·¸ë¦¬ê³  childInstances ì íë¡í¼í°ë¤ì ì§ë plain ê°ì²´ ìëë¤. childInstances ë children element ì instancese ë¤ì ì§ë ë°°ì´ìëë¤.</p>
<p>ê° DOM ë¸ëë ë§¤ì¹­ë instance ë¥¼ ê°ì§ê³  ìì ê²ìëë¤. reconciliation ìê³ ë¦¬ì¦ì íê°ì§ ëª©íë ê°ë¥íí ë§ì´ instance ë¥¼ creating ëë removing ì í¼íë ê²ìëë¤.
ì¬ê¸°ì instance ë¥¼ creating ê·¸ë¦¬ê³  removing íë¤ë ê²ì DOM tree ë¥¼ ìì í´ì¼ íë¤ë ìë¯¸ ì¼ ê²ìëë¤.
instance ë¥¼ ì¬ì¬ì©í ìë¡ DOM í¸ë¦¬ë¥¼ ìì íë íìê° ì¤ì´ ë­ëë¤.</p>
<h3>Refactoring</h3>
<p>ì¬ê¸°ì ì°ë¦¬ render í¨ìë¥¼ reconciliation ìê³ ë¦¬ì¦ì ì ì©í´ë³´ê³ , element ë¥¼ ì£¼ì´ì§ë©´ instance ë¥¼ ìì±íë instantiate í¨ìë¥¼ ì¶ê°í´ë³´ì.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type var js"><span>let</span></span><span>&nbsp;rootInstance&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>render</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>element</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>container</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>prevInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;rootInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>nextInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>reconcile</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>container</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;prevInstance</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;rootInstance&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;nextInstance</span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;reconcile&nbsp;(&nbsp;ì¡°ì íë¤,&nbsp;ì¡°íìí¤ë¤,&nbsp;ì¼ì¹ìí¤ë¤.&nbsp;)</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>reconcile</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>parentDom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>instance</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>element</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì¸ìê°&nbsp;:&nbsp;ë¶ëª¨&nbsp;real&nbsp;DOM,&nbsp;ì´ì &nbsp;instance&nbsp;,&nbsp;ìë¡ì´&nbsp;element</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì´ì ì&nbsp;ê·¸ë ¤ì§&nbsp;instanceê°&nbsp;ìë¤ë©´&nbsp;append</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ê·¸ë ¤ì§&nbsp;instanceê°&nbsp;ìë¤ë©´&nbsp;replace&nbsp;ììì&nbsp;íë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>instance&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì´ê¸°&nbsp;render&nbsp;ì</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>instantiate</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>newInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;newInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;update&nbsp;render&nbsp;ì</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>instantiate</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>replaceChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>newInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;newInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;elementë¥¼&nbsp;ë°ìì&nbsp;í¸ë¦¬êµ¬ì¡°ë¥¼&nbsp;ëë©´ì&nbsp;instance&nbsp;êµ¬ì¡°&nbsp;{dom,&nbsp;element,&nbsp;childInstances}ë¥¼&nbsp;ë§ë ë¤.</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>instantiate</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>element</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="constant other js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant other js"><span>props</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;element</span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Create&nbsp;DOM&nbsp;element</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isTextElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;type&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>TEXT&nbsp;ELEMENT</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>dom</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;isTextElement</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createTextNode</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>type</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Add&nbsp;event&nbsp;listeners</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isListener</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="variable other object js"><span>name</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>startsWith</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>on</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>keys</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>props</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>filter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>isListener</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>eventType</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>name</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>toLowerCase</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>substring</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>2</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>dom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>addEventListener</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>eventType</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Set&nbsp;properties</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isAttribute</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>!</span></span><span class="meta function-call js"><span class="entity name function js"><span>isListener</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>name</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;name&nbsp;</span><span class="keyword operator comparison js"><span>!=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>children</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>keys</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>props</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>filter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>isAttribute</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dom</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;props</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Instantiate&nbsp;and&nbsp;append&nbsp;children</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childElements</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>props</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>children</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childInstances</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>childElements</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>map</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>instantiate</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childDoms</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>childInstances</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>map</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>childInstance</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="variable other object js"><span>childInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>childDoms</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>childDom</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="variable other object js"><span>dom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>childDom</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>instance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;dom</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;element</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;childInstances&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;instance</span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>ì´ì ê³¼ ì½ëë ê°ì§ë§, ì¬ê¸°ì ë¤ë¥¸ì ì ë§ì§ë§ì¼ë¡ í¸ì¶í render ìì ëì¨ instance ë¥¼ ì ì¥íê³  ìë¤ëì ì´ë¤. ëí reconciliation í¨ìë¥¼ instantiation ì¼ë¡ ë¶í° ë¶ë¦¬ íìµëë¤.
dom nodes ë¥¼ ì¬ì¬ì©íê¸° ìí´ìë, dom íë¡í¼í°ë¤ì update í  ë°©ë²ì´ íìíë¤. ( className, style, onCLick, etcâ¦) ë±ë±ì ìë°ì´í¸ ê·¸ëì dom íë¡í¼í°ë¥¼ update íë í¨ìë¥¼ ë°ë¡ ë¶ë¦¬í´ì ìì±í´ë³´ì.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;elementë¥¼&nbsp;ë°ìì&nbsp;í¸ë¦¬êµ¬ì¡°ë¥¼&nbsp;ëë©´ì&nbsp;instance&nbsp;êµ¬ì¡°&nbsp;{dom,&nbsp;element,&nbsp;childInstances}ë¥¼&nbsp;ë§ë ë¤.</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>instantiate</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>element</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="constant other js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant other js"><span>props</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;element</span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Create&nbsp;DOM&nbsp;element</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isTextElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;type&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>TEXT&nbsp;ELEMENT</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>dom</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;isTextElement</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createTextNode</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>type</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>updateDomProperties</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>dom</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Instantiate&nbsp;and&nbsp;append&nbsp;children</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childElements</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>props</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>children</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childInstances</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>childElements</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>map</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>instantiate</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childDoms</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>childInstances</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>map</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>childInstance</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="variable other object js"><span>childInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>childDoms</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>childDom</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="variable other object js"><span>dom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>childDom</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>instance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;dom</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;element</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;childInstances&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;instance</span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;domì&nbsp;ë§ë¤ê³ &nbsp;ëì&nbsp;domì&nbsp;íë¡í¼í°ë¤ì&nbsp;ìíí ë&nbsp;ì¬ì©íë¤.</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>updateDomProperties</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>dom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>prevProps</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>nextProps</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isEvent</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="variable other object js"><span>name</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>startsWith</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>on</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isAttribute</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>!</span></span><span class="meta function-call js"><span class="entity name function js"><span>isEvent</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>name</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;name&nbsp;</span><span class="keyword operator comparison js"><span>!=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>children</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Remove&nbsp;event&nbsp;listeners</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>keys</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>prevProps</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>filter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>isEvent</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>eventType</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>name</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>toLowerCase</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>substring</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>2</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>dom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>removeEventListener</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>eventType</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;prevProps</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Remove&nbsp;attributes</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>keys</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>prevProps</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>filter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>isAttribute</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dom</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Set&nbsp;attributes</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>keys</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>nextProps</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>filter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>isAttribute</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dom</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;nextProps</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Add&nbsp;event&nbsp;listeners</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>keys</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>nextProps</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>filter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>isEvent</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>name</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>eventType</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>name</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>toLowerCase</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>substring</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="constant numeric decimal js"><span>2</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>dom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>addEventListener</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>eventType</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;nextProps</span><span class="meta brace square js"><span>[</span></span><span>name</span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p><code>updateDomProperties</code> í¨ìë ì´ì  íë¡í¼í°ë¤ì ëª¨ë ì ê±°íê³  ìë¡ì´ ê²ë¤ì ì¶ê°íë¤. ì´ê²ì íë¡í¼í°ê° ë³ê²½ëë ë³íë¥¼ ìí¤ì§ ìì¼ë¯ë¡ ë¶íìí ìë°ì´í¸ê° ë§ì´ ë°ìíì§ë§ ë¨ìíê²íê¸° ìí´ ì§ê¸ì ê·¸ëë¡ ëê² ìµëë¤.</p>
<h3>Reusing DOM nodes</h3>
<p>reconciliation ìê³ ë¦¬ì¦ì DOM nodes ë¥¼ ê°ë¥íë©´ ì¬ ì¬ì©íë ê²ì´ë¼ê³  ë§íìµëë¤. ê·¸ëì type ì´ ê°ë¤ë©´ í´ë¹ DOM node ë¥¼ ì¬ì¬ì©í  ê²ìëë¤. ( íë¡í¼í°ë§ update í ê²ì´ë¤. )</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>reconcile</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>parentDom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>instance</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>element</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>instance&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Create&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>instantiate</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>newInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;newInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Update&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì¬ê¸°ì&nbsp;instance&nbsp;domì&nbsp;ê¸°ì¡´ì&nbsp;render&nbsp;ëìë&nbsp;ì´ì &nbsp;instance&nbsp;ì´ë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì´ì &nbsp;instanceì&nbsp;Real&nbsp;domì&nbsp;ì¬ì¬ì©í´ì&nbsp;íë¡í¼í°ë¤ë§&nbsp;update&nbsp;ìì¼ì¤ë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>updateDomProperties</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>element</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;element</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;instance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Replace&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>instantiate</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>replaceChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>newInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;newInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<h3>Children Reconciliation</h3>
<p>reconcile í¨ììì ê°ì¥ ì¤ìí ììì ëì³¤ìµëë¤. children ì ì¤íìí¤ì§ ììë¤ë ì ì´ë¤.
Children reconciliation ì ì£¼ì ê¸°ì ì¤ íëì´ë¤. ì¬ê¸°ìë ì´ì ê³¼ íì¬ tree êµ¬ì¡°ìì children ì ë§¤ì¹­ íê¸° ìí´ key ë¼ë ì¶ê° íë¡í¼í°ê° ìêµ¬ë©ëë¤.
ì¬ê¸°ìë ì¤ì§ ê°ì children ë°°ì´ìì ê°ì ìì¹ì children ë¼ë¦¬ë§ ë¹êµíê² ìµëë¤. ì´ê²ì´ ìë¯¸íë ë°ë children ììê° ë¬ë¼ì§ë©´ DOM nodes ë¥¼ ì¬ì¬ì©íì§ ëª»íë¤ë ë¹ì©ì´ ë ë¤ë ì ìëë¤.</p>
<p>Children reconciliation ì ì¤ííê¸° ìí´ì  ì´ì  child instances ì¸ <code>instance.childInstances</code> ì ìë¡ì´ element ì children <code>element.props.children</code>ì ë§¤ì¹­ìí¬ ê²ìëë¤. ê·¸ë¦¬ê³¤ ì¬ê·ì ì¼ë¡ reconcil í¨ìë¥¼ í¸ì¶í  ê²ìëë¤. ëí reconcile ìì ë¦¬í´ë ëª¨ë  instances ë¤ì ì ì§í´ì childInstances ë¥¼ ìë°ì´í¸ í  ì ììµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>reconcile</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>parentDom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>instance</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>element</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>instance&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Create&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>instantiate</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>newInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;newInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Update&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;íìì´&nbsp;ê°ìë&nbsp;domì&nbsp;ì¬ì¬ì©íë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>updateDomProperties</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ê·¸ë¦¬ê³¤&nbsp;childrenì&nbsp;ëí´ì&nbsp;reconcileì&nbsp;ì ì©íë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;children&nbsp;ì&nbsp;ë°°ì´ì´ê¸°&nbsp;ëë¬¸ì&nbsp;ë°°ì´&nbsp;ì²ë¦¬ë¥¼&nbsp;ìí&nbsp;reconcileChildren&nbsp;í¨ìë¥¼&nbsp;íì©íë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>childInstances</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>reconcileChildren</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>instance</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>element</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;element</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;instance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Replace&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ë¶ëª¨ê°&nbsp;ê¸°ì¡´&nbsp;ì¸ì¤í´ì¤ìì&nbsp;ìë¡ì´&nbsp;ì¸ì¤í´ì¤ë¡&nbsp;replace&nbsp;íë¤ë©´&nbsp;ê·¸&nbsp;ë¶ëª¨&nbsp;children&nbsp;ë¤ë&nbsp;ìë¡&nbsp;instanceë¥¼&nbsp;ìì±íë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>instantiate</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>replaceChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>newInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;newInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>reconcileChildren</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>instance</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>element</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>dom</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childInstances</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>childInstances</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>nextChildElements</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>props</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>children</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newChildInstances</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>count</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support class math js"><span>Math</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function math js"><span>max</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>childInstances</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property js"><span>length</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>nextChildElements</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property js"><span>length</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>for</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="storage type var js"><span>let</span></span><span>&nbsp;i&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;i&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>&nbsp;count</span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;i</span><span class="keyword operator increment js"><span>++</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;childInstances</span><span class="meta brace square js"><span>[</span></span><span>i</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì´ë¯¸&nbsp;ê·¸ë ¤ì ¸&nbsp;ìë&nbsp;children&nbsp;instanceë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;nextChildElements</span><span class="meta brace square js"><span>[</span></span><span>i</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ìë¡&nbsp;ê·¸ë ¤ì¼&nbsp;í &nbsp;children&nbsp;elementë¤</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newChildInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>reconcile</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>dom</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;childInstance</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;childElement</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>newChildInstances</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>push</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>newChildInstance</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;newChildInstances</span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>ì ì½ëìì reconcile í¨ì ììì instance ë¥¼ ìë¡ ìì±íë ê²½ì° ( ë§¨ ì²ì render ê° ëë¤ê±°ë type ì´ ë°ëë replace ì ê²½ì°) í´ë¹ ë¶ëª¨ì ìì(children) ë¤ë ìë¡ì´ instance ë¥¼ ìì±íë¤. ì¦, ë¶ëª¨ê° instance ê° ë§ë¤ì´ì§ë©´ ê·¸ ììë¤ë ìë¡­ê² instance ë¥¼ ë§ë ë¤. ììì´ type ì´ ê°ëë¼ë ë¶ëª¨ê° ë°ëìê¸° ëë¬¸ì ì¬ ì¬ì©íì§ ëª»íë¤. <br/></p>
<p>ëì ì ë¶ëª¨ element ì type ì´ ê°ìì dom ì ì¬ì¬ì© í ëë ììë¤ì íëíë reconcile ì²ë¦¬ í´ì¤ë¤. ì´ë, ììë type ì´ ê°ë¤ë©´ ì¬ì¬ì© ê°ë¥.</p>
<h3>Removing DOM nodes</h3>
<p>ë§ì½ì <code>nextChildElements</code>ê° <code>childInstances</code> ë³´ë¤ length ê° ë ê¸¸ë¤ë©´ reconcileChildren í¨ìë reconcile í¨ìë¥¼ í¸ì¶í  ë instance ë¥¼ <code>undifined</code>ë¡ í´ì í¸ì¶í  ê²ì´ë¤. ê·¸ë¬ë©´ <code>if(instance == null)</code> ì ê±¸ë ¤ì ìë¡ì´ instance ë¥¼ ìì±í  ê²ì´ë¤. ë°ë©´ì ë°ëê° ëë¤ë©´ ì´ë¨ê¹?</p>
<p><code>childInstances</code>ê° <code>nextChildElements</code> ë³´ë¤ length ê° ë ê¸¸ë¤ë©´ reconcile í¨ììì childElement ì¸ìë¥¼ <code>undefined</code>ë¥¼ ë³´ë¼ ê²ì´ë¤. ì´ë reconcile í¨ìììë <code>element.type</code> ì²´í¬ì ìë¬ê° ë°ìíê² ëë¤.</p>
<p>dom ì´ ì ê±°ëëê±¸ ê³ ë ¤íì§ ììê¸° ëë¬¸ì´ë¤. ê·¸ëì ëê°ì§ë¥¼ ì²´í¬ í  ê²ì´ë¤. íëë reconcile í¨ììì element ê° null ì¸ ê²½ì°ì reconcileChildren í¨ììì newChildInstance ê° null ì¸ ê²½ì°ë¥¼ íí°í´ì¤ ê²ì´ë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>reconcile</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>parentDom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>instance</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>element</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>instance&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Create&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ê¸°ì¡´ì&nbsp;ê·¸ë ¤ì§&nbsp;instanceê°&nbsp;ìë&nbsp;ê²½ì°&nbsp;element&nbsp;ê°ì´&nbsp;ë¤ì´ìì¼ë©´&nbsp;ìë¡ì´&nbsp;ì¶ê°íë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>instantiate</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>newInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;newInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>element&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Remove&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì´ì ì&nbsp;ê·¸ë ¤ì¡ë&nbsp;instance&nbsp;ê°&nbsp;ìëë°&nbsp;elementê°&nbsp;null&nbsp;ì´ë¼ëê±´&nbsp;ìë¡ì´&nbsp;ìì ì¬í­ì´&nbsp;domì&nbsp;ì­ì íë¤ë&nbsp;ê²ì´ë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ê·¸ëì&nbsp;ê·¸ì&nbsp;ë§¤ì¹­&nbsp;ëë&nbsp;instance.dom&nbsp;ì&nbsp;ì ê±°í´ì£¼ì.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>removeChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì¬ê¸°ì&nbsp;null&nbsp;ì&nbsp;ë¦¬í´í´ì£¼ê¸°&nbsp;ëë¬¸ì&nbsp;reconcileChildren&nbsp;í¨ììì&nbsp;nullì&nbsp;filter&nbsp;ì²ë¦¬&nbsp;íë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Update&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>updateDomProperties</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>childInstances</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>reconcileChildren</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>instance</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>element</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;element</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;instance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Replace&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì´ë¯¸&nbsp;ê·¸ë ¤ì§&nbsp;instanceê°&nbsp;ìê³ &nbsp;elementë&nbsp;ìë¡&nbsp;ë¤ì´ìëë°&nbsp;typeì´&nbsp;ë¤ë¥´ë¤ë©´&nbsp;ìë¡&nbsp;ë§ë¤ì´ì&nbsp;êµì²´íë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>instantiate</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>replaceChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>newInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;newInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì¸ì¤í´ì¤ì&nbsp;childInstanceê°&nbsp;ë°°ì´ì´ê¸°&nbsp;ëë¬¸ì&nbsp;ì´&nbsp;ë°°ì´ì&nbsp;ëë©´ì&nbsp;reconcile&nbsp;ì²ë¦¬.</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>reconcileChildren</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>instance</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>element</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>dom</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ê¸°ì¡´ì&nbsp;ê·¸ë ¤ì¡ë&nbsp;dom</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childInstances</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>childInstances</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>nextChildElements</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>props</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>children</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newChildInstances</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>count</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support class math js"><span>Math</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function math js"><span>max</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>childInstances</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property js"><span>length</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>nextChildElements</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property js"><span>length</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>for</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="storage type var js"><span>let</span></span><span>&nbsp;i&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;i&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>&nbsp;count</span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;i</span><span class="keyword operator increment js"><span>++</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;childInstances</span><span class="meta brace square js"><span>[</span></span><span>i</span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;nextChildElements</span><span class="meta brace square js"><span>[</span></span><span>i</span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newChildInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>reconcile</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>dom</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;childInstance</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;childElement</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>newChildInstances</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>push</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>newChildInstance</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;reconcile&nbsp;í¨ììì&nbsp;childElementê°&nbsp;nullì¸&nbsp;ê²½ì°ì&nbsp;domì´&nbsp;ì ê±°ë¬ë¤ê³ &nbsp;ê°ì£¼íê³ &nbsp;null&nbsp;ì&nbsp;ë°íí &nbsp;ê²ì´ë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="variable other object js"><span>newChildInstances</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>filter</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>instance</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;instance&nbsp;</span><span class="keyword operator comparison js"><span>!=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p><a href="https://codepen.io/pomber/pen/WjLqYW?editors=0010">codepen</a></p>
<p>ì¬ê¸°ê¹ì§ ì ë¦¬ë¥¼ í´ë³´ë©´ ì²ìì <code>element</code> ë¥¼ ë°ìì ë¬´ì¡°ê±´ dom ì ë§ë¤ê³  dom tree êµ¬ì¡°ë¥¼ render í¨ì ë´ìì êµ¬ì¡°ë¥¼ ì¡ê³  ì§ííê² ëëë° ë§¨ ì²ììë render ë¥¼ ëª¨ë ì§ííê³  ëì <code>parentDom.appendChild(dom)</code> ë¥¼ ì§ííë¤. ì´ë¬ë©´ ë°ìëë ë¬¸ì ë ê³ì root dom íë©´ì ëì¼í êµ¬ì¡°ê° ì¶ê°ê° ëë¤ë ì ì´ë¤.</p>
<p>ì´ë¬ë©´ ìëê¸° ëë¬¸ì replace ë¥¼ ì¶ê° íê² ëë¤. <code>parentDom.replaceChild(dom, parentDom.lastChild)</code> ë¼ë ë¡ì§ì ì¶ê° íê² ëëë° ì¡°ê±´ì <code>parentDom.lastChild</code>ì ì ë¬´ë¡ íë¨íê² ëë¤. ì´ë ê² ëë©´ root dom ë°ì¼ë¡ replace ê° ì´ë¤ì ¸ì tick ê°ì app ìì ìíë ì¡°ê±´(ëì¼í ìë¦¬ì update ë íë©´)ì ë¬ì± í  ì ìë¤.</p>
<p>ì¬ê¸°ì ë íê°ì§ì ë¬¸ì ë ê·¸ë¦¬ê³ ì íë í¸ë¦¬í dom ì´ ìíë ìë¦¬ì replace ê° ëì§ë§, ê·¸ dom ì <code>children</code> ì ëí´ìë ê³ì ìë¡­ê² ê·¸ë¦°ë¤ë ì ì´ë¤. ê·¸ë¬ëê¹ íµì¼ë¡ ìë¡ ê·¸ë ¤ì íë©´ì ê°ììë¦¬ì replace íê³  ë¤ì update ê° íìí ë íµì¼ë¡ dom ì ìë¡ ë§ë¤ì´ ë¤ì replace ë¥¼ íë¤ë ì ì´ë¤. ë³íê° íìí dom ë§ ê·¸ë¦¬ì§ ìê³  ì ë¶ ë¤ì ê·¸ë¦¬ë ìì´ ëë¯ë¡ ë³µì¡í UI ì ê²½ì° ë¹ì©ì´ ë§ì´ ë¤ê² ëì´ìë¤.</p>
<p>ê·¸ëì update ì dom type ì´ ê°ë¤ë©´ ìë¡ create íë ê²ì´ ìë dom ì ìì±(props)ë§ update íê³  ê¸°ì¡´ì dom ì ê·¸ëë¡ ì°ë <code>reconcile</code> í¨ìë¥¼ ë§ë¤ìì¼ë©°, ê¸°ì¡´ ê·¸ë ¤ì¡ë <code>element</code>ì type ë¹êµì ëë¶ì´ dom ì ì¬ì¬ì©ì ìí ìë¡ì´ ê°ëì¸ <code>instance : {dom, element, childInstances }</code> ë¼ëê²ì ëìíë¤. ëí íë² ê·¸ë ¤ì§ ì´ì  <code>instance</code>ë ë³ëë¡ ì ì¥ì í´ëë¤.
ì¬ê¸°ì reconcile í¨ìì ì­í ì parentDom, ì´ì ì ê·¸ë ¤ì¡ë instance, ìë¡ì´ element ë°ìì ì¡°ê±´ì ë§ê²ë dom ì ê·¸ë ¤ì¤ë¤.</p>
<p>ê·¸ëì reconcile ì í¨ììë ë¤ìê³¼ ê°ì ì¡°ê±´ì´ ë¶ëë¤.</p>
<ul>
<li>ì´ì ì ê·¸ë ¤ëì <code>instance</code> ê° ìë¤ë©´ ìë¡ <code>instance</code> ë¥¼ ë§ë¤ê³  ë§ë¤ì´ì§ dom ì append ìí¨ë¤.</li>
<li>ìë¡ ê·¸ë ¤ì§ë <code>element</code> ê° null ì´ë¼ë©´ ë§¤ì¹­ëë <code>parentDom</code> ìì ììë¤ì ì­ì íë¤.</li>
<li>ì´ì ì ê·¸ë ¤ëì <code>instance</code> ì element type ê³¼ ìë¡ ê·¸ë¦´ë ¤ë <code>element type</code> ì´ ê°ì¼ë©´ ì´ì ì ê·¸ë ¤ ëì <code>instance</code> ì dom ì prop ë§ ìë°ì´í¸ íë¤. ê·¸ë¦¬ê³  ëì í´ë¹ <code>instance</code> ì <code>children</code> ì <code>reconcil</code> ì íë¤. ì¬ê¸°ì ë°ë¡ <code>reconcileChildren</code> í¨ìê° ì¡´ì¬íë ì´ì ë <code>children</code> ì´ ë°°ì´ íìì´ê¸° ëë¬¸ì´ë¤.</li>
<li>ê·¸ ì¸ ëª¨ë  ê²½ì°ìë <code>parentDom</code> ê¸°ì¤ì¼ë¡ ìë¡­ê² <code>instance</code> ë¥¼ ë§ë¤ì´ì replace íë¤.</li>
</ul>
<p>ì¬ê¸°ê¹ì§ì ë¬¸ì ë dom ì ì¬ì¬ì©íê¸´ íë¤ì§ë§ ëª¨ë  ë³íì ëí´ì ì ì²´ dom ì ëí render ë¥¼ ì§ííë¤ë ê²ì´ë¤.</p>
<h2>Components and State</h2>
<p>ì ì½ëììë ëªëª ê°ì§ ë¬¸ì ì¬í­ì´ ììë¤.</p>
<ul>
<li>ëª¨ë  ë³íì ì ì²´ virtual DOM tree ë¥¼ reconciliation ì ì§íí©ëë¤.</li>
<li>State ê° ê¸ë¡ë²íê² ì¡´ì¬í©ëë¤.</li>
<li>state ê° ë³í ë í render í¨ìë¥¼ ì¢ ë ëªìì ì¼ë¡ í¸ì¶í´ì¼ í©ëë¤.</li>
</ul>
<p>Components ë ì´ë¬í ì´ìë¥¼ í´ê²°íëë° ëìì ì¤ì ììµëë¤.</p>
<ul>
<li>JSX ë¥¼ ì´ì©í´ Custom tag ë¥¼ ì ì í  ì ììµëë¤.</li>
<li>lifecycle ì´ë²¤í¸ì Hook ì ê±¸ì ììµëë¤.</li>
</ul>
<p>ë¨¼ì í´ì¼ í  ì¼ì ì»´í¬ëí¸ê° íì¥ ë  Component ê¸°ë³¸ í´ëì¤ë¥¼ ì ê³µíë ê²ìëë¤. ì°ë¦¬ë êµ¬ì± ìì ìíë¥¼ ìë°ì´í¸íë ë° ì¬ì©í  <code>partialState</code>ë¥¼ ë°ë <code>setState</code> ë©ìëì props ë§¤ê° ë³ìê°ìë ìì±ìê° íìí©ëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta class js"><span class="storage type class js"><span>class</span></span><span>&nbsp;</span><span class="entity name type class js"><span>Component</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function js"><span class="entity name function constructor js"><span>constructor</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>props</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;props</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function method definition js"><span class="entity name function js"><span>setState</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>partialState</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>assign</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;partialState</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p>ì´íë¦¬ì¼ì´ì ì½ëììë ì´ í´ëì¤ë¥¼ ììë°ì ê²ìëë¤. ê·¸ íì div ì span ê°ì´ <code>&#x3C;MyComponent></code> ì²ë¼ ì¬ì©í  ê²ìëë¤.
ì¬ê¸°ì ì¤ìíê±´ ì°ë¦¬ê° ë§ë¤ìë <code>createElement</code> ìì ì´ íì ììµëë¤. element <code>type</code>ì¼ë¡ class ì»´í¬ëí¸ë¥¼ ë°ê³  <code>props</code>ë¥¼ ë¤ë£°ê²ìëë¤.
ì°ë¦¬ë ììê° ì£¼ì´ì§ ì»´í¬ëí¸ ì¸ì¤í´ì¤( public instances ë¼ê³  ë¶ë¦ëë¤.) ë¥¼ ìì±íë í¨ìê° íìí©ëë¤.
ì¬ê¸°ì <code>public instance</code> ë¼ê³  íëê±´ class ì»´í¬ëí¸ì ì¸ì¤í´ì¤ìëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>createPublicInstance</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>element</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>internalInstance</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;typeì´&nbsp;class&nbsp;ì¼&nbsp;ê²½ì°</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="constant other js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant other js"><span>props</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;element</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>publicInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor js"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>type</span></span></span><span class="meta brace round js"><span>(</span></span><span>props</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>publicInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>__internalInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;internalInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;publicInstance</span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>public instance ìì±íë ê² ì¸ìë internal instance(from the virtual DOM) ì ë í¼ë°ì¤ë¥¼ ì¶ê°ì ì¼ë¡ ê°ì§ê³  ìê¸° ëë¬¸ì public instance state ê° ë³ê²½ ëììë í´ë¹ ì¸ì¤í´ì¤ íìí¸ë¦¬ë§ (instance sub-tree) ìë°ì´í¸ í  ì ìì´ì¼ í©ëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta class js"><span class="storage type class js"><span>class</span></span><span>&nbsp;</span><span class="entity name type class js"><span>Component</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function js"><span class="entity name function constructor js"><span>constructor</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>props</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;props</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function method definition js"><span class="entity name function js"><span>setState</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>partialState</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>assign</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;partialState</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;this.__internalInstanceë&nbsp;ê°ì&nbsp;DOM&nbsp;{&nbsp;dom,&nbsp;element,&nbsp;childInstance,&nbsp;publicInstance&nbsp;}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>updateInstance</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>__internalInstance</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>updateInstance</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>internalInstance</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>parentDom</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>internalInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>dom</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parentNode</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>element</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>internalInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>element</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ë³´íµì&nbsp;renderìì&nbsp;reconcileì&nbsp;ì§ííì§ë§</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;setStateê°&nbsp;ìì&nbsp;ììë&nbsp;reconcileì&nbsp;ì§í&nbsp;í &nbsp;ì&nbsp;ìë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>reconcile</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>parentDom</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;internalInstance</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p><code>instantiate</code> í¨ìë update ê° íìí©ëë¤. components ë¤ì public instace ë¡ ìì±íê³  component ì <code>render</code> í¨ìë¥¼ child element ë¥¼ ì»ê¸° ìí´ í¸ì¶í´ì¤ë¤. ê·¸ë¦¬ê³¤ í´ë¹ element ë¥¼ ë¤ì <code>instantiate</code> í¨ìë¡ í¸ì¶í´ì¤ë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;elementë¥¼&nbsp;ë°ìì&nbsp;í¸ë¦¬êµ¬ì¡°ë¥¼&nbsp;ëë©´ì&nbsp;instance&nbsp;êµ¬ì¡°&nbsp;{dom,&nbsp;element,&nbsp;childInstances}ë¥¼&nbsp;ë§ë ë¤.</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;element&nbsp;:&nbsp;{type:&nbsp;Component&nbsp;,&nbsp;props:&nbsp;{&nbsp;...&nbsp;,&nbsp;children:&nbsp;[]}}</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>instantiate</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>element</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="constant other js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant other js"><span>props</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;element</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isDomElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="keyword operator typeof js"><span>typeof</span></span><span>&nbsp;type&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>string</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>isDomElement</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Instantiate&nbsp;DOM&nbsp;element</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>isTextElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;type&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;</span><span class="constant other js"><span>TEXT_ELEMENT</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>dom</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;isTextElement</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createTextNode</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>type</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>updateDomProperties</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>dom</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;props</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childElements</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>props</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>children</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;childElements&nbsp;ë&nbsp;ë°°ì´ë¡&nbsp;ë¤ì´ì¤ê¸°&nbsp;ëë¬¸ì&nbsp;map&nbsp;ëë¦¬ë©´ì&nbsp;instantiate&nbsp;í¨ì&nbsp;í¸ì¶í´ì¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childInstances</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>childElements</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>map</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>instantiate</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childDoms</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>childInstances</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>map</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>childInstance</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="variable other object js"><span>childInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>childDoms</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>childDom</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="variable other object js"><span>dom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>childDom</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>instance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;dom</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;element</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;childInstances&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;instance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;element.typeì´&nbsp;class&nbsp;ì¼&nbsp;ê²½ì°.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Instantiate&nbsp;component&nbsp;element</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>instance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>publicInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>createPublicInstance</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>element</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;instance</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;childElementì&nbsp;ë°°ì´ì´&nbsp;ìëë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>publicInstance</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>render</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;child&nbsp;ì¸ì¤í´ì¤ê°&nbsp;íëì.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>instantiate</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>childElement</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>dom</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>childInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;instance&nbsp;ì&nbsp;publicInstanceë¥¼&nbsp;ë£ê¸°&nbsp;ìí´ì&nbsp;Object.assignì&nbsp;ì¬ì©</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>assign</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>instance</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;dom</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;element</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;childInstance</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;publicInstance&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;instance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>component elements ì dom elements ë¥¼ ìí internal instances(this.__internalInstance)ë ë¤ë¥´ë¤. Component internal instance ë¤ì ì¤ì§ íëì child(render í¨ììì ë¦¬í´ëë) ë§ ê°ì§ê³  ìë¤. ê·¸ëì internal instance ë¤ì dom instances ë¤ì´ ê°ì§ê³  ìë <code>childInstances</code> ë°°ì´ ì¸ì¤í´ì¤ë¤ ëì ì <code>childInstance</code> íë¡í¼í° íëë¥¼ ê°ì§ê³  ìë¤. ëí, component internal instance ë¤ì public instance (class ì»´í¬ëí¸ì ì¸ì¤í´ì¤) ë¥¼ ê°ì§ê³  ìì íìê° ìë¤. ê·¸ëì¼ render í¨ìê° reconciliation íë ëì ë¶ë ¤ì§ì ìê¸° ëë¬¸ì´ë¤.</p>
<p>íê°ì§ ëì¹ê²ì´ ìë¤ë©´ component instance ì reconciliation ë¥¼ ë¤ë£¨ë ê²ì´ë¤. ê·¸ëì ì°ë¦° reconciliation algorithm ì íê°ì§ ì¼ì´ì¤ë¥¼ ë ì¶ê°í  ê²ì´ë¤. children reconciliation ì ë¤ë£¨ì§ ììë ëë íê°ì§ child ë§ ê°ì§ê³  ìë component instance ê° ì£¼ì´ì¡ìë, ì°ë¦° public instance ì props ë¥¼ update ìí¤ê³  child ë¥¼ re-render ìì¼ì£¼ë©´ ëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;domì&nbsp;ì´ë¤&nbsp;ë°©ìì¼ë¡&nbsp;ê·¸ë¦´ì§ë¥¼&nbsp;ê²°ì íë&nbsp;í¨ì</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>reconcile</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>parentDom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>instance</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>element</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>instance&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Create&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>instantiate</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>newInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;newInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>element&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Remove&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>removeChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>!==</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Replace&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>instantiate</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentDom</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>replaceChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>newInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;newInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator typeof js"><span>typeof</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>string</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Update&nbsp;dom&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>updateDomProperties</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>childInstances</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>reconcileChildren</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>instance</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;element</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>element</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;element</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;instance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>Update&nbsp;composite&nbsp;instance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>publicInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childElement</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>publicInstance</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>render</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>oldChildInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>childInstance</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>reconcile</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>parentDom</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;oldChildInstance</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;childElement</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>childInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>childInstance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;childInstance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>element</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;element</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;instance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>ì´ê² ì ë¶ì´ë¤. ì´ ì½ëë¥¼ ì¬ì©í´ì íì©í ìì ì´ë¤. : <a href="https://codepen.io/pomber/pen/RVqBrx">codepen</a></p>
<p>class Component ìì setState ë¥¼ ì¬ì©íë©´ í´ë¹ ì»´í¬ëí¸ë¥¼ ê¸°ì¤ì¼ë¡ children ì ëí <code>reconcile</code>ì ì§ííë¤.
<code>reconcile</code>ì ì§ííë¤ë ê²ì ì´ì  instance ì ìë¡ ë¤ì´ì¨ element ë¥¼ ë¹êµí´ì ì´ë¤ ë°©ë²ì¼ë¡ dom ì ë ëë§ í ì§ë¥¼ ê²°ì íê² ëë ê²ì´ë¤.
<code>instantiate</code>ë¥¼ ì¤ííë¤ë ê²ì ìë¡­ê² ë¤ì´ì¨ element ê° ì´ì  ê·¸ë ¤ë¼ê±°ë ìì í ë¬ë¼ì¡ì ëë¥¼ ì¤ííê² ëë¤.</p>
<h2>Fiber: Incremental reconciliation</h2>
<p>ë¦¬ì¡í¸ 16 ë²ì ¼ì´ ì¶ì ëìë¤. ê·¸ê²ì ë¦¬ì¡í¸ì ì½ë ëë¶ë¶ì ì¬ ìì±í´ì¼ í  íìê° ìê¸´ ìë¡ì´ ë´ë¶ì ì¸ ìí¤íì³ë¥¼ ê°ì§ê³  ìë¤.
ì´ê²ì ìì  ìí¤íì²ë¡ë ê°ë°íê¸° íë  ì¼ë¶ ê¸°ë¥ì´ ì ì ëììì ìë¯¸í©ëë¤. ëí ì´ ìë¦¬ì¦ìì ìì±í ëë¶ë¶ì ì½ëë íì¬ ê°ì¹ê° ìë¤ë ê²ì ìë¯¸í©ëë¤.</p>
<p>ì´ì ë 16 ìì ì¬ì©íë ìë¡ì´ ìí¤íì³ë¥¼ ì¬ì©í´ì ë¤ì ì½ëë¥¼ ìì±í´ë³¼ ìì ì´ë¤. í¹í, êµ¬ì¡°, ë³ìë¤, í¨ìì´ë¦ë¤ì ë¦¬ì¡í¸ ì½ëë² ì´ì¤ë¡ ë¶í° ê°ì ¸ìì ìì±í  ê²ìëë¤.
ì¬ê¸°ì ì°ë¦¬ê° ê±´ë¤ì§ ììë ëë API ë ë¤ìê³¼ ê°ìµëë¤.</p>
<ul>
<li>createElemetn()</li>
<li>render() (ì¤ì§ DOM ì rendering íë í¨ì)</li>
<li>Component ( setState() ë©ìëë¥¼ í¬í¨í. context ë life cycle ì ë¯¸í¬í¨)</li>
</ul>
<p>ì´ì  ì ì°ë¦¬ê° ìì  ì½ëë¥¼ ë¤ì ìì±í´ì¼ íëì§ë¥¼ ì¤ëªíê² ë¤.</p>
<h3>Why Fiber</h3>
<p>ë¸ë¼ì°ì ì ë©ì¸ ì°ë ëë ìê°ì ë§ì´ ì°ë ë¬´ìì¸ê°ë¡ ì¸í´ ë§¤ì° ë°ìê² ìì§ìë¤ê³  í ë, ë§¤ì° ì¤ìí task ë¤ì ëë ë ê¹ì§ ê¸°ë¤ë ¤ì¼ íë¤.</p>
<p>ì´ë° ë¬¸ì ë¥¼ ìí´ì ëªê°ì§ ë°ëª¨ë¥¼ ì¤ë¹íë¤. <a href="https://pomber.github.io/incremental-rendering-demo/react-sync.html">ë°ëª¨</a>ìì íìë¤ì´ ëëê±¸ ì ì§íê¸° ìí´ì ë©ì¸ ì°ë ëë ë§¤ 16ms ë§ë¤ ì¬ì©ê°ë¥ íëë¡ ì ì§ ìì¼ì£¼ì´ì¼ íë¤. ë§ì½ ì´ ë©ì¸ì°ë ëê° ë¤ë¥¸ ë¬´ìì¸ê°ë¡ blocked ë¹íë¤ê³  íë¤ë©´ ì¬ê¸°ì ë§¤ 200ms ë¼ê³  í´ë´ìë¤. ë©ì¸ ì°ë ëê° ë¤ì ìì ë¡ì ì§ë ê¹ì§ íì±ë¤ì´ ë©ì¶°ìê³  í´ë¹ íë ìì´ ì¬ë¼ì§ëê±¸ íì¸ í  ì ìì ê²ì´ë¤.</p>
<p>ë¬´ìì´ ë©ì¸ ì°ë ë ì¦, ëª ìëë©ì´ìì ë¶ëë½ê³  UI ìëµì ì ì§íê¸° ìí´ ìë¹ì ë§ì´í¬ë¡ ì´ë ëììê² ë°ìê² íëê°?</p>
<p>reconciliation ì½ëë¥¼ ê¸°ìµíëê°? íë² reconciliation ì½ëë¥¼ ì¤ííë©´ ë©ì¶ì§ ìëë¤. ë©ì¸ ì¤ë ëê° ë¤ë¥¸ ììì ìíí´ì¼íë ê²½ì° reconciliation ì½ëë ëê¸°í´ì¼í©ëë¤. ê·¸ë¦¬ê³  ì´ reconciliation ì½ëë ë§ì ì¬ê· í¸ì¶ë¡ ì¸í´ì ì§ì°ë  ì ìë ì½ëë¤. ì´ë°ì´ì ë¡ ì°ë¦¬ë í´ë¹ ì½ëë¥¼ ì¬ê· í¸ì¶ì ë£¨íë¡ êµì²´ê°ë¥í ìë¡ì´ ë°ì´í° êµ¬ì¡°ë¥¼ ì¬ì©íë reconciliation ì½ëë¥¼ ì¬ ìì±í´ì¼ í©ëë¤.</p>
<h3>Scheduling micro-tasks</h3>
<p>ì°ë¦° ì´ì  ììì ìì ë¨ìë¡ ëë íìê° ììµëë¤. ì§§ì ìê°ëì ëìíê¸° ìí´ì ì§§ì ë¨ìë¡ ëëë¤. ë©ì¸ ì¤ë ëê° ë ì°ì  ììê° ëì ììì ìííê²íê³  ë³´ë¥ì¤ì¸ ììì´ ìì¼ë©´ ììì ëë´ê¸° ìí´ ë¤ì ëììµëë¤.
ì´ ììì ëê¸° ìí´ì <code>requestIdelCallback()</code> í¨ìë¥¼ ì´ì© í  ê²ìëë¤. ì´ê²ì callback í¨ìë¥¼ íì ë£ì´ ëëë° ì´ê²ì ë¸ë¼ì°ì ê° idle íìì í¸ì¶ì´ ëê³ , ì¼ë§í¼ ì´ì©ê°ë¥í ìê°ì¸ì§ ì¤ëªí´ì£¼ë <code>deadline</code> íë¼ë¯¸í°ë¥¼ í¬í¨íê³  ìë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>ENOUGH_TIME</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;milliseconds</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>let</span></span><span>&nbsp;workQueue&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>let</span></span><span>&nbsp;nextUnitOfWork&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>schedule</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>task</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>workQueue</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>push</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>task</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>requestIdleCallback</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>performWork</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;requestIdleCallback&nbsp;ì¸ìë¡&nbsp;ë¤ì´ê°&nbsp;í¨ì</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì´&nbsp;í¨ìë&nbsp;ë¸ë¼ì°ì ê°&nbsp;idle&nbsp;ìì ì&nbsp;í¸ì¶ëê³ </span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;deadline&nbsp;íë¼ë¯¸í°ë¡&nbsp;ì ì í&nbsp;ìê°ì´&nbsp;ë¨ìëì§ë¥¼&nbsp;íì¸í´ì&nbsp;í´ë¹&nbsp;ë¡ì§ì&nbsp;ìííë¤.</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>performWork</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>deadline</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator logical js"><span>!</span></span><span>nextUnitOfWork</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;nextUnitOfWork&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>workQueue</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>shift</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>while</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>nextUnitOfWork&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="variable other object js"><span>deadline</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>timeRemaining</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>&gt;</span></span><span>&nbsp;</span><span class="constant other js"><span>ENOUGH_TIME</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;nextUnitOfWork&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>performUnitOfWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>nextUnitOfWork</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>nextUnitOfWork&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="variable other object js"><span>workQueue</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property js"><span>length</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>&gt;</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>requestIdleCallback</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>performWork</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>ì¤ì  ììì <code>performUnitOfWork</code> í¨ììì ì¼ì´ë©ëë¤. <code>performUnitOfWork</code> ìì ì°ë¦¬ì <strong>reconciliation code</strong> (ì´ì  instance ì ìë¡ ë¤ì´ì¨ element ë¥¼ ë¹êµí´ì ì´ë¤ ë°©ë²(replace, append,â¦)ì¼ë¡ dom ì ë ëë§í ì§ë¥¼ ê²°ì ) ë¥¼ ìì±í  íìê° ììµëë¤. <code>performUnitOfWork</code> í¨ìë ìì ì¡°ê°ì ëììì¼ì¼ í©ëë¤. ê·¸ë¦¬ê³¤ ë¤ìì ììì ë¤ì ììíë ë° íìí ëª¨ë  ì ë³´ë¥¼ ë°íí´ì¼ í¡ëë¤.
<br />
ì´ë° ììì ì¡°ê°ë¤ì ì¶ì íê¸°ìí´ fiber ë¤ì ì¬ì©í  ê²ìëë¤. ì¦, fiber ë ì¼ë ¨ì ììì ë¤ì ììíê¸° ìí´ ë§ë¤ì´ì¡ê³  ì´ê²ì ìì ì ë³´ ëªì¸ìë¼ê³  ìê°íë©´ ë ê±° ê°ë¤.</p>
<h3>The fiber data structure</h3>
<p>ì°ë¦¬ë render ë¥¼ ìíë ê° ì»´í¬ëí¸ì ëí´ fiber ë¥¼ ìì±í  ê²ìëë¤. <code>nextUnitOfWork</code> ë ì°ë¦¬ê° ìíë ë¤ì ììì¸ next fiber ë¥¼ ìí ì°¸ì¡° ê°ìëë¤. <code>performUnitOfWork</code> ë fiber ëí ìììíê³  ìë£ê° ëë©´ ìë¡ì´ fiber ë¥¼ ë¦¬í´í©ëë¤.
<br />
fiber ë ì´ë»ê² ìê²¼ëê°?</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type var js"><span>let</span></span><span>&nbsp;fiber&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;tag</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant other js"><span>HOST_COMPONENT</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;parent</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;parentFiber</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;child</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;childFiber</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;sibling</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;alternate</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;currentFiber</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;stateNode</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;className</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>foo</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;partialState</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;effectTag</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant other js"><span>PLACEMENT</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;effects</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p>ì´ê²ì ë³´íµì ìë°ì¤í¬ë¦½í¸ ê°ì²´ìëë¤.
<br />
ì°ë¦¬ë <code>parents</code>, <code>child</code> ê·¸ë¦¬ê³  <code>sibling</code> íë¡í¼í°ë¥¼ ì¬ì©íì¬ component ì tree ë¥¼ ì¤ëª íë fiber ë¤ì tree ë¥¼ êµ¬ì¶í©ëë¤.
<br />
<code>stateNode</code>ë component instance ì ëí ì°¸ì¡° ê°ì´ë¤. ì´ ê°ì¼ë¡  DOM element (createDomElement) ëë ì ì ê° ì ìí class component ì instance (createInstance) ë¥¼ ê°ì§ ì ììµëë¤.<br>
<br />
ìë¥¼ ë¤ë©´,</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/fiber01-8a3af4245f4db32744bd10e2fe3f154c-d9514.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABB0lEQVQoz3WRy07EMAxF+//fhliwgwWPSqBOO43r2s7DSVrcMiCGoZalKLJvfK7TeBJyMqGK84QEADihcy6mtK7rO+j9K60H0cQYEfD00avqn1rS0kPoINS61rr8Iw4hLHVhmUstvwtfveOc2sGjJB+y6S0trsR2SORc8pV473kb5O4ZglYtNWqxZLt86zdxyUWCFIO7wQaK5LPmWsqlmnL1McsO0njv643sB7vD/NAycJoohrRNfupi6/K64S/N0PcTABGxyO0TosuZbVRhr/tAbYdwQt19LQ0zjXAeYRQRozAXGqNRHrEA6RmjOTcvDSIKC7N48fM8G4JuW8hHf/vY5xd3WdgnVxgOSWCdrrMAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="fiber01.png"
        title=""
        src="/ho_blog/static/fiber01-8a3af4245f4db32744bd10e2fe3f154c-fb8a0.png"
        srcset="/ho_blog/static/fiber01-8a3af4245f4db32744bd10e2fe3f154c-1a291.png 148w,
/ho_blog/static/fiber01-8a3af4245f4db32744bd10e2fe3f154c-2bc4a.png 295w,
/ho_blog/static/fiber01-8a3af4245f4db32744bd10e2fe3f154c-fb8a0.png 590w,
/ho_blog/static/fiber01-8a3af4245f4db32744bd10e2fe3f154c-d9514.png 600w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>ì ìì ìì ì°ë¦¬ê° ì§ìí  ìë¡ ë¤ë¥¸ 3 ê°ì§ ì¢ë¥ì ì»´í¬ëí¸ë¤ì ë³¼ì ìë¤.</p>
<ul>
<li><code>b</code>,<code>p</code> ê·¸ë¦¬ê³  <code>i</code> ë¥¼ ìí fiber ë¤ì <strong>host components</strong> ëííë¤. ì´ë¤ì ìë³ìë tag ì <code>HOST_COMPONENT</code> ë¼ê³  ì§ì¹­ í ê²ì´ë¤. <code>type</code>ì string(html element ì íê·¸) ì´ ë ê²ì´ë¤. <code>props</code>ë ìì±ê°ê³¼ í´ë¹ element ì ì´ë²¤í¸ ë¦¬ì¤ëê° ëê² ë¤.</li>
<li><code>Foo</code> fiber ë <strong>class component</strong> ë¥¼ ëííë¤. ì´ê²ì <code>tag</code>ë <code>CLASS_COMPONENT</code> ê° ë  ê²ì´ê³ , <code>type</code>ì ì ì ê° ì ìí <code>Didact.Component</code>ë¥¼ ììí <code>class</code> ì ì°¸ì¡°ê°ì´ ë ê²ì´ë¤.</li>
<li><code>div</code>ë¥¼ ìí fiber ë <strong>host root</strong> ë¥¼ ëííë¤. ì´ê²ì ììì ì¸ê¸í host component ê³¼ ì ì¬íë° ê·¸ ì´ì ë DOM element ë¥¼ ì§ëê³  ìê¸° ëë¬¸ì´ë¤. ê·¸ë¬ë ì´ host root ë í¸ë¦¬ì root ê° ëì´ì í¹ë³íê² ë¤ë¤ì§ ê²ì´ë¤. <code>tag</code>ë <code>HOST_ROOT</code>ê° ë ê²ì´ë¤. ì´ fiber ì stateNode ë <code>Didact.render()</code>ë¡ ì ë¬ ë°ì DOM node ì´ë¤.</li>
</ul>
<p>ë¤ë¥¸ ì¤ìí íë¡í¼í°ë <code>alternate</code> ì´ë¤. ì´ <code>alternate</code> ê° íìí ì´ì ë ëë¶ë¶ì ìê°ëìì ëê°ì§ì fiber tree ë¥¼ ê°ì ¸ì¼ íê¸° ëë¬¸ìëë¤.
<strong>íê°ì§ tree ë ì°ë¦¬ê° ì´ë¯¸ render í DOM ì ê´í ê²ì´ê³ , ì´ê²ì ì°ë¦° current tree ëë old tree ë¼ê³  ë¶ë¥¼ ê²ì´ë¤. ë ë¤ë¥¸ íëë ì°ë¦¬ê° <code>setState()</code> ëë <code>Didact.render()</code> í¸ì¶ì íµí´ì ìë¡ì´ update ììì í ë ìì±ëë tree ì´ë¤. ì´ê²ì ì°ë¦° <em>work-in-progress tree</em> ë¼ê³  ë¶ë¥¼ ê²ìëë¤.</strong></p>
<p>work-in-progress tree ë old tree ì ì´ë¤ fiber ë ê³µì íì§ ììµëë¤. (ì´ê²ì work-in-progress tree ë¥¼ ë§ë¤ë ë§¤ë² ìë¡ì´ ê°ì²´ fiber ë¡ ë§ë ë¤ë ì´ì¼ê¸° ì´ë¤.)ì¼ë¨ work-in-progress tree ë¥¼ ìì±íê³ ëë©´ íìí DOM ì ë³íë¥¼ ë§ë¤ê³ , ë¤ì ì´ work-in-progress tree ê° old tree ê°ë©ëë¤.</p>
<p>ë°ë¼ì <code>alternate</code>ë work-in-progress tree fiber ë¤ì old tree ì ììíë fiber ë¤ê³¼ ì°ê²°íê¸° ìí´ ì¬ì©í©ëë¤. fiber ì ê·¸ê²ì <code>alternate</code>ë ê°ì <code>tag</code>, <code>type</code> ê·¸ë¦¬ê³  <code>stateNode</code>ë¥¼ ê³µì í©ëë¤. ëë¡  ìë¡ì´ rendering ììì´ ììë fiber ë¤ì <code>alternate</code>ë¥¼ ìê°ì§ê³  ìì ì ìë¤.</p>
<p>ì¬ê¸°ì <code>alternate</code>ë ì²ìì dom ì ê·¸ë¦´ë ì´ë¤í ê°ì ìê°ì§ê³  ìë¤ê° dom ì ê·¸ë¦¬ê³  ëê³  ë¤ì render ììë _rootContainerFiber ê°ì <code>alternate</code>ì í ë¹íë¤. ê·¸ ì´íì <code>reconcileChildrenArray</code> (children ëë©´ì fiber ë¥¼ ë§ë¤ì´ ì¤) ë©ìë ì¤íìì <code>wipFiber.alternate.child</code>ë¥¼ <code>oldFiber</code>ë¡ íì©íë¤.</p>
<p>ë§ì§ë§ì¼ë¡, <code>effects</code>ë¦¬ì¤í¸ì <code>effectTag</code>ë¥¼ ê°ìµëë¤. work-in-progress tree ììì DOM ì´ ë³íí  íìê° ìë fiber ë¥¼ ì°¾ììë <code>effectTag</code>ë¥¼ <code>PLACEMENT</code>, <code>UPDATE</code> ëë <code>DELETION</code>ì¼ë¡ ì¤ì í©ëë¤. ëª¨ë  DOM ë³íë¥¼ ìì½ê² ì²ë¦¬íê¸° ìí´ <code>effectTag</code>ë¥¼ ê°ì§ê³  ìë ëª¨ë  fiber ë¤ì ëª©ë¡(fiber íì í¸ë¦¬ë¡ë¶í° ëì¨ fiber ë¤)ì <code>effects</code>ì ì ì§í©ëë¤.</p>
<h3>Didact call hierarchy</h3>
<p>ì°ë¦¬ê° ìì±íë ¤ê³ íë ì½ëì íë¦ì ì´í´íë ¤ë©´ì´ ë¤ì´ì´ê·¸ë¨ì ì´í´ë³´ì­ìì¤.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/fiber02-cb798eaf0c4d3390f2b386a01f152b71-6dadd.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 584px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 80.65068493150686%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAABpElEQVQoz42TD2+DIBDF/f7fcFvm1k5R/NeKAoKg+7U2jTHNsktL4I5373F3Jus/TClV17UQ4nK57P0Jf2unrrtqY7F9LISAZ1nXZVmMMX3fxxiP4EvXFuePMEGguPeMgSykDDH2w8CmKIpxHI/gUanq8609f7VSHgQHrVVRNOfzrJRzbp/6AVZ9Lz/T+uu7zvN9jItRqblpbFWtfT9ZOwzDEfyH+Xmu2lZIqaeH/QVe7rb3UKdKyoNzO75gJkCdvffwsLler1LKeZ55Mx42OF+DqXBVVbSUynOJxtLhPM+7rgNJRjxZluGkbUcwYfBIpTZQkQJY27b4NzaYh7txfCGbMOnD3UivtQb/fBI/kNaYF7IBIBud0HJk5cF4nsOnrc3LsrnPafIs0iYShVBtmjf9qGC91WlZkBHr2mTZJAQKk3WJQL1zZckIyjRNy7Lc5pR3kovj6XRiHY3xjMrPjxfCZxltuDFT+2HUId46BAkv3PqEMcwImZx7tMr7cffxJK5ObZWOxXvoxeR80zR0Aqkwk4U9nDTGTtOi9SylEYIVVYB/AW9hoM7D2JM/AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="fiber02.png"
        title=""
        src="/ho_blog/static/fiber02-cb798eaf0c4d3390f2b386a01f152b71-6dadd.png"
        srcset="/ho_blog/static/fiber02-cb798eaf0c4d3390f2b386a01f152b71-97f41.png 148w,
/ho_blog/static/fiber02-cb798eaf0c4d3390f2b386a01f152b71-94c01.png 295w,
/ho_blog/static/fiber02-cb798eaf0c4d3390f2b386a01f152b71-6dadd.png 584w"
        sizes="(max-width: 584px) 100vw, 584px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p><code>render()</code> ë° <code>setState()</code> ìì ììíì¬ <code>commitAllWork()</code> ìì ëëë íë¦ì ë°ë¦ëë¤.</p>
<h3>Old code</h3>
<p>ëë¶ë¶ì ì½ëë¥¼ ì¬ ìì±í´ì¼ íë¤ê³  ì´ì¼ê¸° íììë¤. íì§ë§ ë¨¼ì  ìì íì§ ìì ì½ëê° ìëì§ ì´í´ë´ìë¤.</p>
<p>í¸ëì¤íì¼ë JSX ê° ì¬ì©íë í¨ìì¸ <code>createElement</code> í¨ìë¥¼ ìì±íìµëë¤. ì°ë¦¬ê° ìì±í <code>createElement()</code> í¨ìë ë³í  íìê° ìë¤. ì°ë¦° ê³ì ëì¼í element ë¤ì ì¬ì©í  ê²ì´ê¸° ëë¬¸ì´ë¤. ì¬ê¸°ì element ë <code>type</code>,<code>props</code> ê·¸ë¦¬ê³  <code>children</code>ì ê°ì§ íë²í ìë°ì¤í¬ë¦½í¸ ê°ì²´ìë¤.</p>
<p>ì°ë¦° ë¸ëì DOM íë¡í¼í°ë¥¼ ê°±ì  íê¸° ìí´ <code>updateDomProperties()</code> ë ìì±íìë¤. ë DOM element ë¤ì ìì±íê¸° ìí´ <code>createDomElement()</code> í¨ìë ì¶ì¶íìµëë¤. ì´ ë í¨ì ëª¨ë <a href="https://gist.github.com/pomber/c63bd22dbfa6c4af86ba2cae0a863064">ì´ê³³</a>ìì ë³¼ì ììµëë¤.</p>
<p>base class ì¸ <code>Component</code> ë ìì±íììµëë¤. ì¬ê¸°ì <code>setState()</code>ê° <code>scheduleUpdate()</code> ë¥¼ í¸ì¶íê² ë§ë¤ê³  <code>createInstance()</code> ê° instance ì fiber ë¥¼ ì°¸ì¡°íëë¡ ë§ë­ìë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta class js"><span class="storage type class js"><span>class</span></span><span>&nbsp;</span><span class="entity name type class js"><span>Component</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function js"><span class="entity name function constructor js"><span>constructor</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>props</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;props&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function method definition js"><span class="entity name function js"><span>setState</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>partialState</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>scheduleUpdate</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;partialState</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>createInstance</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>fiber</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>instance</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor js"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>fiber</span><span class="meta delimiter property period js"><span>.</span></span><span>type</span></span></span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>__fiber</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;fiber</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;instance</span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>ì´ ì½ëë¡ ììíê³  ëë¨¸ì§ë ì²ìë¶í° ë¤ì ìì±íì§ ììµëë¤.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/fiber03-925fc0565fc5ec71cb75ccc91b85eb95-108ba.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 21.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAhUlEQVQI12WOwQoDIQxE9/8/0IuKoOtN0JVGG6O26dqWlp1DiGRmfNvj1Jzzd67lqlJKSqm1tp4b+7z3WmvnXM4ZAIjoGrsB3BFjSvu+I+I7PMYwxgghpJTWWm5RSrEjhLBaFgUhwnHkGGut48P1+plNTMKz9843Lm6n/uDZVgpxkuiL9gTP0+hEPHz+hQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="fiber03.png"
        title=""
        src="/ho_blog/static/fiber03-925fc0565fc5ec71cb75ccc91b85eb95-fb8a0.png"
        srcset="/ho_blog/static/fiber03-925fc0565fc5ec71cb75ccc91b85eb95-1a291.png 148w,
/ho_blog/static/fiber03-925fc0565fc5ec71cb75ccc91b85eb95-2bc4a.png 295w,
/ho_blog/static/fiber03-925fc0565fc5ec71cb75ccc91b85eb95-fb8a0.png 590w,
/ho_blog/static/fiber03-925fc0565fc5ec71cb75ccc91b85eb95-108ba.png 700w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p><code>Component</code> í´ëì¤ì <code>createElement()</code> ì¸ìë <code>render()</code>ì <code>setState()</code>ë¼ë ë ê°ì ê³µì© í¨ìê° ìì¼ë©° <code>setState()</code>ê° <code>scheduleUpdate()</code>ë¥¼ í¸ì¶íë ê²ì ë³´ììµëë¤.
<code>render()</code> ë° <code>scheduleUpdate()</code> ë ë¹ì·í©ëë¤. ì´ ë í¨ìë¤ì ì ìë°ì´í¸ í ê²ì ë°ê³  ëê¸°ì´(í)ì ë£ìµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Fiber&nbsp;tags</span></span></span></div><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>HOST_COMPONENT</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>host</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>CLASS_COMPONENT</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>class</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>HOST_ROOT</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>root</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Global&nbsp;state</span></span></span></div><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>updateQueue</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>let</span></span><span>&nbsp;nextUnitOfWork&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>let</span></span><span>&nbsp;pendingCommit&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;render&nbsp;í¨ì</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ìëì&nbsp;render&nbsp;í¨ìë¼ëê±´&nbsp;ì´&nbsp;í¨ìë¥¼&nbsp;ê°ë¦¬í´</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì´&nbsp;renderë&nbsp;ì²ìì&nbsp;ë±&nbsp;íë²&nbsp;ì¤íí¨.</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>render</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>elements</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>containerDom</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>updateQueue</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>push</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;from</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant other js"><span>HOST_ROOT</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;dom</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;containerDom</span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;newProps</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;elements&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>requestIdleCallback</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>performWork</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>scheduleUpdate</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>instance</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>partialState</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>updateQueue</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>push</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;from</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant other js"><span>CLASS_COMPONENT</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;instance</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;instance</span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;partialState</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;partialState</span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>requestIdleCallback</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>performWork</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p><code>updateQueue</code> ë°°ì´ì ì¬ì©í´ì ë³´ë¥ì¤ì¸ update ì¶ì í  ê²ìëë¤. ë§¤ <code>render()</code> ëë <code>scheduleUpdate()</code> í¸ì¶ì ìë¡ì´ ìë°ì´í¸ë¥¼ <code>updateQueue</code> íì ë£ëë¤.
ê° ìë°ì´í¸ë¤ì ìë°ì´í¸ ì ë³´ë ë¤ë¥´ê³  ì´ê²ì ì°ë¦¬ê° ëì¤ì <code>resetNextUnitOfWork()</code> ìì ì´ë»ê² ì¬ì©í ì§ ë³¼ì ììê²ìëë¤.</p>
<p>ìë°ì´í¸ë¥¼ íì ë£ê³  ëì, <code>performWork()</code>ì ëí ì§ì° í¸ì¶ì í¸ë¦¬ê±°í©ëë¤.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/fiber04-f7dc85e94c54deaebdbe6e0fc381b0a2-108ba.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 21.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAhUlEQVQI12WOSw6FIBAEuf8ZCWwQDGieAeU76OtA4sZadQo6PewZ9N5nuAfPh5uoeF9DiOeZUpqSEZGUclkWrTXnXCllrfXef/s/cByN6F1ipRRjDDpCCDlY17XW+h6Sc76uC2bfNuccAiowWGXzBxQNcFJr7V3DCP5B4inGiAyDHEJA5Q+XkefP5rfyDAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="fiber04.png"
        title=""
        src="/ho_blog/static/fiber04-f7dc85e94c54deaebdbe6e0fc381b0a2-fb8a0.png"
        srcset="/ho_blog/static/fiber04-f7dc85e94c54deaebdbe6e0fc381b0a2-1a291.png 148w,
/ho_blog/static/fiber04-f7dc85e94c54deaebdbe6e0fc381b0a2-2bc4a.png 295w,
/ho_blog/static/fiber04-f7dc85e94c54deaebdbe6e0fc381b0a2-fb8a0.png 590w,
/ho_blog/static/fiber04-f7dc85e94c54deaebdbe6e0fc381b0a2-108ba.png 700w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>ENOUGH_TIME</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;milliseconds</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;render&nbsp;ëë&nbsp;scheduleUpdate&nbsp;ìì</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;requestIdleCallback(performWork)&nbsp;ë¡&nbsp;í¸ì¶í¨.</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>performWork</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>deadline</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>workLoop</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>deadline</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>nextUnitOfWork&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="variable other object js"><span>updateQueue</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property js"><span>length</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>&gt;</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>requestIdleCallback</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>performWork</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;nextUnitOfWorkì&nbsp;ì²ìì&nbsp;nullë¡&nbsp;ìíëì´&nbsp;ìì.</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>workLoop</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>deadline</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator logical js"><span>!</span></span><span>nextUnitOfWork</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì¬ê¸°ì&nbsp;ì²ìì&nbsp;nextUnitOfWork&nbsp;ì&nbsp;ìíí¨.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>resetNextUnitOfWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>while</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>nextUnitOfWork&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="variable other object js"><span>deadline</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>timeRemaining</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>&gt;</span></span><span>&nbsp;</span><span class="constant other js"><span>ENOUGH_TIME</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;nextUnitOfWork&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>performUnitOfWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>nextUnitOfWork</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>pendingCommit</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>commitAllWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>pendingCommit</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>ì¬ê¸° ì°ë¦¬ê° ìì ë³´ìë <code>performUnitOfWork()</code> í¨í´ì ì¬ì©í©ëë¤.</p>
<p><code>requestIdleCallback()</code>ì deadline íë¼ë¯¸í°ë¥¼ í¨ê» ê°ì§ íê² í¨ìë¥¼ í¸ì¶í©ëë¤. <code>performWork()</code> deadline ì ë°ìì <code>workLoop()</code> ë¡ ì ë¬í´ì¤ëë¤. <code>workLoop()</code> returns íì, <code>performWork()</code> ìì ì¤ë¹ê° ëìëì§ ì²´í¬ë¥¼ í©ëë¤. ë§ì½ ì¤ë¹ê° ë¬ë¤ë©´, ìê¸° ìì ì ìë¡ì´ ì§ì° í¸ì¶ë¡ ì¤ì¼ì¤ë§ ìíµëë¤.</p>
<p><code>workLoop()</code> ì ìê°ì ì£¼ìíë í¨ììëë¤. ë§ì½ deadline ì´ ëë¬´ ê°ê¹ë¤ë©´(ë§ê°ìê°), ë£¨í ììì ë©ì¶ê³  ë¤ì ìë°ì´í¸ í´ì¼í  ììì ë¨ê²¨ë¡ëë¤. ê·¸ëì ë¤ì ë¤ì íìì ì¬ê° ë  ì ìëë¡ í©ëë¤.</p>
<blockquote>
<p><code>deadline.timeRemaining()</code>ì´ ë¤ë¥¸ ìì ë¨ìë¥¼ ì¤ííê¸°ì ì¶©ë¶íì§ ìëì§ íì¸íê¸° ìí´ ENOUGH_TIME (1ms ìì, React ì ëì¼)ì ì¬ì©í©ëë¤. <code>performUnitOfWork()</code>ê° ê·¸ ì´ìì ìííë©´ ë§ê° ìê°ì´ ì´ê³¼ ë ê²ìëë¤. deadline ì ë¸ë¼ì°ì ì ì ì ì¼ ë¿ì´ë¯ë¡ ëª ë°ë¦¬ ì´ ëì ì´ê³¼ì¤í íëê²ì ê·¸ë ê² ëìì§ ììµëë¤.</p>
</blockquote>
<p><code>performUnitOfWork()</code>ë ìë°ì´í¸ë¥¼ìí work-in-progress í¸ë¦¬ë¥¼ ë§ë¤ê³  DOM ì ì ì©í´ì¼ í  ë³ê²½ ì¬í­ì ë¨ê²¨ë¡ëë¤. <strong>ì´ê²ì í ë²ì í fiber ì© ì ì§ì ì¼ë¡ ì´ë£¨ì´ì§ ê²ìëë¤.</strong></p>
<p><code>performUnitOfWork()</code>ê° íì¬ ìë°ì´í¸ì ëí ëª¨ë  ììì ìë£íë©´ null ì ë°ííê³  ë³´ë¥ì¤ì¸ DOM ë³ê²½ ì¬í­ì <code>pendingCommit</code>ì ë¨ê²¨ ë¡ëë¤. ë§ì¹¨ë´ <code>commitAllWork()</code>ë <code>pendingCommit</code> ìì <code>effects</code>ë¥¼ ë°ì DOM ì ë³ê²½í©ëë¤.</p>
<p><code>commitAllWork()</code>ë ë£¨í ì¸ë¶ìì í¸ì¶ë©ëë¤. <code>performUnitOfWork()</code>ìì ìí ë ììì DOM ì ë³ê²½íì§ ìì¼ë¯ë¡ ë¶í íë ê²ì´ ì¢ìµëë¤. ë°ë©´ì, <code>commitAllWork()</code>ë DOM ì ëì°ë³ì´ìí¬ ê²ì´ê³  ì¼ê´ì±ìë UI ë¥¼ í¼íê¸° ìí´ íë²ì ëª¨ë ìë£ëì´ì¼í©ëë¤.</p>
<p>ì°ë¦¬ë ì¬ì í ì´ëì <code>nextUnitOfWork</code>ë¥¼ ì²ìì¼ë¡ ë¶ë¬ì¤ëì§ ë³´ì§ ëª»íìµëë¤.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/fiber05-0e1c8186d35e3df92e401236f52f1908-108ba.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 21.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAbUlEQVQI142OCwrAIAxDvf8tBUUmguDq37oFe4AtUAhpHq16fquUUmtda+29JVGYnDMRpZTuoxACHfXe0QMAw8xSgwEvicLaGKO19t4750Baa68jtMcYMUYwAOQyH2E151Sf37bW5A5IeAnl/xdhZulTyLyzoAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="fiber05.png"
        title=""
        src="/ho_blog/static/fiber05-0e1c8186d35e3df92e401236f52f1908-fb8a0.png"
        srcset="/ho_blog/static/fiber05-0e1c8186d35e3df92e401236f52f1908-1a291.png 148w,
/ho_blog/static/fiber05-0e1c8186d35e3df92e401236f52f1908-2bc4a.png 295w,
/ho_blog/static/fiber05-0e1c8186d35e3df92e401236f52f1908-fb8a0.png 590w,
/ho_blog/static/fiber05-0e1c8186d35e3df92e401236f52f1908-108ba.png 700w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>ìë°ì´í¸ë¥¼ ë°ìì ì²« ë²ì§¸ <code>nextUnitOfWork</code>ë¡ ë³ííë <code>resetNextUnitOfWork()</code> í¨ì ìëë¤.
<code>resetNextUnitOfWork()</code> í¨ìë ì²« root fiber ë¥¼ ë§ëë í¨ìë¼ê³  ìê°íë©´ ëë¤. <code>render()</code> í¨ì ëë <code>scheduleUpdate()</code>í¨ììì <code>performWork() í¨ì</code>ë¥¼ ììí ë <code>nextUnitOfWork</code> ê° ìë¤ë©´ root fiber ë¥¼ ë§ë¤ì´ì <code>performUnitOfWork(nextUnitOfWork)</code> ë¥¼ ìííë¤.</p>
<p><code>nextUnitOfWork</code> ì´ê±°ë ê³§ fiber ë¼ê³  ìê°íë©´ ëê² ë¤. ì¬ê¸°ì <code>performUnitOfWork</code> ì ë§¤ê° ë³ì ëªì´ <code>wipFiber</code> ì´ë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;render&nbsp;í ëë&nbsp;scheduleUpdate&nbsp;í¸ì¶ë ë&nbsp;updateQueueì&nbsp;updateë¥¼&nbsp;ë£ê²&nbsp;ëëë°</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì´ë&nbsp;ì²ìì¼ë¡&nbsp;updateQueueì&nbsp;ìë&nbsp;update&nbsp;ë¥¼&nbsp;êº¼ë´ì¤ë&nbsp;í¨ì.</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;update&nbsp;ë¥¼&nbsp;êº¼ë´ìì&nbsp;nextUnitOfWork&nbsp;ì&nbsp;fiberë¥¼&nbsp;ë§ë¤ì´ì¤.</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>resetNextUnitOfWork</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>update</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>updateQueue</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>shift</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;render</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;from:&nbsp;HOST_ROOT,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;dom:&nbsp;containerDom,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;newProps:&nbsp;{&nbsp;children:&nbsp;elements&nbsp;},</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;scheduleUpdate</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;from:&nbsp;CLASS_COMPONENT,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;instance:&nbsp;instance,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;partialState:&nbsp;partialState,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator logical js"><span>!</span></span><span>update</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Copy&nbsp;the&nbsp;setState&nbsp;parameter&nbsp;from&nbsp;the&nbsp;update&nbsp;payload&nbsp;to&nbsp;the&nbsp;corresponding&nbsp;fiber</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì¬ê¸°ì&nbsp;instanceë&nbsp;componentì&nbsp;public&nbsp;instanceë¥¼&nbsp;ê°ë¦¬í´.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;partialState&nbsp;ì´ê²ì&nbsp;updateí &nbsp;ìë¡ì´&nbsp;ê°&nbsp;(setStateë¡&nbsp;ëì´ì¤ë&nbsp;ì¸ì)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>update</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>partialState</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>update</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>__fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>partialState</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>update</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>partialState</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ê·¸ë°&nbsp;ë¤ì&nbsp;old&nbsp;fiber&nbsp;treeì&nbsp;rootë¥¼&nbsp;ì°¾ìµëë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;_rootContainerFiber&nbsp;ì´ê²ì&nbsp;íë²&nbsp;ê·¸ë ¤ì¡ë&nbsp;dom&nbsp;ì´ë¼ë©´&nbsp;ì´ì &nbsp;fiberì´ë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>root</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>update</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>from</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant other js"><span>HOST_ROOT</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span class="variable other object js"><span>update</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>dom</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>_rootContainerFiber</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>getRoot</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>update</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>__fiber</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ìë¡ì´&nbsp;fiber</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ìë¡ì´&nbsp;work-in-progress&nbsp;treeì&nbsp;root</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;updateì&nbsp;domê°ì´&nbsp;ìì¼ë©´&nbsp;ì²ì&nbsp;render&nbsp;í¨ì&nbsp;í¸ì¶íëê±°</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;updateì&nbsp;newProps&nbsp;ê°ì´&nbsp;ìì¼ë©´&nbsp;ì²ì&nbsp;render&nbsp;í¨ì&nbsp;í¸ì¶íëê±°.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;nextUnitOfWork&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;tag</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant other js"><span>HOST_ROOT</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;stateNode</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>update</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>dom</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="variable other object js"><span>root</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>stateNode</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>update</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>newProps</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="variable other object js"><span>root</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;alternate</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;root</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>getRoot</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>fiber</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;node&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;fiber</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>while</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>node</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;node&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>node</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;node</span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p><code>resetNextUnitOfWork()</code>ë ëê¸°ì´ìì ì²« ë²ì§¸ ìë°ì´í¸ë¥¼ ê°ì ¸ ìì ììí©ëë¤.</p>
<p>update ê°ì²´ì <code>partialState</code>ê° ìë¤ë©´ ì»´í¬ëí¸ ì¸ì¤í´ì¤ì ìí´ìë fiber ì ê·¸ê²ì ì ì¥ ìì¼ ëìµëë¤. ê·¸ëì ëì¤ì ì»´í¬ëí¸ì <code>render()</code>ë¥¼ í¸ì¶ í  ë ì¬ì©í  ì ììµëë¤.</p>
<p>ê·¸ë° ë¤ì old fiber tree ì root ë¥¼ ì°¾ìµëë¤. ì²ì í¸ì¶ëë <code>render()</code>í¨ìë¡ update ê°ì²´ë¤ì´ ëì´ìì ê²½ì°ìë ë£¨í¸ fiber ê° ìì¼ë¯ë¡ <code>root</code>ê° <code>null</code>ì´ ë©ëë¤. <code>render()</code>ì ëí íì í¸ì¶ìì ì¤ë ê²½ì° DOM ë¸ëì <code>_rootContainerFiber</code> ìì±ìì ë£¨í¸ë¥¼ ì°¾ì ì ììµëë¤. ê·¸ë¦¬ê³  ìë°ì´í¸ê° <code>setState()</code>ìì ì¤ë ê²½ì°ìë, ë¶ëª¨ê°ìë fiber ê° ë°ê²¬ ë  ëê¹ì§ ì¸ì¤í´ì¤ fiber ìì ìë¡ ì´ëí´ì¼í©ëë¤.</p>
<p>ê·¸ë° ë¤ì <code>nextUnitOfWork</code>ì ì fiber ë¥¼ í ë¹í©ëë¤. <strong>ì´ fiber ë ìë¡ì´ work-in-progress tree ì root ìëë¤.</strong></p>
<p>ë§ì½ old root ê° ìë¤ë©´(ì´ë¯¸ ê·¸ë ¤ì§ DOM ì´ ìë¤ë©´), <code>stateNode</code>(component instance)ë <code>render()</code> í¸ì¶í ë ë§¤ê° ë³ìë¡ ë°ì DOM ë¸ë(containerDom)ìëë¤. <code>props</code> ë update ê°ì²´ì <code>newProps</code>ê°ë©ëë¤ : ì¬ê¸°ì <code>newProps</code>ë element(render() í¨ìì element ë§¤ê°ë³ì ê°)ë¤ì ê°ì§ê³ ìë children íë¡í¼í°ë¥¼ ê°ì§ ê°ì²´ì´ë¤(ì <code>render</code> í¨ì ì°¸ê³  : newProps: { children: elements }). <code>alternate</code>ì null ì´ ë  ê²ìëë¤. ìëíë©´ ì²ìì¼ë¡ í¸ì¶ëë <code>render</code> ì´ê¸° ëë¬¸ì ì´ì ì ê·¸ë ¸ë ë£¨í¸ fiber ê° ìë¤.</p>
<p>ë§ì½ old root ê° ìë¤ë©´ <code>stateNode</code>ë ì´ì  ë£¨í¸ì DOM ë¸ëê°ë©ëë¤. <code>props</code>ë ë¤ì newProps ê° null ì´ ìëë©´ <code>newProps</code>ë¡ í ë¹ëê³  ê·¸ë ì§ ìì¼ë©´ ì´ì  ë£¨í¸ìì <code>props</code> ë³µì¬í©ëë¤. <code>alternate</code>ë ì´ì  ë£¨í¸ fiber ê°ë©ëë¤.</p>
<p>ì´ì  ì°ë¦¬ë work-in-progress tree ì root ì ê°ì§ê³  ëë¨¸ì§ ë¶ë¶ì ë§ë¤ê¸° ììí©ìë¤.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/fiber06-a3d4baef4ba4a6182d4a51b4d1a88e17-108ba.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 21.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAbUlEQVQI142PSwrAIAxEvf8lXUkRQfAT4r8dEui2fYswTGaImvs3zNxaW2udc9QxULXWnDMRpZRUhBBgllKQnnOOMdDR2BJ673tvg5219hKcc5gxRhXee/RZQDoKaKKGAyiaz9eSoJch3i/AeQAd/uiNdYwOrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="fiber06.png"
        title=""
        src="/ho_blog/static/fiber06-a3d4baef4ba4a6182d4a51b4d1a88e17-fb8a0.png"
        srcset="/ho_blog/static/fiber06-a3d4baef4ba4a6182d4a51b4d1a88e17-1a291.png 148w,
/ho_blog/static/fiber06-a3d4baef4ba4a6182d4a51b4d1a88e17-2bc4a.png 295w,
/ho_blog/static/fiber06-a3d4baef4ba4a6182d4a51b4d1a88e17-fb8a0.png 590w,
/ho_blog/static/fiber06-a3d4baef4ba4a6182d4a51b4d1a88e17-108ba.png 700w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;wipFiber</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;{</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;tag:&nbsp;HOST_ROOT,</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;stateNode:&nbsp;update.dom&nbsp;||&nbsp;root.stateNode,</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;props:&nbsp;update.newProps&nbsp;||&nbsp;root.props,</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;alternate:&nbsp;root,</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>performUnitOfWork</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>wipFiber</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>beginWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>wipFiber</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>child</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>child</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;No&nbsp;child,&nbsp;we&nbsp;call&nbsp;completeWork&nbsp;until&nbsp;we&nbsp;find&nbsp;a&nbsp;sibling</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;uow&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;wipFiber</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>while</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>uow</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>completeWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>uow</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>uow</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Sibling&nbsp;needs&nbsp;to&nbsp;beginWork</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="variable other object js"><span>uow</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;uow&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>uow</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p><code>performUnitOfWork()</code>ë ì§íì¤ì¸ ìì í¸ë¦¬ë¥¼ íìí©ëë¤.</p>
<p><code>beginWork()</code>ë¥¼ í¸ì¶íë¤. âì´ê²ì ìë¡ì´ fiber ì children ì ë§ë¤ê¸° ìí ììì´ë¤.â ê·¸ë¦¬ê³  ëì ì²«ë²ì§¸ child ì ë¦¬í´íë¤. ê·¸ë¦¬ê³ ëì ê·¸ê²ì <code>nextUnitOfWork</code> ì ëìíë¤.</p>
<p>ë§ì½ ì´ë¤ child ë ìë¤ë©´, <code>completeWork()</code>ë¥¼ í¸ì¶íê³  <code>nextUnitOfWork</code>ê° ë  <code>sibling</code>ì ë¦¬í´íë¤.</p>
<p>ë§ì½ <code>sibling</code>ê° ìë¤ë©´, parents ë¡ ì¬ë¼ê°ì í´ë¹ parents ë¥¼ ì¸ìë¡ <code>completeWork()</code>ë¥¼ í¸ì¶íë¤. ì´ ììì <code>sibling</code>ì ì°¾ìë ëë root ì ëë¬íì ëê¹ì§ ë°ë³µíë¤.</p>
<p><code>performUnitOfWork()</code>ë¥¼ ì¬ë¬ ë² í¸ì¶íë©´ ìì(children)ì´ ìë íì´ë²ë¥¼ ì°¾ì ëê¹ì§ ê° íì´ë²ì ì²«ë²ì§¸ ììì ììë¤ì ìì±íë©´ì ê³ìí´ì í¸ë¦¬ì íìë¡ ë´ë ¤ê°ëë¤. ê·¸ë¦¬ê³  ì¤ë¥¸ìª½ì¼ë¡ ì®ê²¨ì siblings ìë ê°ì ììì ìíí©ëë¤. ê·¸ë¦¬ê³  ë¤ì ìë¡ ì¬ë¼ìì ê°ì ììì ìíí©ëë¤.</p>
<!-- ![fiber-search.png](./fiber-search.png)

ì ì²ë¼ í¸ë¦¬êµ¬ì¡°ê° ììë ììë ë¤ìê³¼ ê°ë¤.

íëì ììë `beginWork()` ê° í¸ì¶ëë ììì´ê³  ë¹¨ê°ì ììë `completeWork()` ê° í¸ì¶ëë ììì´ë¤. -->
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/fiber07-d71ef97e3317e6cc9c4d8ee5a383b830-108ba.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 21.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAlElEQVQI122Oyw6EIAxF/f9/NIagGQMmgggUfMyckc0spovm5rY9t91938dxnOdZSkFc1/X+V/g5ZxGpte77jsDscKdpGsdRaz3Ps7WWJSj1qV/cuq4pJQSdsO8xyUqpvu9BcG+MQQ/DAA7He8/etm2vpzgjFn9ZFtAdADYYt0HrzrkYY3uvSJacnfckAwohtBeKyAfr9OT+nGcDnwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="fiber07.png"
        title=""
        src="/ho_blog/static/fiber07-d71ef97e3317e6cc9c4d8ee5a383b830-fb8a0.png"
        srcset="/ho_blog/static/fiber07-d71ef97e3317e6cc9c4d8ee5a383b830-1a291.png 148w,
/ho_blog/static/fiber07-d71ef97e3317e6cc9c4d8ee5a383b830-2bc4a.png 295w,
/ho_blog/static/fiber07-d71ef97e3317e6cc9c4d8ee5a383b830-fb8a0.png 590w,
/ho_blog/static/fiber07-d71ef97e3317e6cc9c4d8ee5a383b830-108ba.png 700w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;wipFiber</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;{</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;tag:&nbsp;HOST_ROOT,</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;stateNode:&nbsp;update.dom&nbsp;||&nbsp;root.stateNode,</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;props:&nbsp;update.newProps&nbsp;||&nbsp;root.props,</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;alternate:&nbsp;root,</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>beginWork</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>wipFiber</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>tag</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant other js"><span>CLASS_COMPONENT</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>updateClassComponent</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>wipFiber</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>updateHostComponent</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>wipFiber</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>updateHostComponent</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>wipFiber</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator logical js"><span>!</span></span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>stateNode</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>stateNode</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>createDomElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>wipFiber</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newChildElements</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>props</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>children</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>reconcileChildrenArray</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>wipFiber</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;newChildElements</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>updateClassComponent</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>wipFiber</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;instance&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>stateNode</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>instance&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Call&nbsp;class&nbsp;constructor</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;instance&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>stateNode</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>createInstance</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>wipFiber</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>!</span></span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>partialState</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;No&nbsp;need&nbsp;to&nbsp;render,&nbsp;clone&nbsp;children&nbsp;from&nbsp;last&nbsp;time</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>cloneChildFibers</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>wipFiber</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>Object</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>assign</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>instance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>partialState</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>partialState</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newChildElements</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>stateNode</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>render</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>reconcileChildrenArray</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>wipFiber</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;newChildElements</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p><code>beginWork()</code>ë ëê°ì§ë¥¼ í©ëë¤:</p>
<ul>
<li><code>stateNode</code>ë¥¼ ê°ì§ê³  ìì§ ìë¤ë©´ ìì±í´ì¤ëë¤.</li>
<li>component children (fiber.props.children) ì ê°ì ¸ì <code>reconcileChildrenArray()</code>ì ê·¸ê²ë¤ì ëê²¨ì¤ë¤.</li>
</ul>
<p>ëê°ì§ íìì component ë¥¼ ì°ë¦¬ê° ë¤ë£¨ê¸° ëë¬¸ì ì°ë¦¬ë 2 ê°ì§ë¡ ëë ì¼ íë¤. <code>updateHostComponent()</code> ì <code>updateClassComponent()</code> ì´ë¤.</p>
<p><code>updateHostComponent()</code>ë host component ë¤ê³¼ root component ë¥¼ ë¤ë£¬ë¤. ê·¸ê²ì íìíë¤ë©´ ìë¡ì´ DOM ì ë§ë¤ì´ë´ê³  <strong>fiber props ìì ëì¨ child element ë¤ì ì´ì©í´ì <code>reconcileChildrenArray()</code>ë¥¼ í¸ì¶íë¤.</strong></p>
<p><code>updateClassComponent()</code>ë class component instance ë¤ì ë¤ë£¬ë¤. ê·¸ê²ì íìíë¤ë©´ component ì ìì±ìë¥¼ í¸ì¶í´ì instance ë¥¼ ë§ë¤ì´ë¸ë¤. <strong>instance ì props ì state ë¥¼ ìë°ì´í¸ë¥¼ íê³  <code>render()</code>ë¥¼ í¸ì¶í´ì ìë¡ì´ children ì ì»ëë¤.</strong></p>
<p><code>updateClassComponent()</code> ëí <code>render()</code>ë¥¼ í¸ì¶íëê²ì´ ë§ëì§ íì¸í©ëë¤. ì´ê²ì <code>shouldComponentUpdate()</code>ì ê°ë¨í ë²ì ì´ë¤. ë§ì½ re-render í  íìê° ìì´ ë³´ì¸ë¤ë©´, ì´ë í reconciliation ìì´ íì¬ sub-tree ë¥¼ work-in-progress í¸ë¦¬ë¡ ë³µì¬í©ëë¤.</p>
<p>ì´ì  <code>newChildElements</code>ë¥¼ ê°ì§ê³ ìê³ , work-in-grogress fiber ë¥¼ ìí child fiber ë¤ì ë§ë¤ ì¤ë¹ê° ëììµëë¤.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/fiber08-f3e48d0a3449fc30707b57a88b80fe12-108ba.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 21.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAcklEQVQI142O2Q5DIQhE/f9vrXEBFAVt52r62vQkknFYw/s/9t7MbGbQrTVVhQhwc84ppXyIMZZSXodr3lIi6r27+5xTRGBCP816QE6/QCP9RBG8OQYx44vN6MQgRDcLP29dS8kkLR86xt1ca8VpGLzdP1qG6VNDcdjaAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="fiber08.png"
        title=""
        src="/ho_blog/static/fiber08-f3e48d0a3449fc30707b57a88b80fe12-fb8a0.png"
        srcset="/ho_blog/static/fiber08-f3e48d0a3449fc30707b57a88b80fe12-1a291.png 148w,
/ho_blog/static/fiber08-f3e48d0a3449fc30707b57a88b80fe12-2bc4a.png 295w,
/ho_blog/static/fiber08-f3e48d0a3449fc30707b57a88b80fe12-fb8a0.png 590w,
/ho_blog/static/fiber08-f3e48d0a3449fc30707b57a88b80fe12-108ba.png 700w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>ì´ê²ì´ ì´ library ì ì¬ì¥ìëë¤. work-in-progress í¸ë¦¬ê° ì»¤ì§ë©° ì»¤ë° ë¨ê³ìì DOM ì ëí´ ì´ë¤ ë³ê²½ ììì ìíí ì§ ê²°ì í©ëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Effect&nbsp;tags</span></span></span></div><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>PLACEMENT</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span></span></div><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>DELETION</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>2</span></span></span></div><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>UPDATE</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>3</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>arrify</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>val</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;val&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span>&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span><span>&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="support class js"><span>Array</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>isArray</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>val</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span>val</span><span>&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span>val</span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>reconcileChildrenArray</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>wipFiber</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>newChildElements</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>elements</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>arrify</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>newChildElements</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;index&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;oldFiber&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>alternate</span></span><span>&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>alternate</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>child</span></span><span>&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;newFiber&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ìë¡­ê²&nbsp;ë¤ì´ì¨&nbsp;element&nbsp;ëë&nbsp;oldFiberê°&nbsp;ììëê¹ì§&nbsp;ë°ë³µ</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>while</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>index&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>&nbsp;</span><span class="variable other object js"><span>elements</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property js"><span>length</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;oldFiber&nbsp;</span><span class="keyword operator comparison js"><span>!=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>prevFiber</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;newFiber</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>element</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;index&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>&nbsp;</span><span class="variable other object js"><span>elements</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property js"><span>length</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;elements</span><span class="meta brace square js"><span>[</span></span><span>index</span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>sameType</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;oldFiber&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;element&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>sameType</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newFiber&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tag</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>tag</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stateNode</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>stateNode</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;wipFiber</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alternate</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;oldFiber</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;partialState</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>partialState</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;effectTag</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant other js"><span>UPDATE</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>element&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>!</span></span><span>sameType</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newFiber&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tag</span><span class="keyword operator assignment js"><span>:</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator typeof js"><span>typeof</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>string</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span class="constant other js"><span>HOST_COMPONENT</span></span><span>&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="constant other js"><span>CLASS_COMPONENT</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>element</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;wipFiber</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;effectTag</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant other js"><span>PLACEMENT</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>oldFiber&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>!</span></span><span>sameType</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>oldFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>effectTag</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant other js"><span>DELETION</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>effects</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>effects</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>effects</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>push</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>oldFiber</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>oldFiber</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oldFiber&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Fiber&nbsp;ì°ê²°</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>index&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>wipFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>child</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;newFiber</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>prevFiber&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;element</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>prevFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;newFiber</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;index</span><span class="keyword operator increment js"><span>++</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>ììíê¸° ì ì <code>newChildElements</code>ê° ë°°ì´ì¸ì§ íì¸íì­ìì¤. (ì´ì ì reconciliation ìê³ ë¦¬ì¦ê³¼ ë¬ë¦¬ <code>reconcileChildrenArray</code>ë í­ì ìì ë°°ì´ê³¼ í¨ê» ìëí©ëë¤. ì¦, ì´ì  component ì <code>render()</code> í¨ììì ë°°ì´ì ë°í í  ì ììµëë¤.)</p>
<p>ê·¸ íì old fiber tree ì children ë¤ì ìë¡ì´ element ì ë¹êµíê¸° ììí©ëë¤. (fiber ì element ë¥¼ ë¹êµíë ê²ì´ë¤.) old fiber tree ì children ë¤ì <code>wipFiber.alternate</code> ì children ì´ë¤. ìë¡ì´ element ë¤ì <code>wipFiber.props.children</code> ìì ì»ì´ ì¤ê±°ë ëë <code>wipFiber.stateNode.render()</code> í¸ì¶í´ì ì»ì´ì¨ ê²ìëë¤.</p>
<p>reconciliation ìê³ ë¦¬ì¦ì ì²«ë²ì§¸ old fiber(<code>wipFiber.alternate.child</code>)ì ì²«ë²ì§¸ child element(<code>element[0]</code>) ë¥¼ ì¼ì¹ ìí¤ê³ , ëë²ì§¸ old fiber(<code>wipFiber.alternate.child.sibling</code>) ëë²ì§¸ child element(<code>element[1]</code>)ë ë°ë³µí©ëë¤. ê°ê° oldFiber-element ìì ì´ë£¨ê² í©ëë¤.</p>
<ul>
<li>
<p>ë§ì½ oldFiber ì element ê° íìì´ ê°ë¤ë©´, ì´ê²ì ì¢ì ìììëë¤, ì´ê²ì ê¸°ì¡´ì stateNode ë¥¼ ì ì§í ì ìë¤ë ë»ì´ë¤. ì°ë¦¬ë new fiber ë¥¼ ìì ê±° ê¸°ë°ìì ìì±í©ëë¤. <code>UPDATE</code>ë¥¼ <code>effectTag</code>ì ì¶ê°ìí¨ë¤. ê·¸ë¦¬ê³  ìë¡ì´ fiber ë¥¼ work-in-progress tree ì ë§ë¶ìëë¤.</p>
</li>
<li>
<p>ë§ì½ element ì type ì´ oldFiber ì ë¤ë¥´ê±°ë oldFiber ê° ìë¤ë©´(ìëíë©´ ê¸°ì¡´ ììë¤ë³´ë¤ ìë¡ì´ ììë¤ì ë§ì´ ê°ì§ê³  ìë ê²½ì°), ì°ë¦¬ê° ê°ì§ê³  ìë element ì ë³´ë¥¼ ê°ì§ê³  ìë¡ì´ fiber ë¥¼ ìì±í©ëë¤. ì´ ìë¡ì´ fiber ë <code>alternate</code> ì <code>stateNode</code>ë¥¼ ê°ì§ê³  ìì§ ìëë¤. (<code>stateNode</code>ë <code>beginWork()</code>ìì ìì±ë©ëë¤.) ì´ fiber ì <code>effectTag</code> ë <code>PLACEMENT</code> ìëë¤.</p>
</li>
<li>
<p>ë§ì½ oldFiber ì element ê° ë¤ë¥¸ type ì´ê±°ë ì´ oldFiber ë¥¼ ìí ì´ë í element ë ìë ê²½ì°(ìëíë©´ ê¸°ì¡´ ììë¤ì´ ìë¡ì´ ììë¤ ë³´ë¤ ë§ì´ ê°ì§ê³  ìê¸° ëë¬¸) oldFiber ë DELETION íê·¸ë¥¼ ë¶ìëë¤. ì´ fiber ë ìì ì¤(work-in-progress) í¸ë¦¬ì ì¼ë¶ê° ìëê¸° ëë¬¸ì, ê·¸ê²ì ì¶ì í  ì ìê²ë wipFiber.effets ëª©ë¡ì ì¶ê°í´ì¼ í©ëë¤.</p>
</li>
</ul>
<blockquote>
<p>ë¦¬ì¡í¸ìë ë¬ë¦¬ ì¬ì¡°ì ì ìí´ keys ë¥¼ ì¬ì©íì§ ìì¼ë¯ë¡, ì´ì  ìì¹ìì ë²ì´ë ììì´ ìëì§ ì ì ììµëë¤.</p>
</blockquote>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/fiber09-ac8503ac4e5f378f55ab8d7bfe6dfbd8-108ba.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 21.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAfklEQVQI142O2woDIQxE/f/vlAq6FhZvWRNtT7fvpQMJk2RmiHv9h713rVVV4b13EYE4qrXG4bxRSsk501Gw3zeQIhhjrLXmnHBOZuaYj+Pw3ocQYowpJcgDhMDedOq8LhFy8WAgiFyCTNX9/HXZOGd9LpVSPq99zTjVbJu9ASun6Jpvt5FhAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="fiber09.png"
        title=""
        src="/ho_blog/static/fiber09-ac8503ac4e5f378f55ab8d7bfe6dfbd8-fb8a0.png"
        srcset="/ho_blog/static/fiber09-ac8503ac4e5f378f55ab8d7bfe6dfbd8-1a291.png 148w,
/ho_blog/static/fiber09-ac8503ac4e5f378f55ab8d7bfe6dfbd8-2bc4a.png 295w,
/ho_blog/static/fiber09-ac8503ac4e5f378f55ab8d7bfe6dfbd8-fb8a0.png 590w,
/ho_blog/static/fiber09-ac8503ac4e5f378f55ab8d7bfe6dfbd8-108ba.png 700w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p><code>updateClassComponent()</code> ë ì¬ì¡°ì ì íë ëì  ì§ë¦ê¸¸ë¡ old fiber íì í¸ë¦¬ë¥¼ work-in-progress í¸ë¦¬ë¡ ë³µì íë í¹ë³í ê²½ì°ê° ììµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>cloneChildFibers</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>parentFiber</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>oldFiber</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>parentFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>alternate</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator logical js"><span>!</span></span><span class="variable other object js"><span>oldFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>child</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;oldChild&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>child</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;prevChild&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>while</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>oldChild</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newChild</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldChild</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tag</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldChild</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>tag</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stateNode</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldChild</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>stateNode</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldChild</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;partialState</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldChild</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>partialState</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alternate</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;oldChild</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;parentFiber</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>prevChild</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>prevChild</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;newChild</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>parentFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>child</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;newChild</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;prevChild&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;newChild</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;oldChild&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>oldChild</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p><code>cloneChildFibers()</code> ë ê° <code>wipFiber.alternate</code> ììë¤(children)ì ë³µì íê³  work-in-progress í¸ë¦¬ì ì¶ê°í©ëë¤. ìë¬´ê²ë ë³ê²½íì§ ììë ëë¯ë¡ ì´ë í <code>effectTag</code> ë ì¶ê°í  íìê° ììµëë¤.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/fiber10-46742e113ecd9b82b1fbfb962b49a675-108ba.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 21.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAeklEQVQI131OMQ7EIAzj/29kQwLEgg4IgQa4uiB1rIfIcmLH6v+JtVatlZlFBKSUIhtEhKlwATWllHPGLsaICWXOecyttd77GIM3XvExgznntNbee2utMSaEgAjs3s8wg/w2TiOIMob6KIx41EFDvIX/VANfzFeMk+gGTJ7pA4j0X2oAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="fiber10.png"
        title=""
        src="/ho_blog/static/fiber10-46742e113ecd9b82b1fbfb962b49a675-fb8a0.png"
        srcset="/ho_blog/static/fiber10-46742e113ecd9b82b1fbfb962b49a675-1a291.png 148w,
/ho_blog/static/fiber10-46742e113ecd9b82b1fbfb962b49a675-2bc4a.png 295w,
/ho_blog/static/fiber10-46742e113ecd9b82b1fbfb962b49a675-fb8a0.png 590w,
/ho_blog/static/fiber10-46742e113ecd9b82b1fbfb962b49a675-108ba.png 700w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p><code>performUnitOfWork()</code> ìì wipFiber ê° ìë¡ì´ ììë¤(children)ì ê°ì§ê³  ìì§ ìê±°ë ì´ë¯¸ ëª¨ë  ììë¤ì´ ì´ë¯¸ ììì ìë£ íì ë, <code>completeWork()</code>ë¥¼ í¸ì¶í©ëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>completeWork</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>fiber</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>tag</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant other js"><span>CLASS_COMPONENT</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>stateNode</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>__fiber</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;fiber</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>childEffects</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>effects</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>thisEffect</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>effectTag</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>!=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span>&nbsp;</span><span class="keyword operator ternary js"><span>?</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span>fiber</span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator ternary js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>parentEffects</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>effects</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>||</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>effects</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>parentEffects</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>concat</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>childEffects</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;thisEffect</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;pendingCommit&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;fiber</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p><code>completeWork()</code>ë ë¨¼ì  í´ëì¤ ì»´í¬ëí¸ì ì¸ì¤í´ì¤ì ê´ë ¨ë fiber ì ëí ì°¸ì¡°ë¥¼ ìë°ì´í¸í©ëë¤. (ìì§í ë§í´ì, ì¬ê¸° ìì íìë ìì§ë§ ì´ëê°ì ìì´ì¼ í©ëë¤.)</p>
<p>ê·¸ë° ë¤ì <code>effects</code> ëª©ë¡ì ìì±í©ëë¤. ì´ ëª©ë¡ìë effectTag ê° ìë work-in-progress ìë¸ í¸ë¦¬ì ëª¨ë  fiber ë¤ì´ í¬í¨ë©ëë¤. (DELETION effectTag ë¥¼ ê°ì§ ì´ì  íì í¸ë¦¬ì íì´ë²ë í¬í¨). ì´ ìì´ëì´ë effectTag ê° ìë ëª¨ë  fiber ë¥¼ root <code>effects</code> ëª©ë¡ì ëì íë ê²ìëë¤.</p>
<p>ìì  fiber ì ììë¤ effect, ë´ effect, ë¶ëª¨ fiber effect ë¥¼ íë° ëª¨ìì ë´ ë¶ëª¨ fiber ì effect ë¡ ëª¨ìì¤ë¤.</p>
<p>ë§ì§ë§ì¼ë¡ fiber ì ë¶ëª¨(<code>parent</code>)ê° ìë¤ë©´, work-in-progress í¸ë¦¬ì ë£¨í¸ì ìì¹ í´ ìëê² ìëë¤. ë°ë¼ì ì°ë¦¬ë ìë°ì´í¸ì ëí ëª¨ë  ììì ìë£íê³  ëª¨ë  effects ë¥¼ ìì§íìµëë¤. <code>workLoop()</code>ì´ <code>commitAllWork()</code>ë¥¼ í¸ì¶ í  ì ìëë¡ <code>pendingCommit</code> ì root ë¥¼ ëìí©ëë¤.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/fiber11-648b738f5f4d8d0d37a11a67bf1bcd76-108ba.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 21.428571428571427%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAkklEQVQI122OSw6EMAxDuf8REQuKqESL6AKmX2iYN1TsxovIcWQ73f1CRO5/OM+zlFJr9d4fxwFhTSlBOjxa62EYlmWZ5xmulLLW7vveEtOD67qYwfsqQphzjrUjeF3XcRz7vp+miRSmMYZbaw4hxBjpaQQF/+Yc/b9mUonglnMuL9AxoGDgCieOFV1y/mwbn3wBKM3m+MI+f7YAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="fiber11.png"
        title=""
        src="/ho_blog/static/fiber11-648b738f5f4d8d0d37a11a67bf1bcd76-fb8a0.png"
        srcset="/ho_blog/static/fiber11-648b738f5f4d8d0d37a11a67bf1bcd76-1a291.png 148w,
/ho_blog/static/fiber11-648b738f5f4d8d0d37a11a67bf1bcd76-2bc4a.png 295w,
/ho_blog/static/fiber11-648b738f5f4d8d0d37a11a67bf1bcd76-fb8a0.png 590w,
/ho_blog/static/fiber11-648b738f5f4d8d0d37a11a67bf1bcd76-108ba.png 700w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>ì´ì  ë§ì§ë§ì¼ë¡ ë¨ìê±´ DOM ì ë³ê²½íë ê²ìëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>commitAllWork</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>fiber</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>effects</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>f</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>commitWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>f</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>stateNode</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>_rootContainerFiber</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;fiber</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;nextUnitOfWork&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;pendingCommit&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>commitWork</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>fiber</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>tag</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant other js"><span>HOST_ROOT</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;domParentFiber&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>while</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>domParentFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>tag</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant other js"><span>CLASS_COMPONENT</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;domParentFiber&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>domParentFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>domParent</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>domParentFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>stateNode</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>effectTag</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant other js"><span>PLACEMENT</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>tag</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant other js"><span>HOST_COMPONENT</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>domParent</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>appendChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>stateNode</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>effectTag</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant other js"><span>UPDATE</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>updateDomProperties</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>stateNode</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>alternate</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>props</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>fiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>effectTag</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant other js"><span>DELETION</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>commitDeletion</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>fiber</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;domParent</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>commitDeletion</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>fiber</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>domParent</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;node&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;fiber</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>while</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>node</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>tag</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;</span><span class="constant other js"><span>CLASS_COMPONENT</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>node</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>child</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>continue</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>domParent</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>removeChild</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>node</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>stateNode</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>while</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>node&nbsp;</span><span class="keyword operator comparison js"><span>!=</span></span><span>&nbsp;fiber&nbsp;</span><span class="keyword operator logical js"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="keyword operator logical js"><span>!</span></span><span class="variable other object js"><span>node</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;node&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>node</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>node&nbsp;</span><span class="keyword operator comparison js"><span>==</span></span><span>&nbsp;fiber</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;node&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>node</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p><code>commitAllWork()</code> ë¨¼ì  ê°ê°ì ëª¨ë  ë£¨í¸ <code>effects</code> ë¥¼ ìííì¬ <code>commitWork()</code> ë°ë³µí´ì í¸ì¶í©ëë¤. <code>commitWork()</code>ë ê° fiber ì <code>effectTag</code> ë¥¼ ê²ì¬í©ëë¤.</p>
<ul>
<li>
<p><code>PLACEMENT</code> ì¸ ê²½ì° ì°ë¦¬ë ë¶ëª¨ DOM ë¸ëë¥¼ ì°¾ì ë¤ì ë¨ìí fiber ì stateNode ë¥¼ ì¶ê°í©ëë¤.</p>
</li>
<li>
<p><code>UPDATE</code> ì¸ ê²½ì° stateNode ë¥¼ ì´ì  props ë° ì props ì í¨ê» ì ë¬íê³  <code>updateDomProperties()</code>ê° ìë°ì´í¸ í  í­ëª©ì ê²°ì íëë¡ í©ëë¤.</p>
</li>
<li>
<p><code>DELETION</code> ì´ê³  fiber ê° í¸ì¤í¸ ì»´í¬ëí¸ì¸ ê²½ì° ê°ë¨í©ëë¤. ê·¸ì  <code>removeChild()</code>ë¥¼ í¸ì¶íë©´ ë©ëë¤. ê·¸ë¬ë fiber ê° í´ëì¤ ì»´í¬ëí¸ì¸ ê²½ì° <code>removeChild()</code>ë¥¼ í¸ì¶íê¸° ì ì fiber íì í¸ë¦¬ìì ëª¨ë  í¸ì¤í¸ ì»´í¬ëí¸ë¥¼ ì°¾ìì ì ê±°í´ì¼ í©ëë¤.</p>
</li>
</ul>
<p>ëª¨ë  effects ê° ëëë©´ <code>nextUnitOfWork</code> ë° <code>pendingCommit</code> ì ì´ê¸°í í  ì ììµëë¤. work-in-progress í¸ë¦¬ë ììì¤ì¸ í¸ë¦¬ê° ìë ì´ì  í¸ë¦¬ê° ëë¯ë¡ ë£¨í¸ë¥¼ _rootContainerFiber ì í ë¹í©ëë¤. ì´ì  ì°ë¦¬ë íì¬ì ìë°ì´í¸ê° ëëê³  ë¤ì ìë°ì´í¸ë¥¼ ììí  ì¤ë¹ê° ëììµëë¤.</p>
<h3>fiber ì ë¦¬</h3>
<p>fiber root ë¥¼ ê°ì§ê³  ì²ìì <code>beginWork(rootFiber)</code> ë¥¼ ììíë¤.</p>
<p>ì¬ê¸°ì <code>beginWork()</code> íë¤ë ê²ì <code>stateNode</code> ìì±í´ì£¼ê³  ììë¤ì <code>reconcileChildrenArray()</code> ì¤íí´ì¤ë¤.
ê·¸ë¬ë©´ <code>reconcileChildrenArray()</code> ì´ íë ì¼ì ì¬ë¬ëªì ììì¤ì ì²«ë²ì§¸ ììì
rootFiber.child ì childFiber01 ë¡ ë£ê³  ëë¨¸ì§ë ì´ì  ììíë childFiber01 ì sibling ì¼ë¡ childFiber02 ë¥¼ ë£ëë¤.</p>
<p>ìë¥¼ ë¤ë©´ ìë ì ê°ì êµ¬ì¡°ë¥¼ êµ¬ì±íë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="variable other object js"><span>rootFiber</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>child</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;childFiber01</span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>childFiber01</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;rootFiber</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>childFiber01</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;childFiber02</span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>childFiber02</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;rootFiber</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>childFiber02</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;childFiber03</span></span></div></pre>
<p>ê·¸ëì <code>beginWork()</code> ì´ ììì íµí´ì í ë¶ëª¨ fiber ì ìì fiber ë¤ì ìì±í´ì£¼ë ì­í ì í©ëë¤. ì´ ì­í ì´ ëëê³  ëì fiber.child ê° ë°ê²¬ ëë©´ ë¤ì <code>beginWork()</code> ë¥¼ ìííë¤. ëê¹ì§ child ê° ëì¤ì§ ìëë¤ë©´ ê·¸ëë¶í´ fiber ë¥¼ <code>complateWork()</code>ë¥¼ ì¤íí©ëë¤. ì¤íëì¤ fiber.sibling ê° ë°ê²¬ëë©´ ë¤ì <code>beginWork()</code>ë¥¼ ìííê² ëì´ child fiber ë¥¼ ë§ë¤ê² ë©ëë¤.</p>
<p>ê·¸ëì ê²°ë¡ ì ì¼ë¡ë <code>performUnitOfWork()</code>ì ë°ë³µ ìíì¼ë¡ ì ì²´ fiber í¸ë¦¬ êµ¬ì¡°ë¥¼ ì¡ìì¤ë¤.</p>
<p>ì ë¦¬íë©´ í¸ë¦¬ êµ¬ì¡°ì ì¼ìª½ ë§¨ ìëìª½ì¼ë¡ ë´ë ¤ê°ë©´ì fiber ë¥¼ ë§ë¤ê² ë©ëë¤. ì´ë, ëì´ìì child ë¥¼ ë§ëì§ ìì¼ë©´ <code>complateWork()</code> ë¥¼ ì¤ííê³  ë¶ëª¨ë¡ ì¬ë¼ê° <code>complateWork()</code> ë¥¼ ì¤íí©ëë¤. ì´ë, í´ë¹ fiber ìì sibling ë¤ì ë§ëê² ëë©´ í´ë¹ sibling ì ë¦¬í´í´ì ë¤ì <code>beginWork()</code> ììì íê² ëê³  child ê° ììë ë¤ì <code>complateWork()</code>ë¥¼ ì¤íí´ì¤ëë¤. ì´ ììì ë°ë³µí´ì ì¤íí©ëë¤.</p>
<p><code>complateWork()</code> ì´ íë ì¼ì í´ë¹ fiber ì ë¶ëª¨ê° ì¡´ì¬íì§ íì¸í íì ìì (fiber)ì ììë¤ effect ì ìì ì effect ë¥¼ ë§ë¤ê³  ë¶ëª¨ê° ê°ì§ effect ë¥¼ concat(í©ì³ì) ë¶ëª¨ fiber ì effect ë¡ ëê²¨ì¤ëë¤.
ì´ë ê² íë©´ ìµì¢ì ì¼ë¡ root fiber ì effect ìë ë°°ì´ë¡ ê° fiber ì ì ë³´ê° ìì§ëê² ë©ëë¤.</p>
<p>ë§ì§ë§ì¼ë¡ë <code>commitAllWork()</code> í¨ìê° root fiber ì effect ë¦¬ì¤í¸ë¤ì ëë©´ì <code>commitWork()</code>ë¥¼ ìíí©ëë¤.
<code>commitWork()</code> ììë <code>effectTag</code>ë¥¼ ë³´ë©´ì ì ì í DOM ë³ì´ë¥¼ ì²ë¦¬ í©ëë¤.</p>
<p>ìµì¢ì ì¼ë¡  fiber tree êµ¬ì¡°ë¥¼ ë§ë¤ë©´ì ìíë¥¼ í©ëë¤. ì´ë, ê° íìí DOM ë³ì´ë¥¼ ìµì¢ root fiber ì effects ë°°ì´ë¡ ì ë¬í´ì¤ë¤. ì´ ììì ì¬ê· ìì´ ë¶í ììì¼ë¡ ì²ë¦¬ë¥¼ íë¤.
ê·¸ë ê² í´ì ìì±ë root fiber effects ë¥¼ ê°ì§ê³  ì¤ì  DOM ë³ì´ë¥¼ ì¼ì¼í¨ë¤. ì´ ììì ëëì§ ìê³  íë²ì ììíëë¡ íë¤.</p>
<h2>ìµì¢ ì ë¦¬</h2>
<p>fiber ìê³ ë¦¬ì¦ì´ ì ì© ëê¸° ì ê¹ì§ë dom ì ì¬ì¬ì©ì±ì ìí <code>instance</code>ë¼ë ê°ëì ëì (<code>{dom, element, childInstances}</code>) íë¤. ì¬ê¸°ì <code>instance</code>ë dom ì ê·¸ë ¤ì§ <code>element</code>ë¥¼ ëíëëë¤.
render ëë setState ì ì ë°ëëë <code>reconcile</code> ë¼ë âdiffâ ìê³ ë¦¬ì¦ì ì¬ì©í©ëë¤. ì¬ê¸°ì <code>reconcile</code> í¨ìë ì´ë¯¸ ê·¸ë ¤ì§ <code>instance</code> ì ìë¡­ê² ê·¸ë ¤ì§ element ë¥¼ ë¹êµíë¤. ì´ë° ë¹êµë¥¼ íµí´ì dom ì ìë°ì´í¸ í ì§ ìë¡ ì¶ê°í ì§, êµì²´í ì§ë¥¼ ì íë¤. dom ì ìë¡ ì¶ê° ëë type ì´ ë¬ë¼ì replace ì²ë¦¬ íê² ë  ë ìë¡ element ë°ìì <code>instance</code>ë¥¼ ë§ë ë¤ìì append or replace ë¥¼ ë¨ííë¤. ë°ëë¡ type ì´ ê°ë¤ë©´ dom property ë¥¼ update ì²ë¦¬ íê³  <code>reconcileChildren</code> í¨ìë¥¼ íµí´ì ììë¤ì reconcile ì ì§ííë¤.</p>
<p>ì¬ê¸°ì ì¤ìí ë¬¸ì ë íë² <strong>reconcile ì´ ì´ë¤ì§ë©´ ëì§ ìê³  íë©´ì rendering ê¹ì§ ì§ííë¤ë ì ì´ë¤.</strong> ì¬ê¸°ì ì¬ê·ì ì¼ë¡ í¨ìë¤ì´ í¸ì¶ ëê¸° ëë¬¸ì ëëì± ì¤ê°ì ëì ì ìê³  ê³ì ì§íí´ì¼ íë¤ë ì ì´ë¤. ê·¸ëì ì´ ììì´ ì¤ë ê±¸ë ¤ì ë¨ì¼ ì°ë ëë¥¼ ì ë ¹íê³  ìì¼ë©´ ë¤ë¥¸ ìì(ex. css animation ê°ì ìì)ì´ ë©ì¶ ì ìë¤.</p>
<p>ì´ ë¬¸ì ë¥¼ í´ê²°íê³ ì fiber ìê³ ë¦¬ì¦ì ì ì©íë¤.</p>
<p>ê¸°ì¡´ì instance ë¥¼ ëì²´íë fiber êµ¬ì¡°ë¥¼ ì¬ì©íë¤. <strong>fiber ìê³ ë¦¬ì¦ìì  ì´ì  ì¬ê·ì ì¼ë¡ ì¤ííë reconcile ì iteration êµ¬ì¡°ë¡ ë°ê¿¨ë¤ê³  ë³´ë©´ ëë¤.</strong> ê·¸ëì ì¬ê· êµ¬ë¬¸ì´ ìì ë¿ëë¬ while êµ¬ë¬¸ì´ ë§ì´ ë³´ì¸ë¤. ê·¸ëì <code>requestIdleCallback</code>ì ì´ì©í´ì ë¶í ììì ì§íí  ì ìê³  ë¤ìììì ëí´ì <code>nextUnitOfWork</code>ë¥¼ ì ì­ì¼ë¡ ë³´ê´íê³  ìë¤. ì²ìì¼ë¡ <code>requestIdleCallback(performWork)</code>ë¥¼ ìíí´ì <code>workLoop(deadline)</code>ë¥¼ ìííë¤.
<code>workLoop(deadline)</code>ììë ë¸ë¼ì°ì  idle íìì ë³´ê³  ê³ì <code>performUnitOfWork(nextUnitOfWork)</code>ë¥¼ ìííë¤. ê·¸ë¬ë¤ê° ìê°ì´ ë¶ì¡±íê² ëë¤ë©´ ë¤ì ì´ì´ì í´ì¼í  ììì <code>nextUnitOfWork</code>ì ë´ìëê³  <code>workLoop(deadline)</code> ë¥¼ ë¹ ì ¸ëì¨ë¤. ê·¸ë¦¬ê³  ëì ë¤ì ììì´ ë¨ìë¤ë©´ ë¤ì <code>requestIdleCallback(performWork)</code>ì ìíí´ì ë¸ë¼ì°ì  ëê¸°ì´ì ë£ì´ ë¡ëë¤. ê·¸ë¦¬ê³  ìê°ì´ ëë©´ ë¤ì ìíí©ëë¤.</p>
<p><code>workLoop()</code>ììë <code>resetNextUnitOfWork()</code>ë¥¼ ì²ìì ìíí´ì root ì fiber ë¥¼ ë§ë¤ê³  <code>performUnitOfWork(nextUnitOfWork)</code>ë¥¼ ìííë¤.
<code>performUnitOfWork(nextUnitOfWork)</code> ììë fiber ë¥¼ ë°ìì <code>beginWork()</code> ì <code>completeWork()</code> ë¥¼ ìííë¤.</p>
<p><code>beginWork()</code> ë fiber ë¥¼ ë°ìì fiber ì stateNode íë¡í¼í°ì ê°ì ìíí´ì£¼ê³  í´ë¹ fiber ì children ë¤ì fiber ë¡ ë§ë¤ì´ì¤ë¤. ( 1 ë¨ í¸ë¦¬ë§ êµ¬ì± ) ê·¸ë¦¬ê³  ëì <code>performUnitOfWork(nextUnitOfWork)</code> ìì  fiber ì child ê° ì¡´ì¬íë©´ ë¦¬í´ìì¼ì ë¤ì ìì(<code>nextUnitOfWork</code>)ì´ child ë¥¼ root ë¡ ì§íí´ì¼íë¤ëê±¸ ìë¦°ë¤.
ì´ë° ìíì child ê° ììë ê¹ì§ ì§íëë©° <code>beginWork()</code>ì ì¤íìì¼ì fiber í¸ë¦¬ ì¼ë¶ë¥¼ êµ¬ì±íë¤.
ëì´ìì child ê° ìë¤ë©´ ê·¸ëë¶í´ <code>completeWork()</code>ë¥¼ ìííë¤.
<code>completeWork()</code>ë Effect ë¤ì ëª¨ìì ë¶ëª¨ë¡ ëê²¨ì£¼ë ììì íë¤. ëª¨ì¼ë ëìì ìì ì effect ì children ì effect ë¥¼ ëª¨ìë¤.
ê·¸ë° ë¤ì sibling ì´ ìëì§ íì¸íëë° ìë¤ë©´ ë¤ì ë¦¬í´í´ì ë¤ì ìì(<code>nextUnitOfWork</code>)ì´ë¼ëê±¸ ìë¦°ë¤. ì´ë ë¤ì <code>beginWork()</code>ë¥¼ ìíí´ì sibling ì children ë¤ì fiber ë¡ ë§ë¤ì´ì¤ë¤.</p>
<p>ì ììì´ ë³µì¡íì§ë§ ê°ë¨í ìê°í´ë³´ë©´ root ì root ì children ë¤ì í ìì ë¨ìë¡ beginWork()ë¡ fiber ë¥¼ ë§ë ë¤.
ë¤ì ììë ê·¸ root ì child (ë³´íµ ì²«ë²ì§¸ child ì´ë¤.)ë¥¼ ìë¡ì´ root ë¡ ì¼ê³  children ì fiber ë¥¼ ë§ë ë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span>root&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;rootFiber</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>root</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>child</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;childFiber01</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>childFiber01</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;root</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>childFiber01</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;childFiber02</span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>childFiber02</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;root</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>childFiber02</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;childFiber03</span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>childFiber03</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>parent</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;root</span></span></div></pre>
<p>ìì ê°ì êµ¬ì¡°ê° ëê² ë¤.
child ê° ìë êµ¬ì¡°ê¹ì§ ëë¬íë©´ ë§ì§ë§ fiber ì Effect ì ê·¸ì ììë¤ì´ ëª¨ì¸ effects ë¥¼ ë¶ëª¨ìê² ì ë¬íë¤.
ê·¸ë¦¬ê³  ëì sibling ì´ ìë¤ë©´ ë¤ì ììì sibling ì¼ë¡ ëê¸´ë¤. sibling ì¼ë¡ ê°ì ë¤ì child ë¥¼ íìíê³  Effect ë¥¼ ëª¨ì¼ê³  íë ììë¤ì ë°ë³µí´ì ì§ííë¤.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/react-fiber-0ee8beae9cf23025a56054a7edd53fb3-fade4.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 74.5138178096213%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACVElEQVQ4y31Uy47TMBQNnwMrQCD+iD0bfgIJISEWIMRjwcySFR8wM5XayaZVp2l5TFJEVbVpHo0d5/04XDtN25kWLF3ZvrKPzzn3JhqOjLquVchR0VxUtKf1er3GaDSCYRgYj8eYTCawLEuFzAVBAA3/GdUGtNkU+HltwiCgEV0eDAYwTRPD4RD9fl89NJ1OjwNKdi2Yvizw9CzB1UKArxbgxHL7RlWhLMutIrnXjoHJkZfN/PzMg/bsO95croCMw53NkAiB+h+qtGNg6sVmhd9OiE9XEVZBDKSxymd5jiRJkKbpDc9laE1il6w2YDKY7wOCA9xBXRZgto0yEmjvZFmmgPdBtf2K7qhWyqvCJZnkUWgvUAaNd9xxUDk25Qu1z4hlToxb0K1kHoYE4kPkNViUogh8rImhoLztMlVlxjgYATuOh7Rq7mVZfgioGBIrFgo8+rLE/RMHPM5kHfFKd3DntY2TEclHgXUY48mpjYenLpyAE8Nka5kqyn6LBMTgwYcp7r0z8We+VLmXnTm0FxY+6zO19wjk8UcLd99e05nFwYegNewkqOospCQ34lTNLEFC/pQihOeF2wrLcnGfwbNddb5uK3QgeXM4Z+TbYo4siRGSf8GmGAX5JKuaUuQkU1p0u912DAlImuz7AWySwewVXC+AiBMC5YjiBlxQQ0dRpCKkNWNMfSn7oFrr39mixjcrwVczw6Vd4r0R44eb4NfEwPn5BTqdDrrdrgpd19Hr9VROsr4BuP9XSakFQhEpWXKWQzJzqPckGxnyjyLnlultyX8BXp94cuVcJOcAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="react-fiber ëìí"
        title=""
        src="/ho_blog/static/react-fiber-0ee8beae9cf23025a56054a7edd53fb3-fb8a0.png"
        srcset="/ho_blog/static/react-fiber-0ee8beae9cf23025a56054a7edd53fb3-1a291.png 148w,
/ho_blog/static/react-fiber-0ee8beae9cf23025a56054a7edd53fb3-2bc4a.png 295w,
/ho_blog/static/react-fiber-0ee8beae9cf23025a56054a7edd53fb3-fb8a0.png 590w,
/ho_blog/static/react-fiber-0ee8beae9cf23025a56054a7edd53fb3-526de.png 885w,
/ho_blog/static/react-fiber-0ee8beae9cf23025a56054a7edd53fb3-fa2eb.png 1180w,
/ho_blog/static/react-fiber-0ee8beae9cf23025a56054a7edd53fb3-08f6a.png 1770w,
/ho_blog/static/react-fiber-0ee8beae9cf23025a56054a7edd53fb3-fade4.png 1954w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>ì¬ê· ë°©ìì´ ìë iterator ìì ë°©ìì´ê¸° ëë¬¸ì ì´ë ê² Effect ë¥¼ ëª¨ì¼ë ììì ë¶í í´ì ììí  ì ìë¤.
ê·¸ íì root ì ëª¨ì¸ Effect ë¥¼ <code>commitAllWork()</code> ë¥¼ ìíí´ì íë²ì íë©´ì rendering ì ì§ííë¤.</p></div><hr style="margin-bottom:1.53rem;" data-reactid="9"/><div style="display:flex;margin-bottom:3.825rem;" data-reactid="10"><img src="/ho_blog/static/img_profile.1f79e005.jpeg" alt="Merlin.ho" style="margin-right:0.765rem;margin-bottom:0;width:3.06rem;height:3.06rem;" data-reactid="11"/><p data-reactid="12"><!-- react-text: 13 -->Written by <!-- /react-text --><strong data-reactid="14">Merlin.ho</strong><!-- react-text: 15 --> who lives and works in Pangyo building useful things.<!-- /react-text --><!-- react-text: 16 --> <!-- /react-text --></p></div></div><span style="display:block;clear:both;" data-reactid="17"> </span></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-ae3b9848c8b3fc2dcc4d.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-dabe65ee189101b630a0.js","35783957827783":"component---src-pages-index-js-4a72a400e6141dde0d21.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","217151528944653":"path---hello-o-auth-1ded8c89a6d0d6d8d0ee.js","140444808481594":"path---docker-depolyment-4012246536442f60159d.js","111898030062913":"path---call-stack-ae217c5d96088f3ccd78.js","163032634796574":"path---hello-algorithms-list-fd39aea15c0ec94ce7be.js","147969846384348":"path---hello-algorithms-hashing-02933d32acf848127c4f.js","89772980507866":"path---hello-algorithms-stack-0abc28df3af0037195ca.js","149621425204082":"path---hello-algorithms-queue-64adb1793536d1ddeeb8.js","67469829867878":"path---hello-monad-59e45b33826bee6342ec.js","1317899640025":"path---hello-iscroll-4e02dc8e6aa9db654538.js","163121481561693":"path---hello-web-server-50ce4db03e3201a76414.js","275591574691347":"path---lazy-evaluation-b06a6cf4962e0032b9fb.js","209797577918347":"path---react-history-5dd054ef9e7aaf9d7ec7.js","94227092638417":"path---react-vega-67e71fee2d1c9877968d.js","240236403038750":"path---maintainable-javascript-event-handling-08483da9a7c1874195de.js","117876939722535":"path---hello-algorithms-linked-list-9187a097e2f39cf94c3a.js","77514080955212":"path---context-hooks-82208e856ce64b7e841a.js","105843449635648":"path---experience-monorepo-481c39ada3235001112a.js","211646524460608":"path---hello-enzyme-20c1ec114c4f8773af3a.js","60702703624353":"path---hello-react-e0cd56e5890daca606f6.js","106302953868833":"path---hello-rebass-622e91016a0655e8f674.js","174342234436027":"path---hello-middleware-214cfa12d70783762915.js","205017683208400":"path---hello-rollup-d49dff44499f23bc1e78.js","73704410068446":"path---javascript-object-a5446c0327b623ee17b9.js","51191554927023":"path---javascript-basic-1-9a67a2cd34c9412b299b.js","203204203537797":"path---react-hook-8e62e2129fd00f7574c6.js","163591510377563":"path---maintainable-javascript-no-null-comparison-cd4e4ae619857122decb.js","159351755249863":"path---preact-configuration-7312d027ac4d63ce2e99.js","78697077285144":"path---maintainable-javascript-user-error-throwing-2f9594d962f6c72f1e44.js","219926873231408":"path---refactoring-complex-refactoring-3bde085886c272fceff0.js","134001216553636":"path---react-rxjs-b0ef8fe47f9edf7e3044.js","5023129853458":"path---value-and-reference-6083800bc1607839d93d.js","122409595676540":"path---think-high-order-function-58f7199816abbe8ab707.js","34924551833901":"path---typescript-react-1a9173d47ec4aaf50a34.js","159031325512892":"path---why-set-state-async-de06158212c6347a9a36.js","59645336058927":"path---hello-flow-f37b9fb2cac1b9d9b179.js","90837107504198":"path---hello-oop-8753bd908c30244d5ee3.js","77823104784020":"path---hello-react-react-873ebfd40ad351c8d653.js","75445273333793":"path---react-fiber-react-fiber-01-de4b57b558db4cda0d1b.js","24443999554804":"path---javascript-prototype-dd176c5979078c57a58c.js","257369935370228":"path---refactoring-moving-between-object-9e40449234c2cb6b787d.js","79996153856445":"path---refactoring-method-cleanup-46236c286e9dee8da3fa.js","116326978988766":"path---session-login-1be51b38899fff93cf0e.js","142221992286439":"path---ui-unit-testing-a749535a7628a8651417.js","246346007348531":"path---tail-recursion-112d6f6c158ce2ab06a7.js","88166365168691":"path---try-catch-8e0ec6acd7f1cfd8bb47.js","52706571150518":"path---web-cookie-5d75c370f01d6b3eff24.js","177359372373161":"path---webpack-config-d646c3ec578c78b12b66.js","121991548295207":"path---virual-dom-overhead-598236fff14ec4f9f446.js","55049869895717":"path---hello-docker-05e42a31d1677fb4a2e0.js","160582500480188":"path---hello-webpack-b0122eda8ae66d76c639.js","122211975447119":"path---hello-webpack-webpack-understanding-64a65d688b58382b4d6f.js","231909470762625":"path---refactoring-concise-conditionals-d2ab514478d45d06c674.js","58827738984857":"path---refactoring-organization-data-1-3cae99d84479a08a4086.js","23603272521549":"path---make-promise-a063af11a6c501af3225.js","71473981912016":"path---javascript-pattern-648c1f680f29c9828e5a.js","43779473796627":"path---react-fiber-react-fiber-03-65967f924f216a27d0a9.js","45440482069588":"path---react-hook-hood-hook-75a9cdff94a7a74ac6a2.js","147139475262338":"path---react-fiber-react-fiber-02-92e24b4eb81ef95103c4.js","239272989053013":"path---refactoring-generalization-processing-e71d2e5e4b0e785fd2f5.js","122362222700994":"path---refactoring-5ee2d02ba04bdb575764.js","201965495218339":"path---refactoring-organization-data-2-6725e1fa3585396087cf.js","234343465206083":"path---sop-and-cors-dns-rebinding-f325bb81ba5f24a4bde9.js","262138261438389":"path---hello-rxjs-439f76b4038286bfeb7c.js","120945912393580":"path---refactoring-simplifying-method-calls-294a8dadb4d3828fd246.js","74801690423126":"path---hello-d-3-b6735c76aea8c3a438ff.js","84418080753772":"path---hello-d-3-geo-bc20dd312d935abda640.js","184966363590167":"path---hello-testing-9cafd47c9b843bbcdede.js","134631639062865":"path---build-react-f434a341563ef68309f3.js","132591256042226":"path---hello-mobx-7602d6ccf9c082056119.js","142629428675168":"path---index-439d16f0ab42c47742ba.js","114276838955818":"component---src-layouts-index-js-14ce98a91c2ea25f4173.js"}/*]]>*/</script><script>
            
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto');
      }
      </script><script>/*<![CDATA[*/["/ho_blog/commons-241c3561f1c9cf4619a9.js","/ho_blog/app-ae3b9848c8b3fc2dcc4d.js","/ho_blog/path---build-react-f434a341563ef68309f3.js","/ho_blog/component---src-templates-blog-post-js-dabe65ee189101b630a0.js","/ho_blog/component---src-layouts-index-js-14ce98a91c2ea25f4173.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>