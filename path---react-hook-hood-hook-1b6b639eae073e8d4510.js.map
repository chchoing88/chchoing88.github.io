{"version":3,"sources":["webpack:///path---react-hook-hood-hook-1b6b639eae073e8d4510.js","webpack:///./.cache/json/react-hook-hood-hook.json"],"names":["webpackJsonp","493","module","exports","data","site","siteMetadata","title","author","markdownRemark","id","html","frontmatter","date","pathContext","slug"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,MAAQC,cAAgBC,MAAA,kBAAAC,OAAA,cAAgDC,gBAAmBC,GAAA,gIAAAC,KAAA;AAA01gHC,aAAuHL,MAAA,sCAAAM,KAAA,mBAAuEC,aAAgBC,KAAA","file":"path---react-hook-hood-hook-1b6b639eae073e8d4510.js","sourcesContent":["webpackJsonp([45440482069588],{\n\n/***/ 493:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"title\":\"Merlin Tec Blog\",\"author\":\"merlin.ho\"}},\"markdownRemark\":{\"id\":\"/Users/merlin.ho/Documents/workspace/ho_blog/gatsby-blog/src/pages/react-hook/hood-hook.md absPath of file >>> MarkdownRemark\",\"html\":\"<p><a href=\\\"https://medium.com/the-guild/under-the-hood-of-reacts-hooks-system-eb59638c9dba\\\">이글</a>을 번역 및 분석 한 글입니다. 잘못된 번역이 있을 수 있습니다. 또한 예전 코드들이 많으므로 참고만 해야 합니다. 현재 코드랑 다른점이 많이 있습니다.</p>\\n<h1>Under the hood of React’s hooks system</h1>\\n<p>우리는 모두 그것에 대해 들었습니다. React 16.7 의 새로운 훅 시스템은 커뮤니티에서 많은 이야기가 나옵니다. 우리는 모두 그것을 시도하고 그것을 테스트하고, 그리고 그것의 잠재력에 대해 정말로 흥분했습니다. 후크에 대해 생각할 때 그것들은 다소 마술적입니다. 어떻게 든 React 는 인스턴스를 노출하지 않고도이 구성 요소를 관리합니다 (<code>this</code> 키워드를 사용하지 않아도 됨). 그래서 도대체 어떻게 React 가 그렇게합니까?</p>\\n<p>오늘 나는 React 의 후크 구현에 대해 더 자세히 이해할 수 있기를 바랍니다. 마법 같은 기능의 문제점은 복잡한 스택 추적으로 뒷받침되기 때문에 문제가 발생하면 문제를 디버그하는 것이 더 어렵다는 것입니다. 따라서, React 의 새로운 후크 시스템에 대한 깊은 지식을 갖게되면 문제가 발생하면 이를 신속하게 해결할 수 있을 것입니다.</p>\\n<blockquote>\\n<p>시작하기 전에 저는 제가 React 의 개발자 / 유지자가 아니며 제 말을 아주 작은 알갱이로 가야한다고 말하고 싶습니다. 나는 React ‘s hooks 시스템의 구현에 깊이 깊이 잠긴했지만, 꼭 이것이 React 가 실제로 어떻게 작동 하는지를 보장 할 수는 없습니다. 필자는 필자의 말을 React 의 소스 코드에서 증명과 참조로 뒷받침했으며 가능한 한 견고하게 주장하려고 노력했습니다.</p>\\n</blockquote>\\n<p><img src=\\\"https://miro.medium.com/max/684/1*R-oovJm4IQBLDjZy6DvbBg.png\\\" alt=\\\"https://miro.medium.com/max/684/1*R-oovJm4IQBLDjZy6DvbBg.png\\\"></p>\\n<p>우선, React 의 범위 내에서 후크가 호출 되도록하는 메커니즘을 살펴 보겠습니다. 오른쪽 컨텍스트에서 호출되지 않으면 후크가 의미가 없다는 것을 알 수 있기 때문입니다.</p>\\n<h2>The dispatcher</h2>\\n<p>디스패처는 후크 기능을 포함하는 공유 객체입니다. ReactDOM 의 렌더링 단계를 기반으로 동적으로 할당되거나 정리되며 사용자가 React 구성 요소 외부의 후크에 액세스하지 못하게합니다. (see <a href=\\\"https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberDispatcher.js?source=post_page---------------------------#L24\\\">implementation</a>).</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;ReactFiberDispatcher.js</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span class=\\\"keyword control js\\\"><span>import</span></span><span>&nbsp;</span><span class=\\\"punctuation definition modules begin js\\\"><span>{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useCallback</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useContext</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useEffect</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useImperativeMethods</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useLayoutEffect</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useMemo</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useMutationEffect</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useReducer</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useRef</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useState</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span class=\\\"punctuation definition modules end js\\\"><span>}</span></span><span>&nbsp;</span><span class=\\\"keyword control js\\\"><span>from</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>./ReactFiberHooks</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta export js\\\"><span class=\\\"keyword control js\\\"><span>export</span></span><span>&nbsp;</span></span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>Dispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;readContext</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useCallback</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useContext</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useEffect</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useImperativeMethods</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useLayoutEffect</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useMemo</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useMutationEffect</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useReducer</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useRef</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useState</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div></pre>\\n<p>후크는 올바른 디스패처로 간단하게 전환하여 루트 구성 요소를 렌더링하기 전에 <code>enableHooks</code> 플래그에 의해 활성화 / 비활성화됩니다. 이는 기술적으로 런타임에 후크를 활성화 / 비활성화 할 수 있음을 의미합니다. React 16.6.X 에는 실험 기능이 구현되어 있지만 실제로는 사용할 수 없습니다. (see <a href=\\\"https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberScheduler.js?source=post_page---------------------------#L1211\\\">implementation</a>).</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;1211줄&nbsp;ReactFiberScheduler.js</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"keyword control js\\\"><span>if</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span>enableHooks</span><span class=\\\"meta brace round js\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other object js\\\"><span>ReactCurrentOwner</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>currentDispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;Dispatcher</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span><span>&nbsp;</span><span class=\\\"keyword control js\\\"><span>else</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other object js\\\"><span>ReactCurrentOwner</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>currentDispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;DispatcherWithoutHooks</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div></pre>\\n<p>렌더링 작업이 끝나면 디스패처를 무효화하여 ReactDOM 렌더링주기 밖에서 후크가 실수로 사용되는 것을 방지합니다. 이것은 사용자가 어리석은 일을하지 않도록 보장하는 메커니즘입니다. (see <a href=\\\"https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberScheduler.js?source=post_page---------------------------#L1376\\\">implementation</a>).</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;1376줄&nbsp;ReactFiberScheduler.js</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;We&#39;re&nbsp;done&nbsp;performing&nbsp;work.&nbsp;Time&nbsp;to&nbsp;clean&nbsp;up.</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"variable other object js\\\"><span>ReactCurrentOwner</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>currentDispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span></span></div></pre>\\n<p>디스패처는 <code>resolveDispatcher()</code> 함수를 사용하여 각각의 모든 후크 호출에서 해결됩니다. 앞에서 말했듯이, React 의 렌더링주기 밖에서는 의미가 없어야하고, React 는 경고 메시지를 출력해야합니다 : <em>“후크는 함수 구성 요소의 본체 내부에서만 호출 할 수 있습니다”</em> (see <a href=\\\"https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react/src/ReactHooks.js?source=post_page---------------------------#L17\\\">implementation</a>).</p>\\n<p>Dispatcher 실행을 간단하게 표현하면 아래와 같다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type var js\\\"><span>let</span></span><span>&nbsp;currentDispatcher</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>dispatcherWithoutHooks</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment block js\\\"><span class=\\\"punctuation definition comment js\\\"><span>/*</span></span><span>&nbsp;...&nbsp;</span><span class=\\\"punctuation definition comment js\\\"><span>*/</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>dispatcherWithHooks</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment block js\\\"><span class=\\\"punctuation definition comment js\\\"><span>/*</span></span><span>&nbsp;...&nbsp;</span><span class=\\\"punctuation definition comment js\\\"><span>*/</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>resolveDispatcher</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>if</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span>currentDispatcher</span><span class=\\\"meta brace round js\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;currentDispatcher</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>throw</span></span><span>&nbsp;</span><span class=\\\"support class js\\\"><span>Error</span></span><span class=\\\"meta brace round js\\\"><span>(</span></span><span class=\\\"string quoted double js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&quot;</span></span><span>Hooks&nbsp;can&#39;t&nbsp;be&nbsp;called</span><span class=\\\"punctuation definition string end js\\\"><span>&quot;</span></span></span><span class=\\\"meta brace round js\\\"><span>)</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>useXXX</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"keyword operator spread js\\\"><span>...</span></span><span class=\\\"variable parameter rest function js\\\"><span>args</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>dispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>resolveDispatcher</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>dispatcher</span></span><span class=\\\"meta method-call js\\\"><span class=\\\"meta delimiter method period js\\\"><span>.</span></span><span class=\\\"entity name function js\\\"><span>useXXX</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"keyword operator spread js\\\"><span>...</span></span><span>args</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>renderRoot</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;currentDispatcher&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;enableHooks&nbsp;</span><span class=\\\"keyword operator ternary js\\\"><span>?</span></span><span>&nbsp;</span><span>dispatcherWithHooks</span><span>&nbsp;</span><span class=\\\"keyword operator ternary js\\\"><span>:</span></span><span>&nbsp;dispatcherWithoutHooks</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>performWork</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;currentDispatcher&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<p>실제 React github 코드 상에선 아래와 같이 표현하고 있다. (예전 코드)</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;16줄&nbsp;ReactFiberScheduler.js</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>resolveDispatcher</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>dispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>ReactCurrentOwner</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>currentDispatcher</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>invariant</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;dispatcher&nbsp;</span><span class=\\\"keyword operator comparison js\\\"><span>!==</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>Hooks&nbsp;can&nbsp;only&nbsp;be&nbsp;called&nbsp;inside&nbsp;the&nbsp;body&nbsp;of&nbsp;a&nbsp;function&nbsp;component.</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;dispatcher</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;54줄&nbsp;ReactFiberScheduler.js</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta export js\\\"><span class=\\\"keyword control js\\\"><span>export</span></span><span>&nbsp;</span></span><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;useState&lt;S&gt;</span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"variable parameter function js\\\"><span>initialState</span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>S</span></span><span class=\\\"meta brace round js\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"keyword operator bitwise js\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>S</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>dispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>resolveDispatcher</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>dispatcher</span></span><span class=\\\"meta method-call js\\\"><span class=\\\"meta delimiter method period js\\\"><span>.</span></span><span class=\\\"entity name function js\\\"><span>useState</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span>initialState</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<p>이제는 간단한 캡슐화 메커니즘을 살펴 보았으므로 이 기사의 핵심 인 후크로 넘어 가고자 한다. 여기서 나는 새로운 개념을 소개하고자 합니다.</p>\\n<h2>The hooks queue</h2>\\n<p>후크는 호출 순서로 함께 연결된 노드로 표시됩니다. 후크가 단순히 만들어지지 않고 남겨지기 때문에 그들은 그렇게 표현됩니다. 그들은 그들이 존재하는 것을 가능하게하는 메커니즘을 가지고 있습니다. 후크(hook)에는 구현에 뛰어 들기 전에 마음에 새겨야 할 필요한 몇 가지 프로퍼티들 있습니다.</p>\\n<ul>\\n<li>초기 상태값은 초기 렌더링에서 생성됩니다.</li>\\n<li>상태를 즉시 업데이트 할 수 있습니다.</li>\\n<li>React 는 다음번 렌더링에서 hook 의 상태를 기억할 것입니다.</li>\\n<li>React 는 호출 순서에 따라 올바른 상태를 제공합니다.</li>\\n<li>React 는 이 hook 이 어떤 fiber 에 속하는지 알 수 있습니다.</li>\\n</ul>\\n<p>따라서 component 의 상태를 보는 방식을 다시 생각 해야합니다. 지금까지 우리는 마치 평범한 object 인 것처럼 그것에 대해 생각해 왔습니다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;React&nbsp;state&nbsp;-&nbsp;the&nbsp;old&nbsp;way</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;foo</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>foo</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;bar</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>bar</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;baz</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>baz</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div></pre>\\n<p>그러나 후크를 처리 할 때 각 노드가 하나의 상태 모델을 나타내는 큐로 간주 되어야합니다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;React&nbsp;state&nbsp;-&nbsp;the&nbsp;new&nbsp;way</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;memoizedState</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>foo</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;next</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;memoizedState</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>bar</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;next</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memoizedState</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>baz</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;이것은&nbsp;흡사&nbsp;배열과&nbsp;비슷할&nbsp;수&nbsp;있을거&nbsp;같다.</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;[&#39;foo&#39;,&nbsp;&#39;bar&#39;,&nbsp;&#39;baz&#39;]&nbsp;iterator</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;[&#39;foo&#39;,&nbsp;&#39;bar&#39;,&nbsp;&#39;baz&#39;][Symbol.iterator]()</span></span></span></div></pre>\\n<p>단일 훅 노드의 스키마는 <a href=\\\"https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js?source=post_page---------------------------#L243\\\">implementation</a>.에서 볼 수 있습니다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;ReactFiberHooks.js</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>createHook</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>:&nbsp;Hook&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;memoizedState</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;baseState</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;queue</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;baseUpdate</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;next</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<p>훅에는 몇 가지 추가 속성이 있지만 훅의 작동 방식을 이해하는 열쇠는<code>memoizedState</code> 와 <code>next</code> 내에 있습니다. 나머지 프로퍼티들은 <code>useReducer()</code> 훅에 의해 특별히 사용되어 <code>디스패치 된 액션</code>과 <code>기본 상태들(base states)</code>를 캐싱하므로 다양한 경우 fallback 처럼 이런 감소 프로세스가 반복 될 수 있습니다 :</p>\\n<ul>\\n<li><code>baseState</code> - reducer 에 주어질 상태 객체.</li>\\n<li><code>baseUpdate</code> -<code>baseState</code>를 생성 한 가장 최근의 dispatch 된 액션입니다.</li>\\n<li><code>queue</code> - dispatch 된 액션의 대기열(queue), reducer 를 통해 처리되길 기다리는 액션들이다.</li>\\n</ul>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;</span><span class=\\\"markup underline link https hyperlink\\\"><span>https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js?source=post_page---------------------------#L367</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"keyword control js\\\"><span>do</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;Process&nbsp;this&nbsp;render&nbsp;phase&nbsp;update.&nbsp;We&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;the</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;priority&nbsp;because&nbsp;it&nbsp;will&nbsp;always&nbsp;be&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;current</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;render&#39;s.</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>action</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>update</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"support variable property dom js\\\"><span>action</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;newState&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>reducer</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span>newState</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;action</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;update&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>update</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"support variable property dom js\\\"><span>next</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span><span>&nbsp;</span><span class=\\\"keyword control js\\\"><span>while</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span>update&nbsp;</span><span class=\\\"keyword operator comparison js\\\"><span>!==</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta brace round js\\\"><span>)</span></span></span></div></pre>\\n<blockquote>\\n<p>여기서 reducer 는 action 과 payload state 를 받아서 새로운 state 를 반환하는 순수함수라 할 수 있겠다. baseUpdate 는 액션이라고 보면 될것이다.</p>\\n</blockquote>\\n<p>불행하게도 저는 거의 모든 경우를 재현 할 수 없었기 때문에 reducer hook 을 잘 이해할 수 없었습니다. 그래서 정교하게 느껴지지 않을 것입니다. 나는 단지 reducer 구현이 너무 일관성이 없기 때문에 <a href=\\\"https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js?source=post_page---------------------------#L380\\\">implementation</a> 에서 구현 자체의 주석 중 하나가 “(이것이) 원하는 의미론이 맞는지 확실치 않다(TODO: Not sure if this is the desired semantics, but it’s what we do for gDSFP. I can’t remember why.)” 라고 말합니다. 그래서 어떻게 확신해야합니까?!</p>\\n<p>따라서 각각의 모든 컴포넌트 호출 이전에 후크로 돌아가서, <a href=\\\"https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js#L123\\\"><code>prepareHooks()</code></a>라는 이름의 함수가 호출됩니다. current fiber 와 hooks 큐(대기열) 안에 있는 그것의 첫 번째 후크 노드는 전역 변수에 저장됩니다. 이런 방식으로, 우리가 후크 함수 (<code>useXXX ()</code>)를 호출 할 때마다 어떤 컨텍스트에서 실행되는지를 알 수 있습니다.</p>\\n<blockquote>\\n<p>prepareHooks() 이 함수가 보이지 않는다. prepareToUseHooks() 이 함수인거 같다.</p>\\n</blockquote>\\n<p>다음은 Hooks 대기열이 실행되는 간단한 코드 형식이다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>Update</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>A</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>expirationTime</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>ExpirationTime</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>action</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>A</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>next</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Update</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>A</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>UpdateQueue</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>A</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>last</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Update</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>A</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>dispatch</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>any</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>Hook</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>memoizedState</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>any</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>baseState</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>any</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>baseUpdate</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Update</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"support type primitive ts\\\"><span>any</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>queue</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>UpdateQueue</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"support type primitive ts\\\"><span>any</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>next</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Hook</span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;The&nbsp;work-in-progress&nbsp;fiber.&nbsp;I&#39;ve&nbsp;named&nbsp;it&nbsp;differently&nbsp;to&nbsp;distinguish&nbsp;it&nbsp;from</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;the&nbsp;work-in-progress&nbsp;hook.</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>let</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>currentlyRenderingFiber</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Fiber</span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span><span>&nbsp;</span></span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;Hooks&nbsp;are&nbsp;stored&nbsp;as&nbsp;a&nbsp;linked&nbsp;list&nbsp;on&nbsp;the&nbsp;fiber&#39;s&nbsp;memoizedState&nbsp;field.&nbsp;The</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;current&nbsp;hook&nbsp;list&nbsp;is&nbsp;the&nbsp;list&nbsp;that&nbsp;belongs&nbsp;to&nbsp;the&nbsp;current&nbsp;fiber.&nbsp;The</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;work-in-progress&nbsp;hook&nbsp;list&nbsp;is&nbsp;a&nbsp;new&nbsp;list&nbsp;that&nbsp;will&nbsp;be&nbsp;added&nbsp;to&nbsp;the</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;work-in-progress&nbsp;fiber.</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>let</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>workInProgressHook</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Hook</span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span><span>&nbsp;</span></span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>let</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>currentHook</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Hook</span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span><span>&nbsp;</span></span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;Source:&nbsp;</span><span class=\\\"markup underline link https hyperlink\\\"><span>https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js#L123</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;2.&nbsp;전역에&nbsp;셋팅</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>prepareHooks</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"variable parameter ts\\\"><span>recentFiber</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Fiber</span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span></span><span class=\\\"punctuation separator parameter ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>workInProgressFiber</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Fiber</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentlyRenderingFiber</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>workInProgressFiber</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;현재&nbsp;작업중인&nbsp;Fiber</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentHook</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object ts\\\"><span>recentFiber</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>memoizedState</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;이미&nbsp;render된&nbsp;Fiber의&nbsp;memoizedState를&nbsp;currentHook에&nbsp;할당.</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;Source:&nbsp;</span><span class=\\\"markup underline link https hyperlink\\\"><span>https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/react-reconciler/src/ReactFiberHooks.js:148</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>finishHooks</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other object ts\\\"><span>currentlyRenderingFiber</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>memoizedState</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>workInProgressHook</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentlyRenderingFiber</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>workInProgressHook</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentHook</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;Source:&nbsp;</span><span class=\\\"markup underline link https hyperlink\\\"><span>https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js#L332</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>resolveCurrentlyRenderingFiber</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control conditional ts\\\"><span>if</span></span><span>&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>currentlyRenderingFiber</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentlyRenderingFiber</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control trycatch ts\\\"><span>throw</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"support class error ts\\\"><span>Error</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>Hooks&nbsp;can&#39;t&nbsp;be&nbsp;called</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;Source:&nbsp;</span><span class=\\\"markup underline link https hyperlink\\\"><span>https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js#L267</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>createWorkInProgressHook</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>workInProgressHook</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentHook</span></span><span>&nbsp;</span><span class=\\\"keyword operator ternary ts\\\"><span>?</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>cloneHook</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>currentHook</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"keyword operator ternary ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>createNewHook</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentHook</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object ts\\\"><span>currentHook</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"support variable property dom ts\\\"><span>next</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>workInProgressHook</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;4.&nbsp;컴포넌트&nbsp;안에서&nbsp;호출되는&nbsp;useXXX&nbsp;함수.</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>useXXX</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>fiber</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>resolveCurrentlyRenderingFiber</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span><span>)</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;update&nbsp;될&nbsp;fiber&nbsp;리턴.</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>hook</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>createWorkInProgressHook</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span><span>)</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>현재&nbsp;렌더링된&nbsp;fiber의&nbsp;memoizedState</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;...</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>updateFunctionComponent</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>recentFiber</span></span><span class=\\\"punctuation separator parameter ts\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>workInProgressFiber</span></span><span class=\\\"punctuation separator parameter ts\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>Component</span></span><span class=\\\"punctuation separator parameter ts\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>props</span></span><span>&nbsp;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>prepareHooks</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>recentFiber</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>workInProgressFiber</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;1.&nbsp;훅&nbsp;준비</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>Component</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>props</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;3.&nbsp;컴포넌트&nbsp;호출</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>finishHooks</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span><span>)</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;5.&nbsp;Hooks&nbsp;마무리</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div></pre>\\n<p>업데이트가 완료되면, <a href=\\\"https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/react-reconciler/src/ReactFiberHooks.js:148?source=post_page---------------------------\\\"><code>finishHooks()</code></a> 이 호출 될 것입니다. 여기서 후크 대기열의 첫 번째 노드에 대한 참조가 <code>memoizedState</code> 속성의 렌더링 된 fiber 에 저장됩니다. 즉, 후크 대기열과 그 상태를 외부 적으로 처리 할 수 ​​ 있습니다.</p>\\n<p>컴퍼넌트의 메모 상태의 외부 읽기.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>ChildComponent</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useState</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>foo</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useState</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>bar</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useState</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>baz</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>ParentComponent</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>childFiberRef</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useRef</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useEffect</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"storage type var js\\\"><span>let</span></span><span>&nbsp;hookNode&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>childFiberRef</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"support variable property dom js\\\"><span>current</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>memoizedState</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>assert</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"variable other object js\\\"><span>hookNode</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>memoizedState</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>foo</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;hookNode&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>hooksNode</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"support variable property dom js\\\"><span>next</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>assert</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"variable other object js\\\"><span>hookNode</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>memoizedState</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>bar</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;hookNode&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>hooksNode</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"support variable property dom js\\\"><span>next</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>assert</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"variable other object js\\\"><span>hookNode</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>memoizedState</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>baz</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"keyword operator comparison js\\\"><span>&lt;</span></span><span>ChildComponent&nbsp;ref</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span class=\\\"meta brace curly js\\\"><span>{</span></span><span>childFiberRef</span><span class=\\\"meta brace curly js\\\"><span>}</span></span><span>&nbsp;</span><span class=\\\"keyword operator js\\\"><span>/</span></span><span class=\\\"keyword operator comparison js\\\"><span>&gt;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<p>가장 일반적인 것부터 시작하여 개별적인 고리에 대해 더 구체적으로 이야기 해 봅시다.</p>\\n<h2>State hooks</h2>\\n<p>놀랍지만 <code>useState</code> 훅 뒤에선 <code>useReducer</code> 를 사용하고 단순히 미리 정의 된 reducer 핸들러를 제공합니다 (see <a href=\\\"https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js?source=post_page---------------------------#L339\\\">implementation</a>). 즉, <code>useState</code> 에 의해 리턴 된 결과는 실제로 reducer 상태(state)와 action 디스패처(dispatcher)입니다. 상태 후크가 사용하는 reducer 핸들러를 살펴 보시기 바랍니다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>basicStateReducer</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"variable parameter function js\\\"><span>state</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable parameter function js\\\"><span>action</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"keyword operator typeof js\\\"><span>typeof</span></span><span>&nbsp;action&nbsp;</span><span class=\\\"keyword operator comparison js\\\"><span>===</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>function</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator ternary js\\\"><span>?</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>action</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span>state</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"keyword operator ternary js\\\"><span>:</span></span><span>&nbsp;action</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta export js\\\"><span class=\\\"keyword control js\\\"><span>export</span></span><span>&nbsp;</span></span><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;useState&lt;S&gt;</span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"meta parameters js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter function js\\\"><span>initialState</span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>S</span></span><span class=\\\"meta brace round js\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"keyword operator bitwise js\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>S</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>:&nbsp;[S,&nbsp;Dispatch&lt;BasicStateAction&lt;S&gt;&gt;]&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useReducer</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;basicStateReducer</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;useReducer&nbsp;has&nbsp;a&nbsp;special&nbsp;case&nbsp;to&nbsp;support&nbsp;lazy&nbsp;useState&nbsp;initializers</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span>initialState</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;any</span><span class=\\\"meta brace round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;return&nbsp;[state,&nbsp;dispatchState]</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;dispatchState(value)&nbsp;=&gt;&nbsp;basicStateReducer&nbsp;함수의&nbsp;action에&nbsp;value&nbsp;값이&nbsp;할당되고&nbsp;action은&nbsp;함수가&nbsp;아니기에</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;바로&nbsp;action이&nbsp;리턴되고&nbsp;state에&nbsp;할당된다.</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;그럼&nbsp;만약에&nbsp;dispatchState((state)&nbsp;=&gt;&nbsp;state&nbsp;+&nbsp;10)&nbsp;이라고&nbsp;하면&nbsp;될까???&nbsp;된다.!!!</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;&lt;button&nbsp;onClick={()&nbsp;=&gt;&nbsp;setCount((count)&nbsp;=&gt;&nbsp;count+10)}&gt;increse&lt;/button&gt;</span></span></span></div></pre>\\n<p><code>useReducer()</code> 함수는 간단하게 이렇게 작성될 수 있다. <a href=\\\"https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js?source=post_page---------------------------#L346\\\">useReducer</a></p>\\n<p>아래 함수에서 <code>useState</code>호출시 <code>useReducer</code>를 호출 후 리턴 배열이 리턴이 되는데 이때 <code>dispatch</code>가 <code>dispatchAction</code> 함수의 binding 된 함수이다. 이때 바인딩 되는 인자들은 현재 렌더링 될 fiber 를 가지고 있게 되는데 그렇다면 우리가 <code>dispatch</code> 함수를 호출 할 때마다 어떤 fiber 와 연관되어있는지 알게 되는 것이다. 그래서 해당 fiber 에서부터 reconcile 을 하는거 같다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta export js\\\"><span class=\\\"keyword control js\\\"><span>export</span></span><span>&nbsp;</span></span><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>useReducer</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;currentlyRenderingFiber&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>resolveCurrentlyRenderingFiber</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;workInProgressHook&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>createWorkInProgressHook</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type var js\\\"><span>let</span></span><span>&nbsp;queue</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;UpdateQueue</span><span class=\\\"keyword operator comparison js\\\"><span>&lt;</span></span><span class=\\\"constant other js\\\"><span>A</span></span><span class=\\\"keyword operator comparison js\\\"><span>&gt;</span></span><span>&nbsp;</span><span class=\\\"keyword operator bitwise js\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span class=\\\"variable other object js\\\"><span>workInProgressHook</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>queue</span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;any</span><span class=\\\"meta brace round js\\\"><span>)</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;...</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span>dispatch</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>Dispatch</span></span><span>&lt;</span><span class=\\\"constant other js\\\"><span>A</span></span><span>&gt;&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span class=\\\"variable other object js\\\"><span>queue</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>dispatch</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span class=\\\"variable other object js\\\"><span>dispatchAction</span></span><span class=\\\"meta method-call js\\\"><span class=\\\"meta delimiter method period js\\\"><span>.</span></span><span class=\\\"entity name function js\\\"><span>bind</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta method-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta method-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;currentlyRenderingFiber</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta method-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;queue</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta method-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;any</span><span class=\\\"meta brace round js\\\"><span>)</span><span>)</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"meta brace square js\\\"><span>[</span></span><span class=\\\"variable other object js\\\"><span>workInProgressHook</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>memoizedState</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;dispatch</span><span class=\\\"meta brace square js\\\"><span>]</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;dispatchAction&lt;A&gt;</span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"variable parameter function js\\\"><span>fiber</span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"variable parameter function js\\\"><span>Fiber</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable parameter function js\\\"><span>queue</span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"variable parameter function js\\\"><span>UpdateQueue</span></span><span class=\\\"keyword operator comparison js\\\"><span>&lt;</span></span><span class=\\\"constant other js\\\"><span>A</span></span><span class=\\\"keyword operator comparison js\\\"><span>&gt;</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable parameter function js\\\"><span>action</span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>A</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>...</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>scheduleWork</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span>fiber</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;expirationTime</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<p>예상대로 액션 디스패처에 새로운 상태를 직접 제공 할 수 있습니다. Dispatcher 에게 <em>액션 함수를 제공하여 이전 상태를 받고 새 상태를 반환 할 수도 있습니다 .</em></p>\\n<p>즉, 구성 요소 트리 아래로 <code>state setter</code>(useState 에서 리턴된 배열의 두번째 함수)를 보내면 다른 props 없이 상위 구성 요소의 현재 상태(current state)에 대해 변형을 실행할 수 있습니다. 예 :</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>ParentComponent</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta brace square js\\\"><span>[</span></span><span class=\\\"constant other js\\\"><span>name</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>setName</span></span><span class=\\\"meta brace square js\\\"><span>]</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useState</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"keyword operator comparison js\\\"><span>&lt;</span></span><span>ChildComponent&nbsp;toUpperCase</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span class=\\\"meta brace curly js\\\"><span>{</span></span><span>setName</span><span class=\\\"meta brace curly js\\\"><span>}</span></span><span>&nbsp;</span><span class=\\\"keyword operator js\\\"><span>/</span></span><span class=\\\"keyword operator comparison js\\\"><span>&gt;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>ChildComponent</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"variable parameter function js\\\"><span>props</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useEffect</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"variable other object js\\\"><span>props</span></span><span class=\\\"meta method-call js\\\"><span class=\\\"meta delimiter method period js\\\"><span>.</span></span><span class=\\\"support function js\\\"><span>toUpperCase</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"variable parameter function js\\\"><span>state</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>state</span></span><span class=\\\"meta method-call js\\\"><span class=\\\"meta delimiter method period js\\\"><span>.</span></span><span class=\\\"support function js\\\"><span>toUpperCase</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta brace square js\\\"><span>[</span></span><span class=\\\"constant language boolean true js\\\"><span>true</span></span><span class=\\\"meta brace square js\\\"><span>]</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<p>마지막으로, 구성 요소의 라이플 사이클에 중요한 영향을 미치는 effect hooks 작동 방식을 알아보자.</p>\",\"frontmatter\":{\"title\":\"Under the hood of React Hooks (작성중)\",\"date\":\"July 30, 2019\"}}},\"pathContext\":{\"slug\":\"/react-hook/hood-hook/\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---react-hook-hood-hook-1b6b639eae073e8d4510.js","module.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"title\":\"Merlin Tec Blog\",\"author\":\"merlin.ho\"}},\"markdownRemark\":{\"id\":\"/Users/merlin.ho/Documents/workspace/ho_blog/gatsby-blog/src/pages/react-hook/hood-hook.md absPath of file >>> MarkdownRemark\",\"html\":\"<p><a href=\\\"https://medium.com/the-guild/under-the-hood-of-reacts-hooks-system-eb59638c9dba\\\">이글</a>을 번역 및 분석 한 글입니다. 잘못된 번역이 있을 수 있습니다. 또한 예전 코드들이 많으므로 참고만 해야 합니다. 현재 코드랑 다른점이 많이 있습니다.</p>\\n<h1>Under the hood of React’s hooks system</h1>\\n<p>우리는 모두 그것에 대해 들었습니다. React 16.7 의 새로운 훅 시스템은 커뮤니티에서 많은 이야기가 나옵니다. 우리는 모두 그것을 시도하고 그것을 테스트하고, 그리고 그것의 잠재력에 대해 정말로 흥분했습니다. 후크에 대해 생각할 때 그것들은 다소 마술적입니다. 어떻게 든 React 는 인스턴스를 노출하지 않고도이 구성 요소를 관리합니다 (<code>this</code> 키워드를 사용하지 않아도 됨). 그래서 도대체 어떻게 React 가 그렇게합니까?</p>\\n<p>오늘 나는 React 의 후크 구현에 대해 더 자세히 이해할 수 있기를 바랍니다. 마법 같은 기능의 문제점은 복잡한 스택 추적으로 뒷받침되기 때문에 문제가 발생하면 문제를 디버그하는 것이 더 어렵다는 것입니다. 따라서, React 의 새로운 후크 시스템에 대한 깊은 지식을 갖게되면 문제가 발생하면 이를 신속하게 해결할 수 있을 것입니다.</p>\\n<blockquote>\\n<p>시작하기 전에 저는 제가 React 의 개발자 / 유지자가 아니며 제 말을 아주 작은 알갱이로 가야한다고 말하고 싶습니다. 나는 React ‘s hooks 시스템의 구현에 깊이 깊이 잠긴했지만, 꼭 이것이 React 가 실제로 어떻게 작동 하는지를 보장 할 수는 없습니다. 필자는 필자의 말을 React 의 소스 코드에서 증명과 참조로 뒷받침했으며 가능한 한 견고하게 주장하려고 노력했습니다.</p>\\n</blockquote>\\n<p><img src=\\\"https://miro.medium.com/max/684/1*R-oovJm4IQBLDjZy6DvbBg.png\\\" alt=\\\"https://miro.medium.com/max/684/1*R-oovJm4IQBLDjZy6DvbBg.png\\\"></p>\\n<p>우선, React 의 범위 내에서 후크가 호출 되도록하는 메커니즘을 살펴 보겠습니다. 오른쪽 컨텍스트에서 호출되지 않으면 후크가 의미가 없다는 것을 알 수 있기 때문입니다.</p>\\n<h2>The dispatcher</h2>\\n<p>디스패처는 후크 기능을 포함하는 공유 객체입니다. ReactDOM 의 렌더링 단계를 기반으로 동적으로 할당되거나 정리되며 사용자가 React 구성 요소 외부의 후크에 액세스하지 못하게합니다. (see <a href=\\\"https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberDispatcher.js?source=post_page---------------------------#L24\\\">implementation</a>).</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;ReactFiberDispatcher.js</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span class=\\\"keyword control js\\\"><span>import</span></span><span>&nbsp;</span><span class=\\\"punctuation definition modules begin js\\\"><span>{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useCallback</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useContext</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useEffect</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useImperativeMethods</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useLayoutEffect</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useMemo</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useMutationEffect</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useReducer</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useRef</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other module js\\\"><span>useState</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta import js\\\"><span class=\\\"punctuation definition modules end js\\\"><span>}</span></span><span>&nbsp;</span><span class=\\\"keyword control js\\\"><span>from</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>./ReactFiberHooks</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta export js\\\"><span class=\\\"keyword control js\\\"><span>export</span></span><span>&nbsp;</span></span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>Dispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;readContext</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useCallback</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useContext</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useEffect</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useImperativeMethods</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useLayoutEffect</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useMemo</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useMutationEffect</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useReducer</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useRef</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;useState</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div></pre>\\n<p>후크는 올바른 디스패처로 간단하게 전환하여 루트 구성 요소를 렌더링하기 전에 <code>enableHooks</code> 플래그에 의해 활성화 / 비활성화됩니다. 이는 기술적으로 런타임에 후크를 활성화 / 비활성화 할 수 있음을 의미합니다. React 16.6.X 에는 실험 기능이 구현되어 있지만 실제로는 사용할 수 없습니다. (see <a href=\\\"https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberScheduler.js?source=post_page---------------------------#L1211\\\">implementation</a>).</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;1211줄&nbsp;ReactFiberScheduler.js</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"keyword control js\\\"><span>if</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span>enableHooks</span><span class=\\\"meta brace round js\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other object js\\\"><span>ReactCurrentOwner</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>currentDispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;Dispatcher</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span><span>&nbsp;</span><span class=\\\"keyword control js\\\"><span>else</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other object js\\\"><span>ReactCurrentOwner</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>currentDispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;DispatcherWithoutHooks</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div></pre>\\n<p>렌더링 작업이 끝나면 디스패처를 무효화하여 ReactDOM 렌더링주기 밖에서 후크가 실수로 사용되는 것을 방지합니다. 이것은 사용자가 어리석은 일을하지 않도록 보장하는 메커니즘입니다. (see <a href=\\\"https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberScheduler.js?source=post_page---------------------------#L1376\\\">implementation</a>).</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;1376줄&nbsp;ReactFiberScheduler.js</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;We&#39;re&nbsp;done&nbsp;performing&nbsp;work.&nbsp;Time&nbsp;to&nbsp;clean&nbsp;up.</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"variable other object js\\\"><span>ReactCurrentOwner</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>currentDispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span></span></div></pre>\\n<p>디스패처는 <code>resolveDispatcher()</code> 함수를 사용하여 각각의 모든 후크 호출에서 해결됩니다. 앞에서 말했듯이, React 의 렌더링주기 밖에서는 의미가 없어야하고, React 는 경고 메시지를 출력해야합니다 : <em>“후크는 함수 구성 요소의 본체 내부에서만 호출 할 수 있습니다”</em> (see <a href=\\\"https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react/src/ReactHooks.js?source=post_page---------------------------#L17\\\">implementation</a>).</p>\\n<p>Dispatcher 실행을 간단하게 표현하면 아래와 같다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type var js\\\"><span>let</span></span><span>&nbsp;currentDispatcher</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>dispatcherWithoutHooks</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment block js\\\"><span class=\\\"punctuation definition comment js\\\"><span>/*</span></span><span>&nbsp;...&nbsp;</span><span class=\\\"punctuation definition comment js\\\"><span>*/</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>dispatcherWithHooks</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment block js\\\"><span class=\\\"punctuation definition comment js\\\"><span>/*</span></span><span>&nbsp;...&nbsp;</span><span class=\\\"punctuation definition comment js\\\"><span>*/</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>resolveDispatcher</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>if</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span>currentDispatcher</span><span class=\\\"meta brace round js\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;currentDispatcher</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>throw</span></span><span>&nbsp;</span><span class=\\\"support class js\\\"><span>Error</span></span><span class=\\\"meta brace round js\\\"><span>(</span></span><span class=\\\"string quoted double js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&quot;</span></span><span>Hooks&nbsp;can&#39;t&nbsp;be&nbsp;called</span><span class=\\\"punctuation definition string end js\\\"><span>&quot;</span></span></span><span class=\\\"meta brace round js\\\"><span>)</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>useXXX</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"keyword operator spread js\\\"><span>...</span></span><span class=\\\"variable parameter rest function js\\\"><span>args</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>dispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>resolveDispatcher</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>dispatcher</span></span><span class=\\\"meta method-call js\\\"><span class=\\\"meta delimiter method period js\\\"><span>.</span></span><span class=\\\"entity name function js\\\"><span>useXXX</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"keyword operator spread js\\\"><span>...</span></span><span>args</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>renderRoot</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;currentDispatcher&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;enableHooks&nbsp;</span><span class=\\\"keyword operator ternary js\\\"><span>?</span></span><span>&nbsp;</span><span>dispatcherWithHooks</span><span>&nbsp;</span><span class=\\\"keyword operator ternary js\\\"><span>:</span></span><span>&nbsp;dispatcherWithoutHooks</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>performWork</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;currentDispatcher&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<p>실제 React github 코드 상에선 아래와 같이 표현하고 있다. (예전 코드)</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;16줄&nbsp;ReactFiberScheduler.js</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>resolveDispatcher</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>dispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>ReactCurrentOwner</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>currentDispatcher</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>invariant</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;dispatcher&nbsp;</span><span class=\\\"keyword operator comparison js\\\"><span>!==</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>Hooks&nbsp;can&nbsp;only&nbsp;be&nbsp;called&nbsp;inside&nbsp;the&nbsp;body&nbsp;of&nbsp;a&nbsp;function&nbsp;component.</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;dispatcher</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;54줄&nbsp;ReactFiberScheduler.js</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta export js\\\"><span class=\\\"keyword control js\\\"><span>export</span></span><span>&nbsp;</span></span><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;useState&lt;S&gt;</span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"variable parameter function js\\\"><span>initialState</span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>S</span></span><span class=\\\"meta brace round js\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"keyword operator bitwise js\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>S</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>dispatcher</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>resolveDispatcher</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>dispatcher</span></span><span class=\\\"meta method-call js\\\"><span class=\\\"meta delimiter method period js\\\"><span>.</span></span><span class=\\\"entity name function js\\\"><span>useState</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span>initialState</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<p>이제는 간단한 캡슐화 메커니즘을 살펴 보았으므로 이 기사의 핵심 인 후크로 넘어 가고자 한다. 여기서 나는 새로운 개념을 소개하고자 합니다.</p>\\n<h2>The hooks queue</h2>\\n<p>후크는 호출 순서로 함께 연결된 노드로 표시됩니다. 후크가 단순히 만들어지지 않고 남겨지기 때문에 그들은 그렇게 표현됩니다. 그들은 그들이 존재하는 것을 가능하게하는 메커니즘을 가지고 있습니다. 후크(hook)에는 구현에 뛰어 들기 전에 마음에 새겨야 할 필요한 몇 가지 프로퍼티들 있습니다.</p>\\n<ul>\\n<li>초기 상태값은 초기 렌더링에서 생성됩니다.</li>\\n<li>상태를 즉시 업데이트 할 수 있습니다.</li>\\n<li>React 는 다음번 렌더링에서 hook 의 상태를 기억할 것입니다.</li>\\n<li>React 는 호출 순서에 따라 올바른 상태를 제공합니다.</li>\\n<li>React 는 이 hook 이 어떤 fiber 에 속하는지 알 수 있습니다.</li>\\n</ul>\\n<p>따라서 component 의 상태를 보는 방식을 다시 생각 해야합니다. 지금까지 우리는 마치 평범한 object 인 것처럼 그것에 대해 생각해 왔습니다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;React&nbsp;state&nbsp;-&nbsp;the&nbsp;old&nbsp;way</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;foo</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>foo</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;bar</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>bar</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;baz</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>baz</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div></pre>\\n<p>그러나 후크를 처리 할 때 각 노드가 하나의 상태 모델을 나타내는 큐로 간주 되어야합니다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;React&nbsp;state&nbsp;-&nbsp;the&nbsp;new&nbsp;way</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;memoizedState</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>foo</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;next</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;memoizedState</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>bar</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;next</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memoizedState</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>baz</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;이것은&nbsp;흡사&nbsp;배열과&nbsp;비슷할&nbsp;수&nbsp;있을거&nbsp;같다.</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;[&#39;foo&#39;,&nbsp;&#39;bar&#39;,&nbsp;&#39;baz&#39;]&nbsp;iterator</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;[&#39;foo&#39;,&nbsp;&#39;bar&#39;,&nbsp;&#39;baz&#39;][Symbol.iterator]()</span></span></span></div></pre>\\n<p>단일 훅 노드의 스키마는 <a href=\\\"https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js?source=post_page---------------------------#L243\\\">implementation</a>.에서 볼 수 있습니다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;ReactFiberHooks.js</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>createHook</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>:&nbsp;Hook&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;memoizedState</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;baseState</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;queue</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;baseUpdate</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;next</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<p>훅에는 몇 가지 추가 속성이 있지만 훅의 작동 방식을 이해하는 열쇠는<code>memoizedState</code> 와 <code>next</code> 내에 있습니다. 나머지 프로퍼티들은 <code>useReducer()</code> 훅에 의해 특별히 사용되어 <code>디스패치 된 액션</code>과 <code>기본 상태들(base states)</code>를 캐싱하므로 다양한 경우 fallback 처럼 이런 감소 프로세스가 반복 될 수 있습니다 :</p>\\n<ul>\\n<li><code>baseState</code> - reducer 에 주어질 상태 객체.</li>\\n<li><code>baseUpdate</code> -<code>baseState</code>를 생성 한 가장 최근의 dispatch 된 액션입니다.</li>\\n<li><code>queue</code> - dispatch 된 액션의 대기열(queue), reducer 를 통해 처리되길 기다리는 액션들이다.</li>\\n</ul>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;</span><span class=\\\"markup underline link https hyperlink\\\"><span>https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js?source=post_page---------------------------#L367</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"keyword control js\\\"><span>do</span></span><span>&nbsp;</span><span class=\\\"meta brace curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;Process&nbsp;this&nbsp;render&nbsp;phase&nbsp;update.&nbsp;We&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;the</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;priority&nbsp;because&nbsp;it&nbsp;will&nbsp;always&nbsp;be&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;current</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;render&#39;s.</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>action</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>update</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"support variable property dom js\\\"><span>action</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;newState&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>reducer</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span>newState</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;action</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;update&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>update</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"support variable property dom js\\\"><span>next</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta brace curly js\\\"><span>}</span></span><span>&nbsp;</span><span class=\\\"keyword control js\\\"><span>while</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span>update&nbsp;</span><span class=\\\"keyword operator comparison js\\\"><span>!==</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta brace round js\\\"><span>)</span></span></span></div></pre>\\n<blockquote>\\n<p>여기서 reducer 는 action 과 payload state 를 받아서 새로운 state 를 반환하는 순수함수라 할 수 있겠다. baseUpdate 는 액션이라고 보면 될것이다.</p>\\n</blockquote>\\n<p>불행하게도 저는 거의 모든 경우를 재현 할 수 없었기 때문에 reducer hook 을 잘 이해할 수 없었습니다. 그래서 정교하게 느껴지지 않을 것입니다. 나는 단지 reducer 구현이 너무 일관성이 없기 때문에 <a href=\\\"https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js?source=post_page---------------------------#L380\\\">implementation</a> 에서 구현 자체의 주석 중 하나가 “(이것이) 원하는 의미론이 맞는지 확실치 않다(TODO: Not sure if this is the desired semantics, but it’s what we do for gDSFP. I can’t remember why.)” 라고 말합니다. 그래서 어떻게 확신해야합니까?!</p>\\n<p>따라서 각각의 모든 컴포넌트 호출 이전에 후크로 돌아가서, <a href=\\\"https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js#L123\\\"><code>prepareHooks()</code></a>라는 이름의 함수가 호출됩니다. current fiber 와 hooks 큐(대기열) 안에 있는 그것의 첫 번째 후크 노드는 전역 변수에 저장됩니다. 이런 방식으로, 우리가 후크 함수 (<code>useXXX ()</code>)를 호출 할 때마다 어떤 컨텍스트에서 실행되는지를 알 수 있습니다.</p>\\n<blockquote>\\n<p>prepareHooks() 이 함수가 보이지 않는다. prepareToUseHooks() 이 함수인거 같다.</p>\\n</blockquote>\\n<p>다음은 Hooks 대기열이 실행되는 간단한 코드 형식이다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>Update</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>A</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>expirationTime</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>ExpirationTime</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>action</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>A</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>next</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Update</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>A</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>UpdateQueue</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>A</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>last</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Update</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>A</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>dispatch</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>any</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>Hook</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>memoizedState</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>any</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>baseState</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>any</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>baseUpdate</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Update</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"support type primitive ts\\\"><span>any</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>queue</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>UpdateQueue</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"support type primitive ts\\\"><span>any</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>next</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Hook</span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;The&nbsp;work-in-progress&nbsp;fiber.&nbsp;I&#39;ve&nbsp;named&nbsp;it&nbsp;differently&nbsp;to&nbsp;distinguish&nbsp;it&nbsp;from</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;the&nbsp;work-in-progress&nbsp;hook.</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>let</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>currentlyRenderingFiber</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Fiber</span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span><span>&nbsp;</span></span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;Hooks&nbsp;are&nbsp;stored&nbsp;as&nbsp;a&nbsp;linked&nbsp;list&nbsp;on&nbsp;the&nbsp;fiber&#39;s&nbsp;memoizedState&nbsp;field.&nbsp;The</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;current&nbsp;hook&nbsp;list&nbsp;is&nbsp;the&nbsp;list&nbsp;that&nbsp;belongs&nbsp;to&nbsp;the&nbsp;current&nbsp;fiber.&nbsp;The</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;work-in-progress&nbsp;hook&nbsp;list&nbsp;is&nbsp;a&nbsp;new&nbsp;list&nbsp;that&nbsp;will&nbsp;be&nbsp;added&nbsp;to&nbsp;the</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;work-in-progress&nbsp;fiber.</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>let</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>workInProgressHook</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Hook</span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span><span>&nbsp;</span></span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>let</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>currentHook</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Hook</span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span><span>&nbsp;</span></span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;Source:&nbsp;</span><span class=\\\"markup underline link https hyperlink\\\"><span>https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js#L123</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;2.&nbsp;전역에&nbsp;셋팅</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>prepareHooks</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"variable parameter ts\\\"><span>recentFiber</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Fiber</span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>null</span></span></span><span class=\\\"punctuation separator parameter ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>workInProgressFiber</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Fiber</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentlyRenderingFiber</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>workInProgressFiber</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;현재&nbsp;작업중인&nbsp;Fiber</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentHook</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object ts\\\"><span>recentFiber</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>memoizedState</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;이미&nbsp;render된&nbsp;Fiber의&nbsp;memoizedState를&nbsp;currentHook에&nbsp;할당.</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;Source:&nbsp;</span><span class=\\\"markup underline link https hyperlink\\\"><span>https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/react-reconciler/src/ReactFiberHooks.js:148</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>finishHooks</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other object ts\\\"><span>currentlyRenderingFiber</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>memoizedState</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>workInProgressHook</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentlyRenderingFiber</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>workInProgressHook</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentHook</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;Source:&nbsp;</span><span class=\\\"markup underline link https hyperlink\\\"><span>https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js#L332</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>resolveCurrentlyRenderingFiber</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control conditional ts\\\"><span>if</span></span><span>&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>currentlyRenderingFiber</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentlyRenderingFiber</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control trycatch ts\\\"><span>throw</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"support class error ts\\\"><span>Error</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>Hooks&nbsp;can&#39;t&nbsp;be&nbsp;called</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;Source:&nbsp;</span><span class=\\\"markup underline link https hyperlink\\\"><span>https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js#L267</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>createWorkInProgressHook</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>workInProgressHook</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentHook</span></span><span>&nbsp;</span><span class=\\\"keyword operator ternary ts\\\"><span>?</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>cloneHook</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>currentHook</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"keyword operator ternary ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>createNewHook</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>currentHook</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object ts\\\"><span>currentHook</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"support variable property dom ts\\\"><span>next</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>workInProgressHook</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;4.&nbsp;컴포넌트&nbsp;안에서&nbsp;호출되는&nbsp;useXXX&nbsp;함수.</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>useXXX</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>fiber</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>resolveCurrentlyRenderingFiber</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span><span>)</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;update&nbsp;될&nbsp;fiber&nbsp;리턴.</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>hook</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>createWorkInProgressHook</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span><span>)</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>현재&nbsp;렌더링된&nbsp;fiber의&nbsp;memoizedState</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;...</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>updateFunctionComponent</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>recentFiber</span></span><span class=\\\"punctuation separator parameter ts\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>workInProgressFiber</span></span><span class=\\\"punctuation separator parameter ts\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>Component</span></span><span class=\\\"punctuation separator parameter ts\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>props</span></span><span>&nbsp;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>prepareHooks</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>recentFiber</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>workInProgressFiber</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;1.&nbsp;훅&nbsp;준비</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>Component</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>props</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;3.&nbsp;컴포넌트&nbsp;호출</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>finishHooks</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span><span>)</span></span><span>&nbsp;</span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;5.&nbsp;Hooks&nbsp;마무리</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div></pre>\\n<p>업데이트가 완료되면, <a href=\\\"https://github.com/facebook/react/tree/5f06576f51ece88d846d01abd2ddd575827c6127/react-reconciler/src/ReactFiberHooks.js:148?source=post_page---------------------------\\\"><code>finishHooks()</code></a> 이 호출 될 것입니다. 여기서 후크 대기열의 첫 번째 노드에 대한 참조가 <code>memoizedState</code> 속성의 렌더링 된 fiber 에 저장됩니다. 즉, 후크 대기열과 그 상태를 외부 적으로 처리 할 수 ​​ 있습니다.</p>\\n<p>컴퍼넌트의 메모 상태의 외부 읽기.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>ChildComponent</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useState</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>foo</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useState</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>bar</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useState</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>baz</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>ParentComponent</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>childFiberRef</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useRef</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useEffect</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"storage type var js\\\"><span>let</span></span><span>&nbsp;hookNode&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>childFiberRef</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"support variable property dom js\\\"><span>current</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>memoizedState</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>assert</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"variable other object js\\\"><span>hookNode</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>memoizedState</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>foo</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;hookNode&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>hooksNode</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"support variable property dom js\\\"><span>next</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>assert</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"variable other object js\\\"><span>hookNode</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>memoizedState</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>bar</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;hookNode&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>hooksNode</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"support variable property dom js\\\"><span>next</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>assert</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"variable other object js\\\"><span>hookNode</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>memoizedState</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>baz</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"keyword operator comparison js\\\"><span>&lt;</span></span><span>ChildComponent&nbsp;ref</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span class=\\\"meta brace curly js\\\"><span>{</span></span><span>childFiberRef</span><span class=\\\"meta brace curly js\\\"><span>}</span></span><span>&nbsp;</span><span class=\\\"keyword operator js\\\"><span>/</span></span><span class=\\\"keyword operator comparison js\\\"><span>&gt;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<p>가장 일반적인 것부터 시작하여 개별적인 고리에 대해 더 구체적으로 이야기 해 봅시다.</p>\\n<h2>State hooks</h2>\\n<p>놀랍지만 <code>useState</code> 훅 뒤에선 <code>useReducer</code> 를 사용하고 단순히 미리 정의 된 reducer 핸들러를 제공합니다 (see <a href=\\\"https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js?source=post_page---------------------------#L339\\\">implementation</a>). 즉, <code>useState</code> 에 의해 리턴 된 결과는 실제로 reducer 상태(state)와 action 디스패처(dispatcher)입니다. 상태 후크가 사용하는 reducer 핸들러를 살펴 보시기 바랍니다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>basicStateReducer</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"variable parameter function js\\\"><span>state</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable parameter function js\\\"><span>action</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"keyword operator typeof js\\\"><span>typeof</span></span><span>&nbsp;action&nbsp;</span><span class=\\\"keyword operator comparison js\\\"><span>===</span></span><span>&nbsp;</span><span class=\\\"string quoted single js\\\"><span class=\\\"punctuation definition string begin js\\\"><span>&#39;</span></span><span>function</span><span class=\\\"punctuation definition string end js\\\"><span>&#39;</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator ternary js\\\"><span>?</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>action</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span>state</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"keyword operator ternary js\\\"><span>:</span></span><span>&nbsp;action</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta export js\\\"><span class=\\\"keyword control js\\\"><span>export</span></span><span>&nbsp;</span></span><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;useState&lt;S&gt;</span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"meta parameters js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter function js\\\"><span>initialState</span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>S</span></span><span class=\\\"meta brace round js\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"keyword operator bitwise js\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>S</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>:&nbsp;[S,&nbsp;Dispatch&lt;BasicStateAction&lt;S&gt;&gt;]&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useReducer</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;basicStateReducer</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;useReducer&nbsp;has&nbsp;a&nbsp;special&nbsp;case&nbsp;to&nbsp;support&nbsp;lazy&nbsp;useState&nbsp;initializers</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span>initialState</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;any</span><span class=\\\"meta brace round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;return&nbsp;[state,&nbsp;dispatchState]</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;dispatchState(value)&nbsp;=&gt;&nbsp;basicStateReducer&nbsp;함수의&nbsp;action에&nbsp;value&nbsp;값이&nbsp;할당되고&nbsp;action은&nbsp;함수가&nbsp;아니기에</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;바로&nbsp;action이&nbsp;리턴되고&nbsp;state에&nbsp;할당된다.</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;그럼&nbsp;만약에&nbsp;dispatchState((state)&nbsp;=&gt;&nbsp;state&nbsp;+&nbsp;10)&nbsp;이라고&nbsp;하면&nbsp;될까???&nbsp;된다.!!!</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;&lt;button&nbsp;onClick={()&nbsp;=&gt;&nbsp;setCount((count)&nbsp;=&gt;&nbsp;count+10)}&gt;increse&lt;/button&gt;</span></span></span></div></pre>\\n<p><code>useReducer()</code> 함수는 간단하게 이렇게 작성될 수 있다. <a href=\\\"https://github.com/facebook/react/blob/5f06576f51ece88d846d01abd2ddd575827c6127/packages/react-reconciler/src/ReactFiberHooks.js?source=post_page---------------------------#L346\\\">useReducer</a></p>\\n<p>아래 함수에서 <code>useState</code>호출시 <code>useReducer</code>를 호출 후 리턴 배열이 리턴이 되는데 이때 <code>dispatch</code>가 <code>dispatchAction</code> 함수의 binding 된 함수이다. 이때 바인딩 되는 인자들은 현재 렌더링 될 fiber 를 가지고 있게 되는데 그렇다면 우리가 <code>dispatch</code> 함수를 호출 할 때마다 어떤 fiber 와 연관되어있는지 알게 되는 것이다. 그래서 해당 fiber 에서부터 reconcile 을 하는거 같다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta export js\\\"><span class=\\\"keyword control js\\\"><span>export</span></span><span>&nbsp;</span></span><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"entity name function js\\\"><span>useReducer</span></span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;currentlyRenderingFiber&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>resolveCurrentlyRenderingFiber</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;workInProgressHook&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>createWorkInProgressHook</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type var js\\\"><span>let</span></span><span>&nbsp;queue</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;UpdateQueue</span><span class=\\\"keyword operator comparison js\\\"><span>&lt;</span></span><span class=\\\"constant other js\\\"><span>A</span></span><span class=\\\"keyword operator comparison js\\\"><span>&gt;</span></span><span>&nbsp;</span><span class=\\\"keyword operator bitwise js\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span class=\\\"variable other object js\\\"><span>workInProgressHook</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>queue</span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;any</span><span class=\\\"meta brace round js\\\"><span>)</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>&nbsp;...</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span>dispatch</span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>Dispatch</span></span><span>&lt;</span><span class=\\\"constant other js\\\"><span>A</span></span><span>&gt;&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span class=\\\"variable other object js\\\"><span>queue</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>dispatch</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta brace round js\\\"><span>(</span></span><span class=\\\"variable other object js\\\"><span>dispatchAction</span></span><span class=\\\"meta method-call js\\\"><span class=\\\"meta delimiter method period js\\\"><span>.</span></span><span class=\\\"entity name function js\\\"><span>bind</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta method-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta method-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;currentlyRenderingFiber</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta method-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;queue</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta method-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;any</span><span class=\\\"meta brace round js\\\"><span>)</span><span>)</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"meta brace square js\\\"><span>[</span></span><span class=\\\"variable other object js\\\"><span>workInProgressHook</span></span><span class=\\\"meta delimiter property period js\\\"><span>.</span></span><span class=\\\"variable other property js\\\"><span>memoizedState</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;dispatch</span><span class=\\\"meta brace square js\\\"><span>]</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function js\\\"><span class=\\\"storage type function js\\\"><span>function</span></span><span>&nbsp;dispatchAction&lt;A&gt;</span><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"variable parameter function js\\\"><span>fiber</span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"variable parameter function js\\\"><span>Fiber</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable parameter function js\\\"><span>queue</span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"variable parameter function js\\\"><span>UpdateQueue</span></span><span class=\\\"keyword operator comparison js\\\"><span>&lt;</span></span><span class=\\\"constant other js\\\"><span>A</span></span><span class=\\\"keyword operator comparison js\\\"><span>&gt;</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable parameter function js\\\"><span>action</span></span><span class=\\\"keyword operator assignment js\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>A</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"comment line double-slash js\\\"><span class=\\\"punctuation definition comment js\\\"><span>//</span></span><span>...</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>scheduleWork</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span>fiber</span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;expirationTime</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<p>예상대로 액션 디스패처에 새로운 상태를 직접 제공 할 수 있습니다. Dispatcher 에게 <em>액션 함수를 제공하여 이전 상태를 받고 새 상태를 반환 할 수도 있습니다 .</em></p>\\n<p>즉, 구성 요소 트리 아래로 <code>state setter</code>(useState 에서 리턴된 배열의 두번째 함수)를 보내면 다른 props 없이 상위 구성 요소의 현재 상태(current state)에 대해 변형을 실행할 수 있습니다. 예 :</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>ParentComponent</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta brace square js\\\"><span>[</span></span><span class=\\\"constant other js\\\"><span>name</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>setName</span></span><span class=\\\"meta brace square js\\\"><span>]</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useState</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"keyword operator comparison js\\\"><span>&lt;</span></span><span>ChildComponent&nbsp;toUpperCase</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span class=\\\"meta brace curly js\\\"><span>{</span></span><span>setName</span><span class=\\\"meta brace curly js\\\"><span>}</span></span><span>&nbsp;</span><span class=\\\"keyword operator js\\\"><span>/</span></span><span class=\\\"keyword operator comparison js\\\"><span>&gt;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"storage type const js\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"constant other js\\\"><span>ChildComponent</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment js\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"variable parameter function js\\\"><span>props</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta function-call js\\\"><span class=\\\"entity name function js\\\"><span>useEffect</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"punctuation definition parameters begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end bracket round js\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"punctuation definition function body begin bracket curly js\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"variable other object js\\\"><span>props</span></span><span class=\\\"meta method-call js\\\"><span class=\\\"meta delimiter method period js\\\"><span>.</span></span><span class=\\\"support function js\\\"><span>toUpperCase</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"meta function arrow js\\\"><span class=\\\"meta parameters js\\\"><span class=\\\"variable parameter function js\\\"><span>state</span></span></span><span>&nbsp;</span><span class=\\\"storage type function arrow js\\\"><span>=&gt;</span></span></span><span>&nbsp;</span><span class=\\\"variable other object js\\\"><span>state</span></span><span class=\\\"meta method-call js\\\"><span class=\\\"meta delimiter method period js\\\"><span>.</span></span><span class=\\\"support function js\\\"><span>toUpperCase</span></span><span class=\\\"meta arguments js\\\"><span class=\\\"punctuation definition arguments begin bracket round js\\\"><span>(</span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span><span class=\\\"meta delimiter object comma js\\\"><span>,</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta brace square js\\\"><span>[</span></span><span class=\\\"constant language boolean true js\\\"><span>true</span></span><span class=\\\"meta brace square js\\\"><span>]</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"meta function-call js\\\"><span class=\\\"meta arguments js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition arguments end bracket round js\\\"><span>)</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control js\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"constant language null js\\\"><span>null</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source js\\\"><span class=\\\"punctuation definition function body end bracket curly js\\\"><span>}</span></span></span></div></pre>\\n<p>마지막으로, 구성 요소의 라이플 사이클에 중요한 영향을 미치는 effect hooks 작동 방식을 알아보자.</p>\",\"frontmatter\":{\"title\":\"Under the hood of React Hooks (작성중)\",\"date\":\"July 30, 2019\"}}},\"pathContext\":{\"slug\":\"/react-hook/hood-hook/\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/react-hook-hood-hook.json\n// module id = 493\n// module chunks = 45440482069588"],"sourceRoot":""}