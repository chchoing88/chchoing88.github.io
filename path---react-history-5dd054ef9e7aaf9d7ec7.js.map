{"version":3,"sources":["webpack:///path---react-history-5dd054ef9e7aaf9d7ec7.js","webpack:///./.cache/json/react-history.json"],"names":["webpackJsonp","534","module","exports","data","site","siteMetadata","title","author","markdownRemark","id","html","frontmatter","date","pathContext","slug"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,MAAQC,cAAgBC,MAAA,kBAAAC,OAAA,cAAgDC,gBAAmBC,GAAA,+HAAAC,KAAA;AAAu/zEC,aAA+UL,MAAA,oCAAAM,KAAA,oBAAsEC,aAAgBC,KAAA","file":"path---react-history-5dd054ef9e7aaf9d7ec7.js","sourcesContent":["webpackJsonp([209797577918347],{\n\n/***/ 534:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"title\":\"Merlin Tec Blog\",\"author\":\"merlin.ho\"}},\"markdownRemark\":{\"id\":\"/Users/merlin.ho/Documents/workspace/ho_blog/gatsby-blog/src/pages/react-history/index.md absPath of file >>> MarkdownRemark\",\"html\":\"<p>React SPA 구축시 뒤로가기 눌렀을때 이전 상태를 유지하도록 해야하는 일이 생겼었다. 이때, 어떻게 구축 했었는지를 기록해보자.</p>\\n<p>별도의 써드파티의 state management는 사용하지 않았다.</p>\\n<h2>1차 도전 (Context)</h2>\\n<p>history 의 정보는 어느 컴포넌트에나 적용이 될 수 있어야 하기 때문에 Context가 떠올랐습니다.</p>\\n<p>history 정보에 필요했던 것들은 다음과 같았습니다.</p>\\n<ul>\\n<li>preItemsCount : 해당 페이지의 items들을 몇개까지 불러왔는지 파악.</li>\\n<li>scrollTop : 해당 페이지의 어느 스크롤까지 위치 했었는지 파악.</li>\\n<li>pageName : 어느 페이지의 정보인지 파악.</li>\\n</ul>\\n<p>추가적으로 어느 히스토리를 사용해야 할지 currentIndex 도 두었었지만 이것은 해당 컴포넌트에게 어느 히스토리를 사용할지 맡겨두기로 했습니다. ( 처음엔 이 currentIndex 가 변할때마다 자꾸 렌더링이 시도 되는 현상 때문에 고생했습니다. )</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta import ts\\\"><span class=\\\"keyword control import ts\\\"><span>import</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>React</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>createContext</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>Dispatch</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>useReducer</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>useContext</span></span><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span>&nbsp;</span><span class=\\\"keyword control from ts\\\"><span>from</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>react</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>HistoryContextProviderProps</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>children</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type module ts\\\"><span>React</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"entity name type ts\\\"><span>ReactNode</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type interface ts\\\"><span>interface</span></span><span>&nbsp;</span><span class=\\\"entity name type interface ts\\\"><span>IHistoryItem</span></span><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>preItemsCount</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>number</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>scrollTop</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>number</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>pageName</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>string</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type interface ts\\\"><span>interface</span></span><span>&nbsp;</span><span class=\\\"entity name type interface ts\\\"><span>IHistoryState</span></span><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>historyList</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>IHistoryItem</span></span><span class=\\\"meta type tuple ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span><span>]</span></span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;currentIndex:&nbsp;number;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>Action</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span>&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>type</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>PUSH</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span><span>&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>historyItem</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>IHistoryItem</span></span><span>&nbsp;</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span>&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>type</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>POP</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span><span>&nbsp;</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>HistoryDispatch</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Dispatch</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>Action</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>HistoryStateContext</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>createContext</span></span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>IHistoryState</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta object member ts\\\"><span class=\\\"meta object-literal key ts\\\"><span>historyList</span></span><span class=\\\"meta object-literal key ts punctuation separator key-value ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta array literal ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span><span>]</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;currentIndex:&nbsp;-1</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>HistoryDispatchContext</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>createContext</span></span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>HistoryDispatch</span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>undefined</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"constant language undefined ts\\\"><span>undefined</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>historyReducer</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"variable parameter ts\\\"><span>state</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>IHistoryState</span></span></span><span class=\\\"punctuation separator parameter ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>action</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Action</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-expression expr ts\\\"><span class=\\\"keyword control switch ts\\\"><span>switch</span></span><span>&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other object ts\\\"><span>action</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"support variable property dom ts\\\"><span>type</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"switch-block expr ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"case-clause expr ts\\\"><span class=\\\"keyword control switch ts\\\"><span>case</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>PUSH</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span><span class=\\\"punctuation definition section case-statement ts\\\"><span>:</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta object member ts\\\"><span class=\\\"keyword operator spread ts\\\"><span>...</span></span><span class=\\\"variable other readwrite ts\\\"><span>state</span></span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta object member ts\\\"><span class=\\\"meta object-literal key ts\\\"><span>historyList</span></span><span class=\\\"meta object-literal key ts punctuation separator key-value ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"variable other object ts\\\"><span>state</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other object property ts\\\"><span>historyList</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"support function ts\\\"><span>concat</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"meta array literal ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span></span><span class=\\\"variable other object ts\\\"><span>action</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>historyItem</span></span><span class=\\\"meta brace square ts\\\"><span>]</span></span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;currentIndex:&nbsp;state.currentIndex&nbsp;+&nbsp;1</span></span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"case-clause expr ts\\\"><span class=\\\"keyword control switch ts\\\"><span>case</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>POP</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span><span class=\\\"punctuation definition section case-statement ts\\\"><span>:</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta object member ts\\\"><span class=\\\"keyword operator spread ts\\\"><span>...</span></span><span class=\\\"variable other readwrite ts\\\"><span>state</span></span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;currentIndex:&nbsp;state.currentIndex&nbsp;&lt;&nbsp;0&nbsp;?&nbsp;-1&nbsp;:&nbsp;state.currentIndex&nbsp;-&nbsp;1</span></span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"case-clause expr ts\\\"><span class=\\\"keyword control switch ts\\\"><span>default</span></span><span class=\\\"punctuation definition section case-statement ts\\\"><span>:</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>state</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>HistoryContextProvider</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"meta parameter object-binding-pattern ts\\\"><span class=\\\"punctuation definition binding-pattern object ts\\\"><span>{</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span class=\\\"meta parameter object-binding-pattern ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>children</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span class=\\\"meta parameter object-binding-pattern ts\\\"><span class=\\\"punctuation definition binding-pattern object ts\\\"><span>}</span></span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>HistoryContextProviderProps</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span class=\\\"meta array-binding-pattern-variable ts\\\"><span>&nbsp;</span><span class=\\\"punctuation definition binding-pattern array ts\\\"><span>[</span></span><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>historyState</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>dispatch</span></span><span class=\\\"punctuation definition binding-pattern array ts\\\"><span>]</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>useReducer</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>historyReducer</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta object member ts\\\"><span class=\\\"meta object-literal key ts\\\"><span>historyList</span></span><span class=\\\"meta object-literal key ts punctuation separator key-value ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta array literal ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span><span>]</span></span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;currentIndex:&nbsp;-1</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&lt;</span></span><span class=\\\"variable other object ts\\\"><span>HistoryDispatchContext</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>Provider</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>value</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span class=\\\"meta object member ts\\\"><span class=\\\"variable other readwrite ts\\\"><span>dispatch</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&lt;</span></span><span class=\\\"variable other object ts\\\"><span>HistoryStateContext</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>Provider</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>value</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span class=\\\"meta object member ts\\\"><span class=\\\"variable other readwrite ts\\\"><span>historyState</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span class=\\\"meta object member ts\\\"><span class=\\\"variable other readwrite ts\\\"><span>children</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&lt;</span></span><span class=\\\"keyword operator arithmetic ts\\\"><span>/</span></span><span class=\\\"variable other object ts\\\"><span>HistoryStateContext</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>Provider</span></span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&lt;</span></span><span class=\\\"keyword operator arithmetic ts\\\"><span>/</span></span><span class=\\\"variable other object ts\\\"><span>HistoryDispatchContext</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>Provider</span></span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>useHistoryState</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>state</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>useContext</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>HistoryStateContext</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>state</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>useHistoryDispatch</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>dispatch</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>useContext</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>HistoryDispatchContext</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control conditional ts\\\"><span>if</span></span><span>&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"keyword operator logical ts\\\"><span>!</span></span><span class=\\\"variable other readwrite ts\\\"><span>dispatch</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"keyword control trycatch ts\\\"><span>throw</span></span><span>&nbsp;</span><span class=\\\"new expr ts\\\"><span class=\\\"keyword operator new ts\\\"><span>new</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Error</span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>HistoryDispatchContext&nbsp;value&nbsp;not&nbsp;found</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>dispatch</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div></pre>\\n<h2>1차 도전의 문제</h2>\\n<p>위 코드는 나름 잘 동작은 하였지만 제가 생각한대로 동작하지 않았습니다.</p>\\n<p>이유는 다음과 같았습니다.</p>\\n<p>currentIndex 도 마찬가지지만 이 history Context의 historyList 에 컴포넌트가 unmount 될시에 적제가 되도록 작성해 두었습니다.\\n그리곤 페이지 이동이 끝난 상태에서 historyList를 참고하도록 하였습니다.</p>\\n<p>하지만 Context의 상태 값을 변경 한다는 것은 Consumer 들이 다시 리 렌더링을 뜻하는 것이고, 마운트 될때 Context의 상태 변경 해둔 것이 마운트 된 이후에 historyList에 적용 과 리 렌더링이 되면서 예상과는 다르게 움직 였었습니다.</p>\\n<p>정리하면 다음과 같은 문제가 발생했습니다.</p>\\n<ul>\\n<li>불필요한 리 렌더링</li>\\n<li>2번 리렌더링 (페이지 이동 + Context 상태변경)이 되면서 같은 페이지에서 다른 history를 참고 하고 있음</li>\\n</ul>\\n<h2>2차 도전 (static store + Context)</h2>\\n<p>1차 문제를 해결하기 위해서 Context 상태 변경에 의한 렌더링을 피해야만 된다는 생각을 했습니다.</p>\\n<p>그래서 history store를 <strong>유일한 객체</strong>로 만들어야 겠다는 생각을 했고, 이 객체가 변해도 React가 반응하지 않아야 되도록 별도의 store를 만들었습니다.</p>\\n<p>또한 이 history store 의 메서드와 프로퍼티들을 props로 타고 내려 보내는 것이 아닌 필요한 곳에 쉽게 사용할 수 있도록 Context를 혼합 했습니다.</p>\\n<p>다음은 history store 객체 입니다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type interface ts\\\"><span>interface</span></span><span>&nbsp;</span><span class=\\\"entity name type interface ts\\\"><span>IHistoryItem</span></span><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>preItemsCount</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>number</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>scrollTop</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>number</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>pageName</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>string</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"storage type class ts\\\"><span>class</span></span><span>&nbsp;</span><span class=\\\"entity name type class ts\\\"><span>HistoryStore</span></span><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>historyList</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>IHistoryItem</span></span><span class=\\\"meta type tuple ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span><span>]</span></span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;currentIndex:&nbsp;number;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta method declaration ts\\\"><span class=\\\"storage type ts\\\"><span>constructor</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"variable language this ts\\\"><span>this</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>historyList</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta array literal ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span><span>]</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;this.currentIndex&nbsp;=&nbsp;-1;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;get&nbsp;currentHistory()&nbsp;{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;if&nbsp;(this.currentIndex&nbsp;&lt;&nbsp;0)&nbsp;{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;null;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;}</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;return&nbsp;this.historyList[this.currentIndex&nbsp;-&nbsp;1];</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;}</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta definition method ts entity name function ts\\\"><span>getRecentPageHistory</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"variable parameter ts\\\"><span>pageName</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>string</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>matchPageNameHistoryList</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"variable language this ts\\\"><span>this</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other object property ts\\\"><span>historyList</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"entity name function ts\\\"><span>filter</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta var expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta arrow ts\\\"><span class=\\\"variable parameter ts\\\"><span>history</span></span><span>&nbsp;</span><span class=\\\"storage type function arrow ts\\\"><span>=&gt;</span></span><span>&nbsp;</span></span><span class=\\\"variable other object ts\\\"><span>history</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>pageName</span></span><span>&nbsp;</span><span class=\\\"keyword operator comparison ts\\\"><span>===</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>pageName</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta var expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control conditional ts\\\"><span>if</span></span><span>&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other object ts\\\"><span>matchPageNameHistoryList</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"support variable property ts\\\"><span>length</span></span><span>&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span><span>&nbsp;</span><span class=\\\"keyword operator arithmetic ts\\\"><span>-</span></span><span class=\\\"constant numeric decimal ts\\\"><span>1</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>matchPageNameHistoryList</span></span><span class=\\\"meta array literal ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span></span><span class=\\\"variable other object ts\\\"><span>matchPageNameHistoryList</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"support variable property ts\\\"><span>length</span></span><span>&nbsp;</span><span class=\\\"keyword operator arithmetic ts\\\"><span>-</span></span><span>&nbsp;</span><span class=\\\"constant numeric decimal ts\\\"><span>1</span></span><span class=\\\"meta brace square ts\\\"><span>]</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta definition method ts entity name function ts\\\"><span>isMatchPageNameHistory</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"variable parameter ts\\\"><span>pageName</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>string</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"variable language this ts\\\"><span>this</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other object property ts\\\"><span>historyList</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"entity name function ts\\\"><span>some</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"meta arrow ts\\\"><span class=\\\"variable parameter ts\\\"><span>history</span></span><span>&nbsp;</span><span class=\\\"storage type function arrow ts\\\"><span>=&gt;</span></span><span>&nbsp;</span></span><span class=\\\"variable other object ts\\\"><span>history</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>pageName</span></span><span>&nbsp;</span><span class=\\\"keyword operator comparison ts\\\"><span>===</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>pageName</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta definition method ts entity name function ts\\\"><span>pushHistory</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"variable parameter ts\\\"><span>historyItem</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>IHistoryItem</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"variable language this ts\\\"><span>this</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other object property ts\\\"><span>historyList</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"support function ts\\\"><span>push</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>historyItem</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;this.currentIndex&nbsp;=&nbsp;this.currentIndex&nbsp;+&nbsp;1;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta export default ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"keyword control default ts\\\"><span>default</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>HistoryStore</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div></pre>\\n<p>초반에는 <code>currentIndex</code> 를 두어서 위에서 했던 것처럼 컴포넌트들이 어떤 히스토리를 봐야 하는지 알려주는 지표로써 사용을 하려고 했지만 후반부에는 그것 보다는 현재 접속한 pageName에서 historyList 에서 일치된 가장 최근 pageName의 history를 빼와서 적용하도록 하였습니다.</p>\\n<p>다음은 이런 히스토리를 다양한 뎁스의 컴포넌트에서 사용할 수 있도록 Context를 수정하였습니다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta import ts\\\"><span class=\\\"keyword control import ts\\\"><span>import</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>React</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>createContext</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>useContext</span></span><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span>&nbsp;</span><span class=\\\"keyword control from ts\\\"><span>from</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>react</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta import ts\\\"><span class=\\\"keyword control import ts\\\"><span>import</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>HistoryStore</span></span><span>&nbsp;</span><span class=\\\"keyword control from ts\\\"><span>from</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>staticStore/HistoryStore</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>HistoryContextProviderProps</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>children</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type module ts\\\"><span>React</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"entity name type ts\\\"><span>ReactNode</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>historyStore</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"new expr ts\\\"><span class=\\\"keyword operator new ts\\\"><span>new</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>HistoryStore</span></span><span class=\\\"meta brace round ts\\\"><span>(</span><span>)</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>HistoryStateContext</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>createContext</span></span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>HistoryStore</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>historyStore</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>HistoryContextProvider</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"meta parameter object-binding-pattern ts\\\"><span class=\\\"punctuation definition binding-pattern object ts\\\"><span>{</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span class=\\\"meta parameter object-binding-pattern ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>children</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span class=\\\"meta parameter object-binding-pattern ts\\\"><span class=\\\"punctuation definition binding-pattern object ts\\\"><span>}</span></span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>HistoryContextProviderProps</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&lt;</span></span><span class=\\\"variable other object ts\\\"><span>HistoryStateContext</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>Provider</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>value</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span class=\\\"meta object member ts\\\"><span class=\\\"variable other readwrite ts\\\"><span>historyStore</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span class=\\\"meta object member ts\\\"><span class=\\\"variable other readwrite ts\\\"><span>children</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&lt;</span></span><span class=\\\"keyword operator arithmetic ts\\\"><span>/</span></span><span class=\\\"variable other object ts\\\"><span>HistoryStateContext</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>Provider</span></span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>useHistoryStore</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>state</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>useContext</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>HistoryStateContext</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>state</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div></pre>\\n<p>Context는 훨씬 간단해 졌습니다.</p>\\n<h2>정리</h2>\\n<p>생각을 하다하다 몇번의 도전만에 예상대로 움직이긴 했습니다. 이 방법 말고도 React SPA에서 react-router-dom의 location props의 state를 이용해볼까도 생각했지만 복잡한 state를 location에 다루기에는 투머치(?) 한 생각이 들어서 따로 빼는 방식을 생각해보았습니다.</p>\\n<p>추가적으로 다른 방식들이 있는지 고민을 추가적으로 해보아야 겠습니다.</p>\",\"frontmatter\":{\"title\":\"React 뒤로가기 시 이전 상태 유지를 위한 history\",\"date\":\"April 04, 2020\"}}},\"pathContext\":{\"slug\":\"/react-history/\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---react-history-5dd054ef9e7aaf9d7ec7.js","module.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"title\":\"Merlin Tec Blog\",\"author\":\"merlin.ho\"}},\"markdownRemark\":{\"id\":\"/Users/merlin.ho/Documents/workspace/ho_blog/gatsby-blog/src/pages/react-history/index.md absPath of file >>> MarkdownRemark\",\"html\":\"<p>React SPA 구축시 뒤로가기 눌렀을때 이전 상태를 유지하도록 해야하는 일이 생겼었다. 이때, 어떻게 구축 했었는지를 기록해보자.</p>\\n<p>별도의 써드파티의 state management는 사용하지 않았다.</p>\\n<h2>1차 도전 (Context)</h2>\\n<p>history 의 정보는 어느 컴포넌트에나 적용이 될 수 있어야 하기 때문에 Context가 떠올랐습니다.</p>\\n<p>history 정보에 필요했던 것들은 다음과 같았습니다.</p>\\n<ul>\\n<li>preItemsCount : 해당 페이지의 items들을 몇개까지 불러왔는지 파악.</li>\\n<li>scrollTop : 해당 페이지의 어느 스크롤까지 위치 했었는지 파악.</li>\\n<li>pageName : 어느 페이지의 정보인지 파악.</li>\\n</ul>\\n<p>추가적으로 어느 히스토리를 사용해야 할지 currentIndex 도 두었었지만 이것은 해당 컴포넌트에게 어느 히스토리를 사용할지 맡겨두기로 했습니다. ( 처음엔 이 currentIndex 가 변할때마다 자꾸 렌더링이 시도 되는 현상 때문에 고생했습니다. )</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta import ts\\\"><span class=\\\"keyword control import ts\\\"><span>import</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>React</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>createContext</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>Dispatch</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>useReducer</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>useContext</span></span><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span>&nbsp;</span><span class=\\\"keyword control from ts\\\"><span>from</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>react</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>HistoryContextProviderProps</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>children</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type module ts\\\"><span>React</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"entity name type ts\\\"><span>ReactNode</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type interface ts\\\"><span>interface</span></span><span>&nbsp;</span><span class=\\\"entity name type interface ts\\\"><span>IHistoryItem</span></span><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>preItemsCount</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>number</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>scrollTop</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>number</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>pageName</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>string</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type interface ts\\\"><span>interface</span></span><span>&nbsp;</span><span class=\\\"entity name type interface ts\\\"><span>IHistoryState</span></span><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>historyList</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>IHistoryItem</span></span><span class=\\\"meta type tuple ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span><span>]</span></span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;currentIndex:&nbsp;number;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>Action</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span>&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>type</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>PUSH</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span><span>&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>historyItem</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>IHistoryItem</span></span><span>&nbsp;</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span>&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>type</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>POP</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span><span>&nbsp;</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>HistoryDispatch</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Dispatch</span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>Action</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>HistoryStateContext</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>createContext</span></span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>IHistoryState</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta object member ts\\\"><span class=\\\"meta object-literal key ts\\\"><span>historyList</span></span><span class=\\\"meta object-literal key ts punctuation separator key-value ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta array literal ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span><span>]</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;currentIndex:&nbsp;-1</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>HistoryDispatchContext</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>createContext</span></span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>HistoryDispatch</span></span><span>&nbsp;</span><span class=\\\"keyword operator type ts\\\"><span>|</span></span><span>&nbsp;</span><span class=\\\"support type builtin ts\\\"><span>undefined</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"constant language undefined ts\\\"><span>undefined</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>historyReducer</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"variable parameter ts\\\"><span>state</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>IHistoryState</span></span></span><span class=\\\"punctuation separator parameter ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>action</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Action</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-expression expr ts\\\"><span class=\\\"keyword control switch ts\\\"><span>switch</span></span><span>&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other object ts\\\"><span>action</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"support variable property dom ts\\\"><span>type</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"switch-block expr ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"case-clause expr ts\\\"><span class=\\\"keyword control switch ts\\\"><span>case</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>PUSH</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span><span class=\\\"punctuation definition section case-statement ts\\\"><span>:</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta object member ts\\\"><span class=\\\"keyword operator spread ts\\\"><span>...</span></span><span class=\\\"variable other readwrite ts\\\"><span>state</span></span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta object member ts\\\"><span class=\\\"meta object-literal key ts\\\"><span>historyList</span></span><span class=\\\"meta object-literal key ts punctuation separator key-value ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"variable other object ts\\\"><span>state</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other object property ts\\\"><span>historyList</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"support function ts\\\"><span>concat</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"meta array literal ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span></span><span class=\\\"variable other object ts\\\"><span>action</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>historyItem</span></span><span class=\\\"meta brace square ts\\\"><span>]</span></span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;currentIndex:&nbsp;state.currentIndex&nbsp;+&nbsp;1</span></span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"case-clause expr ts\\\"><span class=\\\"keyword control switch ts\\\"><span>case</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>POP</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span><span class=\\\"punctuation definition section case-statement ts\\\"><span>:</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta object member ts\\\"><span class=\\\"keyword operator spread ts\\\"><span>...</span></span><span class=\\\"variable other readwrite ts\\\"><span>state</span></span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;currentIndex:&nbsp;state.currentIndex&nbsp;&lt;&nbsp;0&nbsp;?&nbsp;-1&nbsp;:&nbsp;state.currentIndex&nbsp;-&nbsp;1</span></span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"case-clause expr ts\\\"><span class=\\\"keyword control switch ts\\\"><span>default</span></span><span class=\\\"punctuation definition section case-statement ts\\\"><span>:</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>state</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"switch-statement expr ts\\\"><span class=\\\"switch-block expr ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>HistoryContextProvider</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"meta parameter object-binding-pattern ts\\\"><span class=\\\"punctuation definition binding-pattern object ts\\\"><span>{</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span class=\\\"meta parameter object-binding-pattern ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>children</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span class=\\\"meta parameter object-binding-pattern ts\\\"><span class=\\\"punctuation definition binding-pattern object ts\\\"><span>}</span></span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>HistoryContextProviderProps</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span class=\\\"meta array-binding-pattern-variable ts\\\"><span>&nbsp;</span><span class=\\\"punctuation definition binding-pattern array ts\\\"><span>[</span></span><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>historyState</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>dispatch</span></span><span class=\\\"punctuation definition binding-pattern array ts\\\"><span>]</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>useReducer</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>historyReducer</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta object member ts\\\"><span class=\\\"meta object-literal key ts\\\"><span>historyList</span></span><span class=\\\"meta object-literal key ts punctuation separator key-value ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"meta array literal ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span><span>]</span></span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;currentIndex:&nbsp;-1</span></span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"meta objectliteral ts\\\"><span class=\\\"meta object member ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&lt;</span></span><span class=\\\"variable other object ts\\\"><span>HistoryDispatchContext</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>Provider</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>value</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span class=\\\"meta object member ts\\\"><span class=\\\"variable other readwrite ts\\\"><span>dispatch</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&lt;</span></span><span class=\\\"variable other object ts\\\"><span>HistoryStateContext</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>Provider</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>value</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span class=\\\"meta object member ts\\\"><span class=\\\"variable other readwrite ts\\\"><span>historyState</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span class=\\\"meta object member ts\\\"><span class=\\\"variable other readwrite ts\\\"><span>children</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&lt;</span></span><span class=\\\"keyword operator arithmetic ts\\\"><span>/</span></span><span class=\\\"variable other object ts\\\"><span>HistoryStateContext</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>Provider</span></span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&lt;</span></span><span class=\\\"keyword operator arithmetic ts\\\"><span>/</span></span><span class=\\\"variable other object ts\\\"><span>HistoryDispatchContext</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>Provider</span></span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>useHistoryState</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>state</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>useContext</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>HistoryStateContext</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>state</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>useHistoryDispatch</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>dispatch</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>useContext</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>HistoryDispatchContext</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control conditional ts\\\"><span>if</span></span><span>&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"keyword operator logical ts\\\"><span>!</span></span><span class=\\\"variable other readwrite ts\\\"><span>dispatch</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"keyword control trycatch ts\\\"><span>throw</span></span><span>&nbsp;</span><span class=\\\"new expr ts\\\"><span class=\\\"keyword operator new ts\\\"><span>new</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>Error</span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>HistoryDispatchContext&nbsp;value&nbsp;not&nbsp;found</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>dispatch</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div></pre>\\n<h2>1차 도전의 문제</h2>\\n<p>위 코드는 나름 잘 동작은 하였지만 제가 생각한대로 동작하지 않았습니다.</p>\\n<p>이유는 다음과 같았습니다.</p>\\n<p>currentIndex 도 마찬가지지만 이 history Context의 historyList 에 컴포넌트가 unmount 될시에 적제가 되도록 작성해 두었습니다.\\n그리곤 페이지 이동이 끝난 상태에서 historyList를 참고하도록 하였습니다.</p>\\n<p>하지만 Context의 상태 값을 변경 한다는 것은 Consumer 들이 다시 리 렌더링을 뜻하는 것이고, 마운트 될때 Context의 상태 변경 해둔 것이 마운트 된 이후에 historyList에 적용 과 리 렌더링이 되면서 예상과는 다르게 움직 였었습니다.</p>\\n<p>정리하면 다음과 같은 문제가 발생했습니다.</p>\\n<ul>\\n<li>불필요한 리 렌더링</li>\\n<li>2번 리렌더링 (페이지 이동 + Context 상태변경)이 되면서 같은 페이지에서 다른 history를 참고 하고 있음</li>\\n</ul>\\n<h2>2차 도전 (static store + Context)</h2>\\n<p>1차 문제를 해결하기 위해서 Context 상태 변경에 의한 렌더링을 피해야만 된다는 생각을 했습니다.</p>\\n<p>그래서 history store를 <strong>유일한 객체</strong>로 만들어야 겠다는 생각을 했고, 이 객체가 변해도 React가 반응하지 않아야 되도록 별도의 store를 만들었습니다.</p>\\n<p>또한 이 history store 의 메서드와 프로퍼티들을 props로 타고 내려 보내는 것이 아닌 필요한 곳에 쉽게 사용할 수 있도록 Context를 혼합 했습니다.</p>\\n<p>다음은 history store 객체 입니다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type interface ts\\\"><span>interface</span></span><span>&nbsp;</span><span class=\\\"entity name type interface ts\\\"><span>IHistoryItem</span></span><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>preItemsCount</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>number</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>scrollTop</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>number</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>pageName</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>string</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta interface ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"storage type class ts\\\"><span>class</span></span><span>&nbsp;</span><span class=\\\"entity name type class ts\\\"><span>HistoryStore</span></span><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>historyList</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>IHistoryItem</span></span><span class=\\\"meta type tuple ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span><span>]</span></span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;currentIndex:&nbsp;number;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta method declaration ts\\\"><span class=\\\"storage type ts\\\"><span>constructor</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"variable language this ts\\\"><span>this</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>historyList</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta array literal ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span><span>]</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;this.currentIndex&nbsp;=&nbsp;-1;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;get&nbsp;currentHistory()&nbsp;{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;if&nbsp;(this.currentIndex&nbsp;&lt;&nbsp;0)&nbsp;{</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;null;</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;}</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;&nbsp;&nbsp;return&nbsp;this.historyList[this.currentIndex&nbsp;-&nbsp;1];</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;}</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta definition method ts entity name function ts\\\"><span>getRecentPageHistory</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"variable parameter ts\\\"><span>pageName</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>string</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>matchPageNameHistoryList</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"variable language this ts\\\"><span>this</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other object property ts\\\"><span>historyList</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"entity name function ts\\\"><span>filter</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta var expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta arrow ts\\\"><span class=\\\"variable parameter ts\\\"><span>history</span></span><span>&nbsp;</span><span class=\\\"storage type function arrow ts\\\"><span>=&gt;</span></span><span>&nbsp;</span></span><span class=\\\"variable other object ts\\\"><span>history</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>pageName</span></span><span>&nbsp;</span><span class=\\\"keyword operator comparison ts\\\"><span>===</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>pageName</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta var expr ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control conditional ts\\\"><span>if</span></span><span>&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other object ts\\\"><span>matchPageNameHistoryList</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"support variable property ts\\\"><span>length</span></span><span>&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span><span>&nbsp;</span><span class=\\\"keyword operator arithmetic ts\\\"><span>-</span></span><span class=\\\"constant numeric decimal ts\\\"><span>1</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>matchPageNameHistoryList</span></span><span class=\\\"meta array literal ts\\\"><span class=\\\"meta brace square ts\\\"><span>[</span></span><span class=\\\"variable other object ts\\\"><span>matchPageNameHistoryList</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"support variable property ts\\\"><span>length</span></span><span>&nbsp;</span><span class=\\\"keyword operator arithmetic ts\\\"><span>-</span></span><span>&nbsp;</span><span class=\\\"constant numeric decimal ts\\\"><span>1</span></span><span class=\\\"meta brace square ts\\\"><span>]</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"constant language null ts\\\"><span>null</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta definition method ts entity name function ts\\\"><span>isMatchPageNameHistory</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"variable parameter ts\\\"><span>pageName</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"support type primitive ts\\\"><span>string</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"variable language this ts\\\"><span>this</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other object property ts\\\"><span>historyList</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"entity name function ts\\\"><span>some</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"meta arrow ts\\\"><span class=\\\"variable parameter ts\\\"><span>history</span></span><span>&nbsp;</span><span class=\\\"storage type function arrow ts\\\"><span>=&gt;</span></span><span>&nbsp;</span></span><span class=\\\"variable other object ts\\\"><span>history</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>pageName</span></span><span>&nbsp;</span><span class=\\\"keyword operator comparison ts\\\"><span>===</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>pageName</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta definition method ts entity name function ts\\\"><span>pushHistory</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"variable parameter ts\\\"><span>historyItem</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>IHistoryItem</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"variable language this ts\\\"><span>this</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other object property ts\\\"><span>historyList</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"support function ts\\\"><span>push</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>historyItem</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation whitespace comment leading ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class=\\\"comment line double-slash ts\\\"><span class=\\\"punctuation definition comment ts\\\"><span>//</span></span><span>&nbsp;this.currentIndex&nbsp;=&nbsp;this.currentIndex&nbsp;+&nbsp;1;</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"meta method declaration ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta class ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta export default ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"keyword control default ts\\\"><span>default</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>HistoryStore</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div></pre>\\n<p>초반에는 <code>currentIndex</code> 를 두어서 위에서 했던 것처럼 컴포넌트들이 어떤 히스토리를 봐야 하는지 알려주는 지표로써 사용을 하려고 했지만 후반부에는 그것 보다는 현재 접속한 pageName에서 historyList 에서 일치된 가장 최근 pageName의 history를 빼와서 적용하도록 하였습니다.</p>\\n<p>다음은 이런 히스토리를 다양한 뎁스의 컴포넌트에서 사용할 수 있도록 Context를 수정하였습니다.</p>\\n<pre class=\\\"editor editor-colors\\\"><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta import ts\\\"><span class=\\\"keyword control import ts\\\"><span>import</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>React</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>createContext</span></span><span class=\\\"punctuation separator comma ts\\\"><span>,</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>useContext</span></span><span>&nbsp;</span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span>&nbsp;</span><span class=\\\"keyword control from ts\\\"><span>from</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>react</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta import ts\\\"><span class=\\\"keyword control import ts\\\"><span>import</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite alias ts\\\"><span>HistoryStore</span></span><span>&nbsp;</span><span class=\\\"keyword control from ts\\\"><span>from</span></span><span>&nbsp;</span><span class=\\\"string quoted double ts\\\"><span class=\\\"punctuation definition string begin ts\\\"><span>&quot;</span></span><span>staticStore/HistoryStore</span><span class=\\\"punctuation definition string end ts\\\"><span>&quot;</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"storage type type ts\\\"><span>type</span></span><span>&nbsp;</span><span class=\\\"entity name type alias ts\\\"><span>HistoryContextProviderProps</span></span><span>&nbsp;</span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta field declaration ts\\\"><span class=\\\"meta definition property ts variable object property ts\\\"><span>children</span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type module ts\\\"><span>React</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"entity name type ts\\\"><span>ReactNode</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta type declaration ts\\\"><span class=\\\"meta object type ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>historyStore</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"new expr ts\\\"><span class=\\\"keyword operator new ts\\\"><span>new</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>HistoryStore</span></span><span class=\\\"meta brace round ts\\\"><span>(</span><span>)</span></span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>HistoryStateContext</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>createContext</span></span></span><span class=\\\"meta type parameters ts\\\"><span class=\\\"punctuation definition typeparameters begin ts\\\"><span>&lt;</span></span><span class=\\\"entity name type ts\\\"><span>HistoryStore</span></span><span class=\\\"punctuation definition typeparameters end ts\\\"><span>&gt;</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>historyStore</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>HistoryContextProvider</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"meta parameter object-binding-pattern ts\\\"><span class=\\\"punctuation definition binding-pattern object ts\\\"><span>{</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span class=\\\"meta parameter object-binding-pattern ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"variable parameter ts\\\"><span>children</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta parameters ts\\\"><span class=\\\"meta parameter object-binding-pattern ts\\\"><span class=\\\"punctuation definition binding-pattern object ts\\\"><span>}</span></span></span><span class=\\\"meta type annotation ts\\\"><span class=\\\"keyword operator type annotation ts\\\"><span>:</span></span><span>&nbsp;</span><span class=\\\"entity name type ts\\\"><span>HistoryContextProviderProps</span></span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>(</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&lt;</span></span><span class=\\\"variable other object ts\\\"><span>HistoryStateContext</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>Provider</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>value</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span class=\\\"meta object member ts\\\"><span class=\\\"variable other readwrite ts\\\"><span>historyStore</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"meta objectliteral ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span><span class=\\\"meta object member ts\\\"><span class=\\\"variable other readwrite ts\\\"><span>children</span></span></span><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\\\"keyword operator relational ts\\\"><span>&lt;</span></span><span class=\\\"keyword operator arithmetic ts\\\"><span>/</span></span><span class=\\\"variable other object ts\\\"><span>HistoryStateContext</span></span><span class=\\\"punctuation accessor ts\\\"><span>.</span></span><span class=\\\"variable other property ts\\\"><span>Provider</span></span><span class=\\\"keyword operator relational ts\\\"><span>&gt;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta brace round ts\\\"><span>)</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span>&nbsp;</span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"keyword control export ts\\\"><span>export</span></span><span>&nbsp;</span><span class=\\\"storage type function ts\\\"><span>function</span></span><span>&nbsp;</span><span class=\\\"meta definition function ts entity name function ts\\\"><span>useHistoryStore</span></span><span class=\\\"meta parameters ts\\\"><span class=\\\"punctuation definition parameters begin ts\\\"><span>(</span></span><span class=\\\"punctuation definition parameters end ts\\\"><span>)</span></span></span><span>&nbsp;</span><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>{</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"meta var expr ts\\\"><span class=\\\"storage type ts\\\"><span>const</span></span><span>&nbsp;</span><span class=\\\"meta var-single-variable expr ts\\\"><span class=\\\"meta definition variable ts variable other readwrite ts\\\"><span>state</span></span><span>&nbsp;</span></span><span class=\\\"keyword operator assignment ts\\\"><span>=</span></span><span>&nbsp;</span><span class=\\\"meta function-call ts\\\"><span class=\\\"entity name function ts\\\"><span>useContext</span></span></span><span class=\\\"meta brace round ts\\\"><span>(</span></span><span class=\\\"variable other readwrite ts\\\"><span>HistoryStateContext</span></span><span class=\\\"meta brace round ts\\\"><span>)</span></span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span>&nbsp;&nbsp;</span><span class=\\\"keyword control flow ts\\\"><span>return</span></span><span>&nbsp;</span><span class=\\\"variable other readwrite ts\\\"><span>state</span></span><span class=\\\"punctuation terminator statement ts\\\"><span>;</span></span></span></span></span></div><div class=\\\"line\\\"><span class=\\\"source ts\\\"><span class=\\\"meta function ts\\\"><span class=\\\"meta block ts\\\"><span class=\\\"punctuation definition block ts\\\"><span>}</span></span></span></span></span></div></pre>\\n<p>Context는 훨씬 간단해 졌습니다.</p>\\n<h2>정리</h2>\\n<p>생각을 하다하다 몇번의 도전만에 예상대로 움직이긴 했습니다. 이 방법 말고도 React SPA에서 react-router-dom의 location props의 state를 이용해볼까도 생각했지만 복잡한 state를 location에 다루기에는 투머치(?) 한 생각이 들어서 따로 빼는 방식을 생각해보았습니다.</p>\\n<p>추가적으로 다른 방식들이 있는지 고민을 추가적으로 해보아야 겠습니다.</p>\",\"frontmatter\":{\"title\":\"React 뒤로가기 시 이전 상태 유지를 위한 history\",\"date\":\"April 04, 2020\"}}},\"pathContext\":{\"slug\":\"/react-history/\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/react-history.json\n// module id = 534\n// module chunks = 209797577918347"],"sourceRoot":""}