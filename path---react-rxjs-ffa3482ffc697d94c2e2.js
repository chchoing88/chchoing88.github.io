webpackJsonp([0x79df96e982a4],{519:function(s,n){s.exports={data:{site:{siteMetadata:{title:"Merlin Tec Blog",author:"merlin.ho"}},markdownRemark:{id:"/Users/merlin.ho/Documents/workspace/ho_blog/gatsby-blog/src/pages/react-rxjs/index.md absPath of file >>> MarkdownRemark",html:'<h2>동기</h2>\n<ul>\n<li>react와 rxjs를 함께 사용할 때 어떻게 사용 할 수 있을까?</li>\n</ul>\n<h2>React 컴포넌트를 update 할 수 있는 트리거들</h2>\n<ul>\n<li>function Component 의 hooks (useState, useEffect, useReducer 등등..)</li>\n<li>class Component 의 setState 메서드</li>\n<li>forceUpdate() 메서드</li>\n</ul>\n<h2>React hooks 역할</h2>\n<ul>\n<li>상태값의 저장</li>\n<li>component의 lifecycle에 대한 반응</li>\n<li>상태 변화에 따른 재 렌더링 유발</li>\n</ul>\n<h2>RxJS의 Subject</h2>\n<ul>\n<li><code>Subject</code> 는 <code>EventEmitter</code> 와 같다.</li>\n<li>여러 관찰자에게 멀티 캐스팅 하는 유일한 방법.</li>\n<li><code>Subject</code> 는 <code>observable</code> 이고 <code>observer</code> 다.</li>\n<li><code>Subject</code> 는 <code>observable</code> 과 많은 <code>observer</code> 들 사이에서 bridge/proxy 형태로 행동할수 있다.</li>\n<li>이 행동은 다수의 <code>observer</code> 들에게 같은 <code>observable</code> 실행을 공유 할수가 있다.</li>\n<li>뒤 늦게 <code>subscribe</code> 를 하면 가장 최근 방출된 값을 가져올 수 있다.</li>\n</ul>\n<h2>store를 외부로 따로 관리할 경우</h2>\n<h3>data의 흐름</h3>\n<ul>\n<li>전역에서 필요한 <code>state</code>는 외부에서 관리한다.</li>\n<li>이 <code>state</code>가 변하는걸 알리기 위해 <code>Observable</code>로 만들어 준다. (<code>BehaviorSubject</code>)</li>\n<li>관찰이 필요한 react function Component에서는 <code>BehaviorSubject</code>(이때는 <code>Observable</code> 역할) 값을 구독하고 해당 값을 <code>useState</code>로 관리한다. ( 이를 도와줄 custom Hooks를 만든다. : <code>useObservable</code> )</li>\n<li><code>state</code>가 새롭게 바뀌었을 때 <code>setState</code> 로 <code>useState</code>의 <code>state</code> 변경함으로써 react function Component 에서 업데이트가 발생 되게 된다. </li>\n<li>전역 <code>state</code> 값을 바꾸기 위해서는 <code>BehaviorSubject</code>(이때는 <code>Observer</code> 역할) 값을 가지고 <code>next(value)</code> 메서드를 호출한다.</li>\n</ul>\n<h3>예시 코드</h3>\n<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;hooks&nbsp;(useObservable)</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="punctuation definition modules begin js"><span>{</span></span><span>&nbsp;</span><span class="variable other module js"><span>useState</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other module js"><span>useEffect</span></span><span>&nbsp;</span><span class="punctuation definition modules end js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>react</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="variable language import-all js"><span>*</span></span><span>&nbsp;</span><span class="keyword control js"><span>as</span></span><span>&nbsp;</span><span class="variable other module-alias js"><span>Rx</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>rxjs</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;useObservable&lt;T&gt;</span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>observable</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>Rx</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>Observable</span></span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="constant other js"><span>T</span></span><span class="keyword operator comparison js"><span>&gt;</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="constant other js"><span>state</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant other js"><span>setState</span></span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>useState</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>useEffect</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>sub</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>observable</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>subscribe</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>setState</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="variable other object js"><span>sub</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>unsubscribe</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span>observable</span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;state</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;종료&nbsp;시점,&nbsp;pipe,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta export js"><span class="keyword control js"><span>export</span></span><span>&nbsp;</span><span class="variable language default js"><span>default</span></span><span>&nbsp;</span><span class="variable other module js"><span>useObservable</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>\n<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;store</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="punctuation definition modules begin js"><span>{</span></span><span>&nbsp;</span><span class="variable other module js"><span>ITodoItem</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable other module js"><span>ITodoStore</span></span><span>&nbsp;</span><span class="punctuation definition modules end js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>../types</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="punctuation definition modules begin js"><span>{</span></span><span>&nbsp;</span><span class="variable other module js"><span>BehaviorSubject</span></span><span>&nbsp;</span><span class="punctuation definition modules end js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>rxjs</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta class js"><span class="storage type class js"><span>class</span></span><span>&nbsp;</span><span class="entity name type class js"><span>TodoItem</span></span></span><span>&nbsp;</span><span class="storage modifier js"><span>implements</span></span><span>&nbsp;ITodoItem&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;todo</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;string</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;isActive</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;boolean</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function js"><span class="entity name function constructor js"><span>constructor</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>todo</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>string</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>isActive</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>boolean</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>todo</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;todo</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>isActive</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;isActive</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta class js"><span class="storage type class js"><span>class</span></span><span>&nbsp;</span><span class="entity name type class js"><span>TodoStore</span></span></span><span>&nbsp;</span><span class="storage modifier js"><span>implements</span></span><span>&nbsp;ITodoStore&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;todoList$</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;BehaviorSubject</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>ITodoItem</span><span class="meta brace square js"><span>[</span><span>]</span></span><span class="keyword operator comparison js"><span>&gt;</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function js"><span class="entity name function constructor js"><span>constructor</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>todoList</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>ITodoItem</span></span><span class="meta brace square js"><span>[</span><span>]</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>todoList$</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor js"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>BehaviorSubject</span></span></span><span class="meta brace round js"><span>(</span></span><span>todoList</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;action</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function arrow js"><span class="entity name function js"><span>addTodo</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;todo</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;isActive&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>ITodoItem</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newTodo</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor js"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>TodoItem</span></span></span><span class="meta brace round js"><span>(</span></span><span>todo</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;isActive</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>newTodoList</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="keyword operator spread js"><span>...</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>todoList$</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>value</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;newTodo</span><span class="meta brace square js"><span>]</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>todoList$</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>next</span></span><span class="meta brace round js"><span>(</span></span><span>newTodoList</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span>TODO_LIST</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant other js"><span>ITodoItem</span></span><span class="meta brace square js"><span>[</span><span>]</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;todo</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>typescript&nbsp;학습하기</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;isActive</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace square js"><span>]</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span>todoStore</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant other js"><span>ITodoStore</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor js"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>TodoStore</span></span></span><span class="meta brace round js"><span>(</span></span><span class="constant other js"><span>TODO_LIST</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta export js"><span class="keyword control js"><span>export</span></span><span>&nbsp;</span><span class="variable language default js"><span>default</span></span><span>&nbsp;</span><span class="variable other module js"><span>todoStore</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>\n<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;react&nbsp;function&nbsp;component</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Todo</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="variable other module js"><span>React</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>react</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="variable other module js"><span>TodoList</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>./TodoList</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="variable other module js"><span>useObservable</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>../hooks/useObservable</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="variable other module js"><span>todoStore</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>../store/TodoStore</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="punctuation definition modules begin js"><span>{</span></span><span>&nbsp;</span><span class="variable other module js"><span>ITodoItem</span></span><span>&nbsp;</span><span class="punctuation definition modules end js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>../types</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>Todo</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>todoList</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;useObservable</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>ITodoItem</span><span class="meta brace square js"><span>[</span><span>]</span></span><span class="keyword operator comparison js"><span>&gt;</span></span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>todoStore</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>todoList$</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>TodoList&nbsp;todoList</span><span class="keyword operator assignment js"><span>=</span></span><span class="meta brace curly js"><span>{</span></span><span>todoList</span><span class="meta brace curly js"><span>}</span></span><span class="keyword operator comparison js"><span>&gt;</span><span>&lt;</span></span><span class="keyword operator js"><span>/</span></span><span>TodoList</span><span class="keyword operator comparison js"><span>&gt;</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta export js"><span class="keyword control js"><span>export</span></span><span>&nbsp;</span><span class="variable language default js"><span>default</span></span><span>&nbsp;</span><span class="variable other module js"><span>Todo</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>\n<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;TodoList</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="variable other module js"><span>React</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>react</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="variable other module js"><span>TodoItem</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>./TodoItem</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="punctuation definition modules begin js"><span>{</span></span><span>&nbsp;</span><span class="variable other module js"><span>ITodoItem</span></span><span>&nbsp;</span><span class="punctuation definition modules end js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>../types</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>type&nbsp;TodoListProps&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;todoList</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;ITodoItem</span><span class="meta brace square js"><span>[</span><span>]</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>TodoList</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;todoList&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>TodoListProps</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>ul</span><span class="keyword operator comparison js"><span>&gt;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span class="variable other object js"><span>todoList</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>map</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>todoItem</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>ITodoItem</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>TodoItem&nbsp;key</span><span class="keyword operator assignment js"><span>=</span></span><span class="meta brace curly js"><span>{</span></span><span class="variable other object js"><span>todoItem</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>todo</span></span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;todoItem</span><span class="keyword operator assignment js"><span>=</span></span><span class="meta brace curly js"><span>{</span></span><span>todoItem</span><span class="meta brace curly js"><span>}</span></span><span class="keyword operator comparison js"><span>&gt;</span><span>&lt;</span></span><span class="keyword operator js"><span>/</span></span><span>TodoItem</span><span class="keyword operator comparison js"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace round js"><span>)</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="keyword operator js"><span>/</span></span><span>ul</span><span class="keyword operator comparison js"><span>&gt;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>TodoList</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>defaultProps</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;todoList</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span><span>]</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta export js"><span class="keyword control js"><span>export</span></span><span>&nbsp;</span><span class="variable language default js"><span>default</span></span><span>&nbsp;</span><span class="variable other module js"><span>TodoList</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>\n<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;TodoItem</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="variable other module js"><span>React</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>react</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span>&nbsp;</span><span class="punctuation definition modules begin js"><span>{</span></span><span>&nbsp;</span><span class="variable other module js"><span>ITodoItem</span></span><span>&nbsp;</span><span class="punctuation definition modules end js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>from</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>../types</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>type&nbsp;TodoItemProps&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;todoItem</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;ITodoItem</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>TodoItem</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;todoItem&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>TodoItemProps</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>li</span><span class="keyword operator comparison js"><span>&gt;</span></span><span class="meta brace curly js"><span>{</span></span><span class="variable other object js"><span>todoItem</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>todo</span></span><span class="meta brace curly js"><span>}</span></span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="keyword operator js"><span>/</span></span><span>li</span><span class="keyword operator comparison js"><span>&gt;</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta export js"><span class="keyword control js"><span>export</span></span><span>&nbsp;</span><span class="variable language default js"><span>default</span></span><span>&nbsp;</span><span class="variable other module js"><span>TodoItem</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>\n<h2>store를 외부로 따로 두지 않고 hooks로 관리 할 경우</h2>\n<h3>React hooks 규칙</h3>\n<p>상태를 저장하는 custom hooks 을 만들 경우 내부에는 rxjs 코드가 없도록 유지합니다. 이유는 이런 hooks들은 rxjs의 디펜던시를 두지 않고 재 사용성을 특징으로 만들기 위함입니다.</p>\n<p>대신 rxjs를 다뤄야 하는 custom hooks는 따로 만듭니다.</p>\n<h3>rxjs 역할</h3>\n<ul>\n<li>hooks에 저장된 상태에 따른 비동기 처리와 같은 side effect(부수효과) 처리 로직\nex) API 호출, location 허용</li>\n</ul>\n<h3>side effect를 rxjs로 다룰때의 장점</h3>\n<ul>\n<li>\n<p>언제 발생될지 모르는 데이터 또는 연속된 데이터 스트림을 다루기에 용이\nex) 연속된 같은 API 호출에서 가장 최신 호출의 데이터를 가져와서 view에 반영</p>\n</li>\n<li>\n<p>여러 side effect를 모아서 일괄 처리에 용이\nex) 여러 API 호출의 응답이 다 모였을 때 view 반영 및 에러처리</p>\n</li>\n</ul>\n<h3>예시 코드</h3>\n<pre class="editor editor-colors"><div class="line"><span class="text plain null-grammar"><span>//&nbsp;useTab.ts</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>import&nbsp;{&nbsp;useState,&nbsp;useCallback,&nbsp;useMemo&nbsp;}&nbsp;from&nbsp;&quot;react&quot;;</span></span></div><div class="line"><span class="text plain null-grammar"><span>import&nbsp;{&nbsp;ITabItem&nbsp;}&nbsp;from&nbsp;&quot;types&quot;;</span></span></div><div class="line"><span class="text plain null-grammar"><span>import&nbsp;{&nbsp;setActiveByID&nbsp;}&nbsp;from&nbsp;&quot;utils&quot;;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>function&nbsp;useTab&lt;T&gt;(tabDataList:&nbsp;ITabItem&lt;T&gt;[])&nbsp;{</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;const&nbsp;[tabList,&nbsp;setTabList]&nbsp;=&nbsp;useState&lt;ITabItem&lt;T&gt;[]&gt;(tabDataList);</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;//&nbsp;Computed&nbsp;한&nbsp;값</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;//&nbsp;현재&nbsp;탭&nbsp;객체</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;const&nbsp;currentTabData&nbsp;=&nbsp;useMemo(()&nbsp;=&gt;&nbsp;{</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;activeIndex&nbsp;=&nbsp;tabList.findIndex(tabData&nbsp;=&gt;&nbsp;tabData.isActive);</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tabList[activeIndex];</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;},&nbsp;[tabList]);</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;//&nbsp;탭&nbsp;눌렀을때</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;const&nbsp;onHandleTabClick&nbsp;=&nbsp;useCallback(</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;(tabId:&nbsp;T):&nbsp;void&nbsp;=&gt;&nbsp;{</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(currentTabData.id&nbsp;!==&nbsp;tabId)&nbsp;{</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTabList(setActiveByID&lt;ITabItem&lt;T&gt;,&nbsp;T&gt;(tabId));</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;},</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;[currentTabData]</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;);</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;return&nbsp;{</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;currentTabData,</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;tabList,</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;onHandleTabClick</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;};</span></span></div><div class="line"><span class="text plain null-grammar"><span>}</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>export&nbsp;default&nbsp;useTab;</span></span></div></pre>\n<pre class="editor editor-colors"><div class="line"><span class="text plain null-grammar"><span>//&nbsp;useApiObservable.ts</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>import&nbsp;{&nbsp;useState,&nbsp;useEffect,&nbsp;useRef&nbsp;}&nbsp;from&nbsp;&quot;react&quot;;</span></span></div><div class="line"><span class="text plain null-grammar"><span>import&nbsp;{&nbsp;Observable,&nbsp;Subject&nbsp;}&nbsp;from&nbsp;&quot;rxjs&quot;;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>import&nbsp;{&nbsp;switchMap,&nbsp;tap,&nbsp;filter&nbsp;}&nbsp;from&nbsp;&quot;rxjs/operators&quot;;</span></span></div><div class="line"><span class="text plain null-grammar"><span>import&nbsp;{&nbsp;IAPIResponse&nbsp;}&nbsp;from&nbsp;&quot;types&quot;;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>function&nbsp;useApiObservable&lt;T&gt;(</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;api$:&nbsp;(value:&nbsp;T)&nbsp;=&gt;&nbsp;Observable&lt;IAPIResponse&gt;</span></span></div><div class="line"><span class="text plain null-grammar"><span>):&nbsp;[IAPIResponse,&nbsp;Subject&lt;T&gt;]&nbsp;{</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;const&nbsp;[state,&nbsp;setState]&nbsp;=&nbsp;useState&lt;IAPIResponse&gt;({</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;success:&nbsp;null,</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;error:&nbsp;null,</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;isLoading:&nbsp;false</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;});</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;const&nbsp;{&nbsp;current:&nbsp;subject$&nbsp;}&nbsp;=&nbsp;useRef(new&nbsp;Subject&lt;T&gt;());</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;useEffect(()&nbsp;=&gt;&nbsp;{</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;sub&nbsp;=&nbsp;subject$</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.pipe(</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filter(triggerData&nbsp;=&gt;&nbsp;triggerData&nbsp;!==&nbsp;null),</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tap(_&nbsp;=&gt;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setState(beforeState&nbsp;=&gt;&nbsp;({</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success:&nbsp;beforeState.success,</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error:&nbsp;beforeState.error,</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isLoading:&nbsp;true</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}))</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switchMap(value&nbsp;=&gt;&nbsp;api$(value))</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.subscribe(setState);</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;()&nbsp;=&gt;&nbsp;sub.unsubscribe();</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;},&nbsp;[subject$,&nbsp;api$]);</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;//&nbsp;return&nbsp;{&nbsp;...state,&nbsp;subject$&nbsp;};</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;return&nbsp;[state,&nbsp;subject$];</span></span></div><div class="line"><span class="text plain null-grammar"><span>}</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>export&nbsp;default&nbsp;useApiObservable;</span></span></div></pre>\n<pre class="editor editor-colors"><div class="line"><span class="text plain null-grammar"><span>//&nbsp;사용</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;const&nbsp;{&nbsp;tabList,&nbsp;onHandleTabClick,&nbsp;currentTabData&nbsp;}&nbsp;=&nbsp;useTab(</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;TAB_OCCUPANCY_LIST</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;);</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;const&nbsp;[occupancyState,&nbsp;subject$]&nbsp;=&nbsp;useApiObservable&lt;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;IOccupancyApiFetchParameter</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&gt;(occupancyApi.fetch);</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;//&nbsp;currentTabData가&nbsp;변경&nbsp;되었을&nbsp;때&nbsp;api&nbsp;스트림에&nbsp;값&nbsp;방출</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;useEffect(()&nbsp;=&gt;&nbsp;{</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;subject$.next({</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;currentTabData.id</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;&nbsp;&nbsp;});</span></span></div><div class="line"><span class="text plain null-grammar"><span>&nbsp;&nbsp;},&nbsp;[subject$,&nbsp;currentTabData]);</span></span></div></pre>\n<h2>추가적으로 고려해야 할 점</h2>\n<ul>\n<li>다양한 종류의 rxjs 의 operation 조합을 pipe로 따로 관리하자.</li>\n<li>어느 때고 필요하다면 구독을 취소 시킬 수 있어야 한다.</li>\n</ul>\n<h2>참고</h2>\n<ul>\n<li><a href="https://www.bitovi.com/blog/rxjs-with-react-pt-1">https://www.bitovi.com/blog/rxjs-with-react-pt-1</a></li>\n</ul>\n<h2>전체 코드 (store 외부에 두었을 때만)</h2>\n<ul>\n<li><a href="https://github.com/chchoing88/ts-react">https://github.com/chchoing88/ts-react</a></li>\n</ul>',
frontmatter:{title:"React with RxJS",date:"January 14, 2020"}}},pathContext:{slug:"/react-rxjs/"}}}});
//# sourceMappingURL=path---react-rxjs-ffa3482ffc697d94c2e2.js.map