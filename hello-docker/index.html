<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/ho_blog/component---src-layouts-index-js-8942bbec5cb4b3661487.js" as="script"/><link rel="preload" href="/ho_blog/component---src-templates-blog-post-js-4624a2f68986d7fc5adc.js" as="script"/><link rel="preload" href="/ho_blog/path---hello-docker-5845877de969a475f912.js" as="script"/><link rel="preload" href="/ho_blog/app-8cc73acb68dd12ad02e7.js" as="script"/><link rel="preload" href="/ho_blog/commons-89d60b5b924ef4c6771c.js" as="script"/><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-8cc73acb68dd12ad02e7.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-4624a2f68986d7fc5adc.js","35783957827783":"component---src-pages-index-js-ab4a4b17d62aaa99181a.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","55049869895717":"path---hello-docker-5845877de969a475f912.js","142629428675168":"path---index-bbbc5c37d25ce308fdc4.js","114276838955818":"component---src-layouts-index-js-8942bbec5cb4b3661487.js"}/*]]>*/</script><style id="glamor-styles"></style><script id="glamor-ids">
        // <![CDATA[
        window._glamor = []
        // ]]>
        </script><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">Hello Docker | Merlin Tec Blog</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75em 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Source Sans Pro', 'Helvetica Neue', Arial, sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><link href="//fonts.googleapis.com/css?family=Montserrat:700|Merriweather:400,400i,700,700i,900,900i" rel="stylesheet" type="text/css"/><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/ho_blog/commons-89d60b5b924ef4c6771c.js","/ho_blog/app-8cc73acb68dd12ad02e7.js","/ho_blog/path---hello-docker-5845877de969a475f912.js","/ho_blog/component---src-templates-blog-post-js-4624a2f68986d7fc5adc.js","/ho_blog/component---src-layouts-index-js-8942bbec5cb4b3661487.js"])/*]]>*/</script><style id="gatsby-inlined-css">code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#073642}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/ho_blog/static/montserrat-latin-100.50d27986.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-100.5e334eff.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/ho_blog/static/montserrat-latin-100italic.8c070533.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-100italic.03e19243.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/ho_blog/static/montserrat-latin-200.4343d3d9.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-200.f2022ecd.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/ho_blog/static/montserrat-latin-200italic.116c4c4b.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-200italic.89614a60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/ho_blog/static/montserrat-latin-300.d2ad295b.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-300.3a371ee0.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/ho_blog/static/montserrat-latin-300italic.f6b6bf24.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-300italic.16521668.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/ho_blog/static/montserrat-latin-400.240a8444.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-400.b20cc131.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/ho_blog/static/montserrat-latin-400italic.86172bb8.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-400italic.9405e787.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/ho_blog/static/montserrat-latin-500.fb8d6b71.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-500.50825d47.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/ho_blog/static/montserrat-latin-500italic.c0a555a4.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-500italic.635de59c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/ho_blog/static/montserrat-latin-600.d5615136.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-600.f300da4f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/ho_blog/static/montserrat-latin-600italic.10f29d13.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-600italic.2bc37d86.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/ho_blog/static/montserrat-latin-700.7d77e1f0.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-700.81826529.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/ho_blog/static/montserrat-latin-700italic.1dd2b53f.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-700italic.c162d257.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/ho_blog/static/montserrat-latin-800.d4e7bf86.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-800.895aadbf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/ho_blog/static/montserrat-latin-800italic.fc0cbe44.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-800italic.b3362875.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/ho_blog/static/montserrat-latin-900.c8bdd772.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-900.1b99ef78.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/ho_blog/static/montserrat-latin-900italic.cb72c1f9.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-900italic.b78bb9f8.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/ho_blog/static/merriweather-latin-300.f015f1e9.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-300.92dfe81b.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/ho_blog/static/merriweather-latin-300italic.7fd86b32.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-300italic.878b76f5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/ho_blog/static/merriweather-latin-400.12dbf4c0.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-400.1fffad22.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/ho_blog/static/merriweather-latin-400italic.1e0d3e81.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-400italic.de18d4c4.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/ho_blog/static/merriweather-latin-700.dc8fec81.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-700.d7d2ed8e.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/ho_blog/static/merriweather-latin-700italic.b7b7e5da.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-700italic.6210a5fc.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/ho_blog/static/merriweather-latin-900.43f870d5.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-900.8f3806df.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/ho_blog/static/merriweather-latin-900italic.168c1ab2.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-900italic.ae7778f0.woff) format("woff")}</style></head><body><div id="___gatsby"><div style="max-width:42rem;margin-left:auto;margin-right:auto;padding:2.625rem 1.3125rem;" data-reactroot="" data-reactid="1" data-react-checksum="-1121397566"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:-1.75rem;" data-reactid="2"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/ho_blog/" data-reactid="3">Merlin Tec Blog</a></h3><div data-reactid="4"><!-- react-empty: 5 --><h1 data-reactid="6">Hello Docker</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem;" data-reactid="7">January 09, 2018</p><div data-reactid="8"><h2>Docker term</h2>
<h3>What is Docker?</h3>
<ul>
<li>소프트웨어를 containerization(컨테이너화) 한 플랫폼. ( 웹서비스 컨테이너 , 디비 컨테이너 따로 담는다고 하면 서로 isolation 화 할수 있고 서로 독립적인 공간을 가질수 있다. 서로에게 영향을 주지 않을수 있다. )</li>
<li>containerization 란 컨테이너를 매체로 한 수송체계, 즉. 컨테이너 규격을 맞춰 놓으면 차 , 배 , 비행기등 더 쉽고 빠르게 대량 수송과 시간을 단축 시킬수 있다. 라는 장점을 지니고 있음.</li>
<li>이걸로 유추해볼 때 도커는 다양한 SW들을 컨테이너에 담아 이동하기가 쉽게하고 포터블하게 만들수있는 플랫폼.</li>
<li>리눅스의 응용프로그램들을 소프트웨어 컨테이너 안에 배치시키는 일을 자동화 하는 오픈소스</li>
</ul>
<h3>What is Container?</h3>
<ul>
<li>개발 , 배포 , 운용 등을 위해 표준화된 단위로 구성된 소프트웨어 패키지화 </li>
<li>호스트 pc의 커널을 공유하면서 SW가 돌아갈수 있는 모든 구성들이 들어가있다. 대신, 불필요한 것들은 들어있지 않다.</li>
<li>해당 도커 이미지를 run 시키면 해당 SW가 돌아가는데 그 상태를 컨테이너 라고 한다.
일종의 프로세스와 유사한 개념이다.</li>
<li>이 해당 컨테이너 내부 환경을 정의하는 파일은 dockerfile 이다.</li>
<li>나머지 시스템으로 부터 완전히 독립된 공간을 갖는다. 그래서 밖으로 통신하기 위해선 포트를 맵핑해야 한다.</li>
</ul>
<h3>What is Service?</h3>
<ul>
<li>서비스는 app의 한 부분이다. 예를 들어 비디오를 공유하는 사이트는 데이타 베이스에 app data를 저장하는 서비스, 비디오 업로드 후 transcoding 하는 서비스 등등..</li>
<li>서비스들은 실제로 production의 컨테이너들로 구성된다.</li>
<li>하나의 서비스는 하나의 이미지만 실행하지만 그 이미지를 실행하는 방법을 쳬계화 할 수 있습니다. 그 체계화는 docker-compose.yml 파일에서 설정 할 수 있다. </li>
<li>docker-compose.yml 파일에서는 어떤 포트를 사용해야하는지, 서비스가 가져가야 할 필요한 용량에 따라 얼마나 많은 복제 컨테이너를 실행시켜야 하는지, 서비스를 위해 얼마나 컴퓨팅 리소스를 할당할지를 설정 할 수 있다.</li>
<li>docker-compose.yml 을 이용 하면 이미지를 일일이 다 run 시키지 않아도 된다. </li>
</ul>
<h3>What is Image?</h3>
<ul>
<li>도커 이미지란 서비스의 필요한 프로그램 , 라이브러리, 소스등을 설치한 뒤에 이를 파일로 만든 것이다. 쉽게 실행파일이라고 생각하면 된다.</li>
<li>이미지를 만들기위해 dockerfile에 필요한 명령들을 설정해 놓는다.</li>
<li>이미지는 base image 와 parent image 로 나뉜다.</li>
<li>base image 는 parent image가 없는 이미지를 말한다.</li>
<li>parent image 는 사용하는 이미지의 Dockerfile 내에 FROM 으로 지시되는 이미지이다. 만약 Dockerfile 내에 FROM 이 지시되어있지 않다면 부모 이미지가 없는것이고 이는 곧 base image 가 된다.</li>
<li>Dockerfile로 이미지를 만들때는 전에 만들었던 이미지 캐시를 잘 이용해야 한다. 기존 방식은 한줄 한줄 실행하면서 <br><b>임시 컨테이너 생성 > 명령어 수행 > 이미지 저장 > 임시 컨테이너 삭제 > 새로 만든 이미지 기반 임시 컨테이너 생성 > 명령어 수행 > 이미지로 저장 > 임시 컨테이너 삭제…</b> 이런식으로 수행…</li>
</ul>
<p>----> {해쉬아이디} : 이미지 저장 <br>
----> Running in {해쉬아이디} : 명령어를 수행하기 위해 그 전 이미지 기반으로 임시 컨테이너 생성</p>
<p>&#x3C; 처음 Dockerfile 돌렸을때 ></p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/img_build_init-746f6243da40bcdfd0dea81cd38cb1fe-3aa92.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 461px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 108.45986984815619%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAADmElEQVQ4y51VaXPaSBAV2By2wdwgkJCEbiSBOEJMwjr7Zf//X3r73hBXbVWq4tR+mBIj9fR0v6OxJqcZBtshlv+4sH8sMb/ZGAbcrwJswhBRHGM6nSDYRIiTFC/PT1guV1i7LuI0RxyHWNpLTMZjNJtNWHmrgX27gcvXNxwPNdZrD0mSmAA95wyuqgJj7uMkQ55nyLIcge/zkhCO45h9wuS2bcMqBj2cR30mvOJ0OpmgqizNrfW+huv5yNIEq5XDxDucjkfs+T5JYqRpxgLWZn88nuGyaqsoK5RcWV6YW6M4wX63Q304YV/XvGCDINhgvlhgxWrGkzHXxMROpjN0ul0MBkPT2XAwgPX6OsBiYZsXURSjrg+4XL6irPamvZeXHnF7RqvVgmVZny9PVYURFux/NpthNBpju825tqb1lPiEJGe5XBKnDMPhEAW/q72SENT7vSFMxAlz6+HhAd2nJ7ZkIyR+Ouw4rmkv5EXCTYH6LWhaj4+/rzCMEnNAODnOijJIDNBFUXJtze8VL/BIjr75nmcurJhcFWdZap793ss9Yb//il6/jzUPnI4nnM9fcH27YsuEq9UKj8ROXXQ6HXTanc8xXJA9kSE2fT8wlVRkWZKIKerb+w+Ss8Xb9Rtu329otz5p2XHXBHTKttgmDyZpygQ58dohjOgOXibwVfF2W0DxHgm5Q+SSxJF5twkCin8Ca8MDNkXs8qXYjiISw2rlCiVX1ZKQupC0iqIwzlDV+hb8jN0Edw1ba8rGVEgneDwgEjwC7/sbE2wbueTc+0ZaH4xr6cyasXKXK1VESkjMppOpqfKe0P3fCRVnyXIpW9sWlfFvVVVG0NP5AjklIQGL4UajYZaAb3CqPFG7j9Rku91Gl/ZrNJp3UqRyMZoT8LIscP323aj//f1vPndmmkiHwk9VSYdTOkrCj6LEGCEIQjzzgrv1GOARXLWeZxl8sne7/cVZSIJkObb12u/RlnPTVrfbQZ+6HZJdSe4X2cibU04NHUx/MqvBqmFaUirlrsaZY80MDc5MJdegUKvPHBq/JMxIvzAUlsJQQ+HAsSUMY0rI4UXC8I8mzYeXxaAqk9U0LGMyKSFLe8PhyOw77dZ9xH+WMM3uFe7Y0nIxNy6ZcICGcUoMN8Yd+j4mZmrz46AYV+v/Zb9Jz1tztiYm1aoc8OVyQUIPa8judhUKWrCkOzzq8nQ8mOFx/1+hO6g/nZEC9lSGGP8XTiU/Xd8vr64AAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="처음 Dockerfile 돌렸을때"
        title=""
        src="/static/img_build_init-746f6243da40bcdfd0dea81cd38cb1fe-3aa92.png"
        srcset="/static/img_build_init-746f6243da40bcdfd0dea81cd38cb1fe-999a6.png 148w,
/static/img_build_init-746f6243da40bcdfd0dea81cd38cb1fe-a24ab.png 295w,
/static/img_build_init-746f6243da40bcdfd0dea81cd38cb1fe-3aa92.png 461w"
        sizes="(max-width: 461px) 100vw, 461px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>&#x3C; 기존 Dockerfile을 2번째 돌렸을때 ></p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/img_build_before-7f2e4d4e319728eb8656bacb2419016f-3aa92.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 461px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 100.43383947939262%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACsklEQVQ4y61VW28SQRhdkEJLud8X2PsF2GVhaaFg8EV/gImtSZ+sFltSq9XYGv35xzPTNDExFtv0YbLLzOz5zvnOmUH59PMSnXkX5isL9msP5ksL6qSDfj9CEEbwez1YlsVnH3EcI5VKQet20W53YHJe13U0Gk0UiwUoigLly/t3iNIJBKaBYTRCk4ue56Feq0HlR2qrBcdxUK5UYNsOXNeD57rQDFOu6bpBYJsEBgRuQPm2+iABh46FaDSG2mxhMBhIwHanC1UloOugWq0R2JWAPd9HV9MloGlaMEyTgH006nUo1zc/KGWCMAhlFSFvPI75HmI6m5GtK5l1KNNxbDRZ0DAMubdC1rV6Q86NxmM8SyagnJ+voWkaWi3BLOBmE4vnS4zINhqNUCqVUMgXkE6nb3u0aVxdfaUMF61mExobnM1mEU/2KMtDxJ4K+YKRKCh6W65UYVGizrmYSlzOtdtt2R5hlnL45ojVM8jlcjAprU9XhQyLjS4UCv/H6s9xerrC9vY2pRUxZi8Dyp7ODiTrrqjITYlEAslkUj43Aq7Xa/ieL+l6fo+xabB3MQZsujBEOFur1eFzzWV8NgIeHx/LvlXKZTKb48VyKRnu7e3TXevhku9MEaFsdzrY2kox4GOaxHjQJMFQrGmaQYY28vk8SsUijbLIvPY34NHh26c1ZbVaIZ/Ly5CKuIjEHyyWGIYhgiBgsa2HAV5cXMjjpDPc4gJQVRV9Oi1Ojzj4ZQb7QYAnJydSspAnzFjM59ifHmBCtrZtP94UmXYOcT0F4VCeVfHbtqzHMXwyUz6enfHDogz0/nSGCS/R4TDiOY7QI3h2dxdlZlRk9W7cC/j9+kbeg5PJ7RUmQMQdJ+YGdFnIj2PxHspi1Wr1fsDLX5//+Rcwny9kT0U7MpkMdnZ2Nkr+Daej+2K+0xoXAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="기존 Dockerfile을 2번째 돌렸을때"
        title=""
        src="/static/img_build_before-7f2e4d4e319728eb8656bacb2419016f-3aa92.png"
        srcset="/static/img_build_before-7f2e4d4e319728eb8656bacb2419016f-999a6.png 148w,
/static/img_build_before-7f2e4d4e319728eb8656bacb2419016f-a24ab.png 295w,
/static/img_build_before-7f2e4d4e319728eb8656bacb2419016f-3aa92.png 461w"
        sizes="(max-width: 461px) 100vw, 461px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>&#x3C; 기존 Dockerfile 에서 EXPOSE 80 에서 EXPOSE 81로 변경했을 때 ></p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/img_build_after-8a6555902ada49113c4af2e4c616e516-ab65c.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 455px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 110.76923076923077%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAADNUlEQVQ4y51V21LjVhB0wA6GxWDJkizLuliyJdmW5CvYgc3DpipsNpUCL/sCm+Ih//8TnZ7ZkCKVCpc8uDBHOj3d09Pj2u6PHcylBXvrwP9tAOfShVGZ6HkDuL0e8jxHFIVw3R7iJEanY8E0TeRZhr4f6rMoGqDvedjb20Pt7uPPWH7/HcphgtlsAb/fx2iUokewTqeDNE3h8SwIAp55yMcTDIcjhGHIAkMYbYP3ZkiSBIM4Qe3+00cFnGcp5oslAj/AmJcE0CKblOd9AoZhpICTyVQLRk8AF4sFC/oY8rz28PCAxXKNoiiQ5WN9uSwr/S6XV+s1vJ4LPwjJNtNLlmXx2QRZmqPRqCt7YZjzTu329rNKcF1XAYTNcnWGNYHKqoLjOLBtG0dHR6jVai9/7u7ulJXX9ygv1+rn5xtsNxtKWWK5XLGvHoIoxvAvU6YsLC2R90sqE+NM08CQCmpXV1es/g6t1jESMp0WFR92kPFl27ZeZLS/X//nmQA2m00FLMoZHZtrP6VHcRy/TubTz/X1jmzGbHwPPh1uNBoYk6Xv0zU2Wlh3OHdZPmGRMdrt9vOAjwxPTk7IsMLF+x9pjI+zs3Mdhf/B8FoBut2uyo3CAJsfLjk6JZs/YaFTvKPDBlmahqGtOTg4wOHhoSZmX9LxFPDXT78ooIzNYwoiTnxVzZCOKJeuN5sHOD1ta3JarZaOUL3egEMS/ylZKi9Wa2y2W0ynpTIUY94s+fb2yzdTGO5vptTJdKqAwjoeDN4G+OHDT38zFCDJp8i2nS5z2ta4ZVwQRVHStJLST58H/Pr1d0osNIvyNxrEOvkVYyeS5bvF3g1HGUbcSHEy0tEJwgHfn2pBiWj3sZ83Nzf8x2WUXKxWa2Vydr7Fe47PbFahbZg0YP/1kne7G12Q0kNJijg+IahsFdl5FxeXmhjZdbIbxeVXS5ZtI5JErszklBFck7XsvqKaY07GIt3mKMkdiWjKzS0LpNt1/j02Yoa8OOL8SWrKsnj72Nzf3yMmkMgRlomsKMum47n+TnQsRwvI0hWDSjJtHR8/D5gQLJ/QxXGqgAYjJhdlyeqSIGDAnwDZ3C8thz8BuG81WDkO4l0AAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="기존 Dockerfile 에서 EXPOSE 80 에서 EXPOSE 81로 변경했을 때"
        title=""
        src="/static/img_build_after-8a6555902ada49113c4af2e4c616e516-ab65c.png"
        srcset="/static/img_build_after-8a6555902ada49113c4af2e4c616e516-a99df.png 148w,
/static/img_build_after-8a6555902ada49113c4af2e4c616e516-caa51.png 295w,
/static/img_build_after-8a6555902ada49113c4af2e4c616e516-ab65c.png 455w"
        sizes="(max-width: 455px) 100vw, 455px"
      />
    </span>
  </span>
  
  </a>
    </p>
<ul>
<li>이미지 생성시 FROM에 적어둔 parent image기반으로 변경사항만 따로 저장되는게 장점. vm 처럼 용량을 많이 먹지 않음. <br>
따라서 parent image 기반으로 새로운 이미지를 만들고 parent image 를 삭제하려고 했을때 에러 뜸.</li>
</ul>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/img_parent_error-62aa45154c39e50055992029e5ace308-efba4.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 11.587301587301587%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsSAAALEgHS3X78AAAAfklEQVQI1x3NvRLCIBAE4DQhAYZYOHECnPKXASfYWPr+D7YC1e5t8d10zzv2+oD9PWG+FpoIL+cRY4C1BH0ckFKCc455ZqMvjLVbjG1ZVyilsG03CCEwGUMIIcI1JKWzYQ5EfQu4rjrS+YBS3vAtcy7QxqDWD86UBtyxjvZnf90IMyP/1DdwAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="error"
        title=""
        src="/static/img_parent_error-62aa45154c39e50055992029e5ace308-fb8a0.png"
        srcset="/static/img_parent_error-62aa45154c39e50055992029e5ace308-1a291.png 148w,
/static/img_parent_error-62aa45154c39e50055992029e5ace308-2bc4a.png 295w,
/static/img_parent_error-62aa45154c39e50055992029e5ace308-fb8a0.png 590w,
/static/img_parent_error-62aa45154c39e50055992029e5ace308-efba4.png 630w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h3>What is Stack?</h3>
<hr>
<h2>Docker Structure</h2>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/img_structure-d38f16b7e2191f33734175d73efd4938-07c6b.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 58.41013824884792%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADHklEQVQozzWSWU9bVxSF/W+q/oCqFXnKQ6V0UpI+dExV9SlSn5pUeUiEgDSdkkJDCIkQg8NwDRGEBExsg7EdjONgxxMGbLiejX2vbfBsJ5GqRl/PNerD0j4652itvdbeupdr++y4kqT3MjSfD/ImYeNtzsum7GTQ/5jR8Ar2VIDsscq/r9rY01XOWVW+cRT5wlbkW1E/sqi8M5/l3YVDdKlInsyBSilXopnYpKVGqRQSBLMylsQ2a8kw9rCXiBzln3YTmyA8Y1E4v17grLXAp6sqHwvCz9ZUca+iW09VsIpPD1YiFEsVsuUGP7qKnH6q0GVUOGPK0b24iWXzBXKxSlCt8yRewSjwJFamP3jE38ESQ+481t0Cuh+cJc4Lle9Hghh8Cvv5CkOhCoOmbaaXXEgrbiSzB8nkwWB8jn5li/6NOGP7ddZFI185SlywF7i4mGDRLSz3Bar0+Cv0inrNV8WdznInFGdo2cmjORPGhTWMSw4BO0uzRqS5pwzadpjey+FL57jkqfClvcgVb5nLW2V0P40t8vnXF/jk7DkuW2V8hRbGdBMp3mI20WJOYOygwbjcZDpSRr9dQEq0WU5W2UorfLdxxCljng/Nimiogu7inWnee/8DTnV1cWk1ysujN2y4QzjujeAcGGDj7jCS9QUjkWMke4oHs3tMraawHDbwZpSOqxvBKr+FTpzq+rYUep/F6HHEuOo9xldsM28PcvOPUW51D9B/Y5i75gCG5GsePsuiN+wy48xhPqzjz+TodWa4PhHmuhShR8TWyfAXodDJwFPGqwrL3gDjhnH0+ttMztxnzBVkRn7Fgkdl1pZhzn+EOVPDL/LucR3SZ4jSNy+fEGoL2rWcF3tU4GeNUGnjTwSQwxPE/cPEQ6OYokH0uy0MliQTUyERQQxrpoQ3W+pY1hr6f7C6P7dr3ArX+FVkcFWE6lPqPE420YshTMVOcD/a6GBSnDVMHDR5lKh3/o5EqhSqDfaKdW7vCEKN/aYg1Wq3UAmIxR2N1vhd3A3s1DpvWujauyb+lyYuzpP7tc6S94erTB3UkORaZzD/AQnsBxGkBy8UAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Docker Structure"
        title=""
        src="/static/img_structure-d38f16b7e2191f33734175d73efd4938-fb8a0.png"
        srcset="/static/img_structure-d38f16b7e2191f33734175d73efd4938-1a291.png 148w,
/static/img_structure-d38f16b7e2191f33734175d73efd4938-2bc4a.png 295w,
/static/img_structure-d38f16b7e2191f33734175d73efd4938-fb8a0.png 590w,
/static/img_structure-d38f16b7e2191f33734175d73efd4938-07c6b.png 868w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p><em>출처 : <a href="http://www.leafcats.com/146">http://www.leafcats.com/146</a></em></p>
<hr>
<h2>Docker Install</h2>
<p><a href="https://docs.docker.com/engine/installation/">공식 홈페이지 참조</a></p>
<hr>
<h2>Docker use</h2>
<p>도커 허브에서 원하는 이미지를 다운 받을 수 있다.
<a href="https://hub.docker.com/">도커 허브</a></p>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker --help</code></pre>
      </div>
<p>도커의 명령어를 살펴볼 수 있다.</p>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker pull nginx:latest
or
$ docker run -d -it \
--name merlin-nginx \ 
-p 8080:80 \
nginx:latest</code></pre>
      </div>
<p>pull을 하면 해당 이미지만 받는것이다 <br>
run을 실행하게 되면 local에 nginx:latest 라는 이미지가 없으면 자동으로 hub에서 다운받아서 run 을 시킨다.</p>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker images
$ docker ps
$ docker ps [-a] [-l] [-n number]</code></pre>
      </div>
<p>images 는 도커 이미지 리스트를 살펴볼 수 있다. <br>
ps 는 실행중인 컨테이너 리스트를 볼 수 있다. <br>
-a 옵션을 붙이면 종료된 목록까지 볼 수 있다.<br>
-l 옵션은 마지막 실행했던 목록 , -n 은 리눅스의 tail 명령어와 동일하다.</p>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker commit -a "merlin <merlin@kakaocrop.com>" -m olympic-search-pc naughty_torvalds search.daum.pc:olypic</code></pre>
      </div>
<p>현재 돌아가고 있는 컨테이너를 이미지로 만들 수 있다.<br>
-a 옵션 : author , -m : 커밋 메세지 , &#x3C;naughty_torvalds> 들어가는 부분 : 지금 동작하고 있는 컨테이너 이름 , &#x3C;search.daum.pc:olypic> 새로운 이미지 네임과 태그</p>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker rm <컨테이너 이름>
$ docker rmi <이미지>
# 한번에 처리.
$ docker rm $(docker ps -a -q)</code></pre>
      </div>
<p>도커 이미지와 컨테이너 삭제</p>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker start <컨테이너 이름>
$ docker stop  <컨테이너 이름>
$ docker restart <컨테이너 이름></code></pre>
      </div>
<p>도커 컨테이너 실행 , 중지 , 재부팅</p>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker attach <실행중인 컨테이너 이름> 
$ docker exec -it <실행중인 컨테이너 이름> <컨테이너 안에서 실행할 명령>
$ docker exec -it merlin-nginx /bin/bash</code></pre>
      </div>
<p>attach는 실행중인 도커 컨테이너에 접속한다. 단, ps 쳤을때 command 에 /bin/bash 라고 쳐져있어야 자유롭게 입력할 수 있다. 그렇지 않으면 입력은 할 수 없고 출력만 보인다. <br>
exec는 컨테이너 안에서 수행할 명령을 날려줍니다. -it 옵션을 주면 실행된 bash 쉘에서 입력 및 출력을 할 수가 있습니다.</p>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker inspect <컨테이너 이름 or 이미지:태그></code></pre>
      </div>
<p>이미지 또는 컨테이너의 세부정보를 출력합니다.</p>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker history <이미지:태그></code></pre>
      </div>
<p>이미지의 히스토리를 조회</p>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker diff <실행중인 컨테이너 이름></code></pre>
      </div>
<p>컨테이너가 실행되면서 변경된 파일 목록을 출력합니다. 비교 기준은 컨테이너를 생성한 이미지 내용입니다.</p>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker cp <컨테이너 이름>:<경로> <호스트 경로></code></pre>
      </div>
<p>컨테이너에서 파일을 꺼내기.</p>
<hr>
<h2>Docker build</h2>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker [OPTIONS] PATH | URL | -
$ docker build -t app .</code></pre>
      </div>
<p>-t 옵션은 생성할 이미지 이름을 지정합니다. </p>
<h3>Dockerfile</h3>
<div class="gatsby-highlight">
      <pre class="language-dockerfile"><code># 어떤 이미지로부터 새로운 이미지를 생성할지를 작성
# 베이스를 지정
FROM node:argon

# Dockerfile 을 관리하는 사람의 이름 
MAINTAINER < merlin.ho > merlin@merlin.com
# /app directory 생성
RUN mkdir /app

# /app directory를 WORKDIR로 설정
WORKDIR /app

# 현재 경로에 있는 package.json을 /app에 복사
COPY package.json /app

# src에 파일 대신 url을 입력할수 있고 압축 파일의 경우 압축을 해제하면서 복사
ADD < src > < dest >
ADD . /usr/src/app

# 내부적으로 /bin/sh -c 실행 뒤 npm install 을 실행
RUN npm install

# 현재 Dockerfile 이 있는 경로의 모든 파일을 /app 에 복사함
COPY . /app

# 가상머신에 오픈할 포트넘버
EXPOSE 3000

# 도커 컨테이너가 실행 되었을때 실행되는 명령 지정, 빌드할때는 실행되지 않으며 여러개의 CMD가 존재할 경우 가장 마지막 것만 실행 됩니다.
# 한꺼번에 여러 개의 프로그램을 실행하고 싶은 경우에는 run.sh파일을 작성하여 데몬으로 실행하거나 supervisord나 forego와 같은 여러 개의 프로그램을 실행하는 프로그램을 사용합니다.
CMD ["npm", "start"]</code></pre>
      </div>
<h3>recommendation Dockerfile</h3>
<ol>
<li>
<p>Containers should be ephemeral</p>
<ul>
<li>Ephemeral environments are also sometimes called “Dynamic environments”, “Temporary environments”, “on-demand environments” or “short-lived environments”.</li>
<li>static environments와 반대되는 개념이다.</li>
<li>이것이 의미하는 바는 이 컨테이너를 우리가 stop and destroy 할 수 있고 새롭게 built 할 수 있으며 최소한의 셋팅과 설정으로 원하는 장소에 올려 놓을수 있다 라는것을 뜻함.</li>
<li>그래서 항상 production 환경과 같은 환경에서 test를 진행할 수 있다. test도 하나의 이미지를 공유 함으로써 병렬로 진행 할 수 있다.</li>
</ul>
</li>
<li>
<p>Use a .dockerignore file</p>
<ul>
<li>우리는 docker build 커멘드를 치는 장소를 build context 라고 부른다. </li>
<li>디폴트로 현재 디렉토리라고 가정하지만 구체적인 다른 디렉토리를 가리키려면 -f flag를 사용해야한다.</li>
<li>현재 디렉토리의 파일과 여러 디렉토리들을 docker deamon 에게 build context로 보내지게 되는데 이 이것은 무심코 이미지 결과로 보내지게 되어 이미지 파일이 커지게 된다.</li>
<li>따라서 .gitignore와 비슷하게 .dockerignore 파일을 사용해서 관계없는 파일들을 exclude 시킬수 있다.</li>
</ul>
</li>
<li>
<p>Use multi-stage builds</p>
<ul>
<li>Docker 17.05 버전 이상에서는 multi-stage builds 로 최종 이미지 사이즈를 줄일 수 있다.</li>
<li>multi-stage builds 란 Dockerfile 안에서 multiple FROM 구문을 사용하면 각각의 새로운 stage가 빌드 되고 한 stage에서 나온 결과 산출물을 또다른 stage로 카피를 할 수 있다. 따라서 중간 산출물을 위해 Dockerfile을 여러개 만들어서 중간 이미지를 만들고 하는 복잡한 과정을 거치지 않아도 된다.</li>
<li>dockerfile을 작성할때 자주 바뀌지 않은 것부터 자주 바뀌는 순으로 작성을 한다.</li>
</ul>
</li>
<li>
<p>Avoid installing unnecessary packages</p>
<ul>
<li>불필요한 패키지는 인스톨을 피해라.</li>
<li>예를 들면 데이타베이스 이미지에 text editor 를 추가시킬 필요는 없다.</li>
</ul>
</li>
<li>
<p>Each container should have only one concern</p>
<ul>
<li>하나의 컨테이너는 오직 하나의 일만하게 시켜라.</li>
<li>응용 프로그램을 여러 컨테이너로 분리하면 가로로 확장하고 컨테이너를 다시 사용하는 것이 훨씬 쉬워집니다. </li>
<li>컨테이너를 깨끗하고 가능한 모듈화 시킬 수 있는 최고의 판단을 해라.</li>
<li>만약 컨테이너 각각이 의존성을 띄고 있다면 Docker network를 사용하면 컨테이너끼리의 커뮤니케이션을 할 수 있다.</li>
</ul>
</li>
<li>
<p>Minimize the number of layers</p>
</li>
<li>
<p>Sort multi-line arguments</p>
</li>
<li>
<p>Build cache</p>
</li>
</ol>
<hr>
<h2>10 things to avoid in docker containers</h2>
<div class="gatsby-highlight">
      <pre class="language-none"><code>1. Don’t store data in containers
2. Don’t ship your application in two pieces
3. Don’t create large images
4. Don’t use a single layer image
5. Don’t create images from running containers
6. Don’t use only the “latest” tag
7. Don’t run more than one process in a single container 
8. Don’t store credentials in the image. Use environment variables
9. Don’t run processes as a root user 
10. Don’t rely on IP addresses </code></pre>
      </div>
<p><em>출처 : <a href="https://developers.redhat.com/blog/2016/02/24/10-things-to-avoid-in-docker-containers/">https://developers.redhat.com/blog/2016/02/24/10-things-to-avoid-in-docker-containers/</a></em></p>
<hr>
<h2>Docker manage app data</h2>
<ol>
<li>
<p>호스트의 지정된 폴더를 컨테이너에 다이렉트로 마운트 </p>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker run --name merlin_ubuntu -d -v <호스트 폴더경로>:<마운트될 컨테이너 폴더경로> -it ubuntu:14.04</code></pre>
      </div>
</li>
<li>
<p>volume container 사용</p>
</li>
</ol>
<div class="gatsby-highlight">
      <pre class="language-sh"><code># 볼륨 컨테이너를 만든다. busybox 기반 정말 리눅스의 최소 기반만 가지고 있다. 1.14MB
$ docker run -v /dbdata --name dbdata busybox

# 볼륨 컨테이너를 우분투 컨테이너에 연결
$ docker run --volumes-from=dbdata -it ubuntu:14.04 /bin/bash

# 빽업도 진행할 수 있다.
$ docker run —volumes-from dbdata -v $(pwd):/backup ubuntu tar cvf /backup/backup.tar /dbdata</code></pre>
      </div>
<ol start="3">
<li>
<p>use volume</p>
</li>
<li>
<p>보통 standalone 컨테이너에는 -v 또는 —volume 옵션을 사용했고, swarm service 에는 —mount 옵션을 사용해 왔지만
17.06 이후 버젼부터는 standalone 컨테이너에서 모두 사용이 가능하다.</p>
</li>
<li>
<p>만약 볼륨드라이버의 구체적인 옵션을 셋팅해야 한다면 —mount 옵션을 사용해라.</p>
</li>
<li>
<p>-v 또는 —volume 옵션은 도커 호스트에 파일 또는 디렉토리가 없을 경우 자동으로 생성해주지만 —mount 옵션은 자동으로 생성해주지 않는다 대신 에러를 뿜는다.</p>
</li>
<li>
<p>-v 또는 —volume 은 세가지 field 를 가질수 있다 첫번째는 호스트 머신의 볼륨 이름이고 랜덤한 볼륨을 생성하고 싶다면 생략해도 된다. 두번째는 컨테이너 안에 생성될 디렉토리 또는 파일 path이다. 세번째는 옵션으로 콤마(:)로 옵션을 나열할 수 있다. 예를 들면 ro(readonly) 옵션등이 있다.</p>
</li>
<li>
<p>—mount 는 key=value 로 구성을 하고 key 에는 type, src or source , dst or target , volume-opt 등이 있다.</p>
</li>
<li>
<p>type의 경우에는 bind , volume , tmpfs 가 있으며 이번 주제는 우선 volume 이므로 타입은 volume 으로 한다.</p>
</li>
</ol>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>$ docker volume create my-vol
$ docker volume ls
# Remove a volume:
$ docker volume rm my-vol</code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>#컨테이너 연결 
# mount 방법
$ docker run -d \
  -it \
  --name devtest \
  --mount source=myvol2,target=/app \
  nginx:latest

  $ docker run -d \
  -it \
  --name=nginxtest \
  --mount source=nginx-vol,destination=/usr/share/nginx/html \
  nginx:latest

# -v 방법 
 $ docker run -d \
  -it \
  --name devtest \
  -v myvol2:/app \
  nginx:latest 


  $ docker run -d \
  -it \
  --name=nginxtest \
  -v nginx-vol:/usr/share/nginx/html \
  nginx:latest</code></pre>
      </div>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/img_busybox-4a20af0d205541a77e55e0cf58b015dc-a6c62.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 3.985932004689331%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAANklEQVQI12NgYGD4j4xFRcX+S0pIoIjx8Qv8V1fX+K+lrf1fWVkFLq6iovJfXl7hv5ycHFwMAHNCFyf4cwT0AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="img_busybox 용량"
        title=""
        src="/static/img_busybox-4a20af0d205541a77e55e0cf58b015dc-fb8a0.png"
        srcset="/static/img_busybox-4a20af0d205541a77e55e0cf58b015dc-1a291.png 148w,
/static/img_busybox-4a20af0d205541a77e55e0cf58b015dc-2bc4a.png 295w,
/static/img_busybox-4a20af0d205541a77e55e0cf58b015dc-fb8a0.png 590w,
/static/img_busybox-4a20af0d205541a77e55e0cf58b015dc-a6c62.png 853w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>마운트 된 경로는 inspect 명령어로 알아 볼 수 있다.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/img_mount-832c2b5fee3133b85cfa73b7f72f28a6-7208f.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 22.55358807082945%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAAgklEQVQY062POxLDIAwFYfg1UFAaCGCnirn/+V4kJYVTO8XOQ0KzI6mcM6w1UEr9C4XzXCilYq2FPgZ672ityXt867nvlANzTsltK0gpCTFGIYTwER7HE7VWoRA85L3/hYY53aXnnKPrnIistdIT4Ys2fNAW/KG1vneyMQYM22/LiDfiGm0+Cgl6tAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="마운트 경로"
        title=""
        src="/static/img_mount-832c2b5fee3133b85cfa73b7f72f28a6-fb8a0.png"
        srcset="/static/img_mount-832c2b5fee3133b85cfa73b7f72f28a6-1a291.png 148w,
/static/img_mount-832c2b5fee3133b85cfa73b7f72f28a6-2bc4a.png 295w,
/static/img_mount-832c2b5fee3133b85cfa73b7f72f28a6-fb8a0.png 590w,
/static/img_mount-832c2b5fee3133b85cfa73b7f72f28a6-526de.png 885w,
/static/img_mount-832c2b5fee3133b85cfa73b7f72f28a6-7208f.png 1073w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>결론은 어찌되었건 호스트에 데이타를 연동 시킨다. <br>
volume container 를 사용했을 떄 데이터도 컨테이너로 관리를 할 수 있다. 그럼..컨테이너의 장점을 다 이용할 수 있지 않을까…</p>
<hr>
<h2>Docker compose</h2>
<p>docker compose install
<a href="https://docs.docker.com/compose/install/#install-compose">docker compose install</a></p>
<p>version 3 </p>
<div class="gatsby-highlight">
      <pre class="language-yml"><code># compose 버젼 3을 이용하겠다. 대소문자 주의
version: '3'

services: 
    webapp:
        build: ./dir # 구체적인 빌드 컨텍스트의 경로를 지정할 수 있다. 도커 파일을 포함하는 디렉토리나 깃 레파지토리 url, 
        build: # 또는 구체적인 옵션들을 설정할 수 있다. 
            context: ./dir
            dockerfile: Dockerfile-alternate
            args: # 빌드 프로세스 진행중에 사용할 환경 변수들을 지정할 수 있다.
                buildno: 1
            cache_from: # v3.2지원 엔진이 캐시로 사용할 이미지들
                - alpine:latest
                - corp/web_app:3.14
        command: bundle exec thin -p 3000  # 디폴트 커멘드를 오버라이딩
        container_name: my-web-container # 컨테이너 이름
        # 버전 3부터는 depend_on 안에 condition은 지원하지 않는다.
        depends_on: # 서비스들 간에 의존성을 표현, 이것은 db, redis 이후에 webapp 이 실행하게 된다.(compose up시)
            - db
            - redis
        tmpfs: /run # 컨테이너에 임시 파일 시스템을 마운트 , 리스트로 작성해도 된다. 
        entrypoint: /code/entrypoint.sh # 도커 파일의 엔트리 포인트를 오버라이딩 , 리스트로 작성해도 된다. 
        env_file:  # 환경변수들을 파일로 받는다. 이 환경 변수 파일들은 각각 라인마다 VAR=VAL 포멧으로 작성한다. #은 주석
            - ./common.env
            - ./apps/web.env
            - /opt/secrets.env
        environment: # 환경변수 추가. 어떤 boolen 값들은 quotes로 감싼다.
            RACK_ENV: development
            SHOW: 'true'
            SESSION_SECRET:
        expose: # 포트 노출 
            - "3000"
            - "8000"
        external_links: # 링크 컨테이너 docker-compose.yml 외부에 있는 컨테이너 , CONTAINER:ALIAS 
            - redis_1
            - project_db_1:mysql
            - project_db_1:postgresql
        extra_hosts: # /etc/hosts 에 추가 
            - "somehost:162.242.195.82"
            - "otherhost:50.31.209.229"
        image: redis # 특별한 이미지로 부터 런 , 이미지가 없으면 pull 한다.
        healthcheck: # 이 서비스를 위해 건강한지 체크 , 이미지로 부터 어떤 디폴트 헬스체크를 disable 하려면 disable: true 추가 
            test: ["CMD", "curl", "-f", "http://localhost"]
            interval: 1m30s
            timeout: 10s
            retries: 3
        labels: # 라벨 추가. 
            com.example.description: "Accounting webapp"
            com.example.department: "Finance"
            com.example.label-with-empty-value: ""
        links: # 다른 서비스들의 컨테이너 들과 연결고리를 형성, SERVICE:ALIAS , 주의!! --links 플래그는 레거시 이다. --links 사용을 대신해서 사용자가 정의하는 네트워크 설정을 이용하길 권장한다.
            - db
            - db:database
            - redis
        logging: # 서비스의 로깅 config
            driver: syslog # json-file , syslog , none
            options:
                syslog-address: "tcp://192.168.0.42:123",
                max-size: "200k" # json-file 의 경우 로그 저장을 제한할 수 있다. 오래된 파일은 지워진다. 
                max-file: "10"
        network_mode: bridge # 네트워크 모드 설정 , host , none , service:[service name] , container:[container name/id] //// host 모드는 links랑 같이 사용할 수 없다. 
        networks: # top level 에서 지정한 네트워크 설정 , 알리아스를 사용할 수 도 있다. 이 알리아스 네임으로 서비스를 연결 할 수 있다.
            - some-network
            - other-network
            new: 
                aliases:
                    - database
        ports: # HOST:CONTAINER
            - "8000:8000"
        volumes: # 호스트 경로 또는 생성된 볼륨을 마운트 시킨다. 
            - type: volume
            source: mydata
            target: /data
            volume:
                nocopy: true
            - type: bind
            source: ./static
            target: /opt/app/static
        

volumes:
  mydata:
    external : true # 컴포즈 밖에 volume이 존재했을때, 없으면 'docker volume create --name=' 으로 만들라고 에러뜸.
    name : actual-name-of-volume # 이름을 지정할 수도 있다.
  dbdata:

networks: </code></pre>
      </div>
<hr>
<h2>Docker Configuration</h2>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/img_config-a3375ddee96da32a30b26f500d9d4a69-6f6cd.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 79.87261146496814%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACQklEQVQ4y52Sy28SURTG+W8E5wF2oXXhxqRbujHR2C60VVc+Kqhg22GAdFfrorEBbcTG1oClRrvQxC20AROoJraVh9IxogkTXRBoTCDweecO88Joqjf5Mnfud+7vnJlzbDCt79vv8PF5gu4bjQYkSUKz2cS/LJu22ZVLeLn7Gutb60hLb9Bqtaja7bYe3Ol0Dg6c3VjAQGQIA9EhnIqP0wqLxSJKpRJkWUalUkGhUKDvfwPrwG63SwMVKfv/XTrw5/4+8tkscpkMvkqfIZXL+Fatovx+G19IdZupFD7s7BwcWJHruJHIUnnjGV3amVl/8mKpggHM78ngp9d0sbcTYCcW4ZxOwik8o9I8jpxxU0n1XVjT/SvLGwYwZwIqwcqlsbFbcHtHwc14wBLxwQjxVmkyC7QnK7BSo0GsP47D3iUwvidwXF+EIzgMu+CGXXSDEWbA3FzGmfN+8ARMoT2wot+BYoRkmofLPwfOswBu8ikNZCdX9coV4OlLF8GERsCER0nCETjEs+TuPVx+nIatXq+jVqshPRvGSd8xsFNHwd85QaoRwXgfEagKo/9QUKF8MIojoQtwCeOqyJ4Xo9YK83s18IGHxFDF+mI4R/7h8IQIZyhKIZywQpIskQRJSzO0hvUBZdUkhusqAVx7AJfnPvms47CHB3EoOAhWDOiXtYbo0ADp8spm39j0shoXiMQYlVN5CnHqa02wAPvHxjyH5s6ZZ80yVn1QJcYCrP5o4O6rtz1tUc31nsa54Vmlei9yn/AL0L6/MBe+oOMAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="구성"
        title=""
        src="/static/img_config-a3375ddee96da32a30b26f500d9d4a69-fb8a0.png"
        srcset="/static/img_config-a3375ddee96da32a30b26f500d9d4a69-1a291.png 148w,
/static/img_config-a3375ddee96da32a30b26f500d9d4a69-2bc4a.png 295w,
/static/img_config-a3375ddee96da32a30b26f500d9d4a69-fb8a0.png 590w,
/static/img_config-a3375ddee96da32a30b26f500d9d4a69-6f6cd.png 785w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>&#x3C; 이미지 준비 ></p>
<ol>
<li>nginx</li>
<li>express</li>
<li>mongodb</li>
</ol>
<div class="gatsby-highlight">
      <pre class="language-sh"><code>## 이미지 다운 받기 nginx 랑 mongodb
$ docker pull nginx:latest && docker pull mongo:latest
## express 의 기반이 될 node image 받기
$ docker pull node:alpine</code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-dockerfile"><code>## mongodb data를 저장할 image
FROM busybox
MAINTAINER <merlin> merlin@merlin.com
VOLUME /app/
CMD /bin/sh</code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-dockerfile"><code>## express 이미지 만들기
FROM node:alpine
MAINTAINER <merlin> merlin@merlin.com

RUN mkdir /app
WORKDIR /app
COPY package.json /app
RUN  npm install

EXPOSE 3000</code></pre>
      </div>
<hr>
<h2>Docker network</h2>
<p>출처 : <a href="http://bluese05.tistory.com/15">http://bluese05.tistory.com/15</a></p>
<h3>network 구성</h3>
<ul>
<li>도커를 설치 하면 docker host 쪽에 보면 <strong>docker0</strong> 이라는 virtual ethernet bridge를 확인할 수 있다. ( $ ifconfig 로 확인가능, 난 172.17.0.1 로 셋팅되어 있다.)</li>
<li>docker0는 container가 통신하기 위한 가상 linux bridge 이다. bridge는 기본적으로 L2 통신 기반이다.</li>
<li>컨테이너가 하나씩 생성되면 이 bridge에 하나씩 바인딩 된다. ( $ brctl show docker0 )</li>
<li>이렇게 연결된 컨테이너와 host는 케이블로 연결한 두대의 pc라고 보면 된다.</li>
<li>컨테이너 내부의 eth0 인터페이스는 내부로 격리되어있어서 이 내부와 host를 이어줄 vethxxxx 형태의 인터페이스가 하나 더 존재한다. 이 인터페이스가 host와 컨테이너 사이를 연결해준다. </li>
<li>컨테이너 내부의 아이피를 확인하려면 ifconfig eth0 라고 치면 되는데 ifconfig 가 잘 안먹는다. 그럴땐 도커 inspect로 확인하자.</li>
</ul>
<h3>network 방식</h3>
<div class="gatsby-highlight">
      <pre class="language-sh"><code># 네트워크 방식 확인하기 ( 드라이버 ) bridge , host , none ( 네임 기준 )
$ docker network ls</code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-sh"><code># 기본 네트워크는 bridge 방식이다.
# 다른방식으로 컨테이너를 생성하고 싶다면
$ docker run --new={네트워크 타입}</code></pre>
      </div>
<ol>
<li>
<p>birdge</p>
<ul>
<li>네트워크에서 브릿지란 호스트 서버의 네트워크를 연결하여 가상화된 머신들도 동일한 네트워크를 사용하도록 하는 것이다.</li>
<li>docker network inspect bridge 로 브릿지 모드의 자세한 내용을 확인 할 수 있다.</li>
</ul>
</li>
<li>
<p>host </p>
<ul>
<li>이 방식은 컨테이너가 독립적인 네트워크 영역을 갖지 않고 host와 네트워크를 함께 사용한다.</li>
<li>따라서 해당 컨테이너는 host의 네트워크 정보와 동일시 하게 가져가게 된다.</li>
<li>따라서 docker0 에 바인딩 되지 않는다. </li>
</ul>
</li>
<li>
<p>container </p>
<ul>
<li>다른 컨테이너의 네트워크 환경을 가져온다. 즉, ip와 mac 주소를 동일시 하게 구성한다.</li>
<li>docker run —name web03 —net=container:{컨테이너 id} -d nginx:alpine</li>
</ul>
</li>
<li>
<p>none</p>
<ul>
<li>이 옵션은 격리된 네트워크 환경은 갖지만, 인터페이스가 없는 상태로 컨테이너를 생성하게 된다.</li>
</ul>
</li>
</ol>
<h3>container 외부 통신</h3>
<ul>
<li>각 컨테이너는 격리된 환경에서 각각의 mac 주소와 ip 주소를 부여 받는다. </li>
<li>각 컨테이너들은 host와 통신하기 위해 bridge 방식으로 바인딩 되어있는데 각 부여받은 ip로 자유롭게 통신 가능.</li>
<li>예를 들면 web 서비스를 하는 container 는 80번 포트에서 리스닝을 하고있다. 이 포트는 외부와 통신이 되어야 하는데 이때 포트를 외부로 지정한다. -p 8080:80 으로 옵션을 주게 되면 docker host의 8080 포트로 요청이 들어오면 컨테이너의 80 포트로 해당 요청을 forwarding 하겠다는 의미이다.</li>
<li>docker ps -a or netstat -nlp | grep 8080 로 확인</li>
</ul>
<h3>link 방식의 한계</h3>
<ul>
<li>link 방식은 하나의 호스트 사이에서 실행되는 컨테이너 사이에서만 연결이 가능하다.</li>
<li>다수의 host가 존재했을때, 다른 host의 컨테이너에는 접근할 수가 없다.</li>
<li>이 경우 docker swarm 같은 orchestration 툴을 사용하거나 dynamic DNS를 구축해야한다.</li>
</ul>
<p>** dynamic DNS 란?
- 간단하게 ip 가 바뀌면 그걸 알아채서 외부 DNS 서버에 알려준다. 그러면 ip가 동적으로 바뀌는 환경에서도 사용자는 바뀐 ip를 알 필요 없이 domain name 만 알면 동일하게 접속 할 수 있다.</p></div><hr style="margin-bottom:1.75rem;" data-reactid="9"/><div style="display:flex;margin-bottom:4.375rem;" data-reactid="10"><img src="/ho_blog/static/merlin.412eee4c.png" alt="Merlin.ho" style="margin-right:0.875rem;margin-bottom:0;width:3.5rem;height:3.5rem;" data-reactid="11"/><p data-reactid="12"><!-- react-text: 13 -->Written by <!-- /react-text --><strong data-reactid="14">Merlin.ho</strong><!-- react-text: 15 --> who lives and works in Pangyo building useful things.<!-- /react-text --><!-- react-text: 16 --> <!-- /react-text --></p></div></div><span style="display:block;clear:both;" data-reactid="17"> </span></div></div><script>
  
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'undefined', 'auto');
  </script></body></html>