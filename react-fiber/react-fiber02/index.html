<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/ho_blog/component---src-layouts-index-js-60e98b905b7a1c56256e.js" as="script"/><link rel="preload" href="/ho_blog/component---src-templates-blog-post-js-dabe65ee189101b630a0.js" as="script"/><link rel="preload" href="/ho_blog/path---react-fiber-react-fiber-02-92e24b4eb81ef95103c4.js" as="script"/><link rel="preload" href="/ho_blog/app-23b0c044303f71ee319d.js" as="script"/><link rel="preload" href="/ho_blog/commons-241c3561f1c9cf4619a9.js" as="script"/><style id="glamor-styles"></style><script id="glamor-ids">
        // <![CDATA[
        window._glamor = []
        // ]]>
        </script><link rel="alternate" type="application/rss+xml" href="/ho_blog/rss.xml"/><title data-react-helmet="true">React Fiber part2 | Merlin Tec Blog</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:106.25%/1.53 'Source Sans Pro',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Source Sans Pro',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:2.295rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:2.295rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.1487rem;line-height:1.53rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.53rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;color:inherit;font-family:'Merriweather',serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.917rem;line-height:1.53rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;color:inherit;font-family:Source Sans Pro,sans-serif;font-weight:400;text-rendering:optimizeLegibility;font-size:0.8409rem;line-height:1.53rem;text-transform:uppercase;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}ul{margin-left:1.53rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.53rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;font-size:0.85rem;line-height:1.42;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.53rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;font-size:1rem;line-height:1.53rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}blockquote{margin-left:1.53rem;margin-right:1.53rem;margin-top:0;padding-bottom:0.51rem;padding-left:1.02rem;padding-right:1.02rem;padding-top:0.51rem;margin-bottom:1.53rem;font-size:1.18921rem;line-height:1.53rem;border-left:0.255rem solid;border-color:hsla(0,0%,0%,0.07);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.53rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.53rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.53rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.53rem;margin-bottom:calc(1.53rem / 2);margin-top:calc(1.53rem / 2);}li > ul{margin-left:1.53rem;margin-bottom:calc(1.53rem / 2);margin-top:calc(1.53rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.53rem / 2);}code{font-size:0.85rem;line-height:1.53rem;}kbd{font-size:0.85rem;line-height:1.53rem;}samp{font-size:0.85rem;line-height:1.53rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.02rem;padding-right:1.02rem;padding-top:0.765rem;padding-bottom:calc(0.765rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;}pre code{background:none;line-height:1.42;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:"Â ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:none;}a{color:#0071bc;text-decoration:none;}a:visited{color:#4c2c92;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.53rem;color:hsla(204,5.275997423999999%,0%,0.46);font-weight:400;font-style:normal;}div.gatsby-highlight{margin-bottom:20px;}</style><link href="//fonts.googleapis.com/css?family=Merriweather:700|Source+Sans+Pro:400,400i,700" rel="stylesheet" type="text/css"/><style id="gatsby-inlined-css">.editor .wrap-guide{background:hsla(0,0%,100%,.1)}.editor .indent-guide{color:hsla(0,0%,100%,.15)}.editor,.editor .gutter{background-color:#282828;color:#f8f8f2}.editor.is-focused .cursor{border-color:#f8f8f0}.editor.is-focused .line-number.cursor-line-no-selection,.editor.is-focused .selection .region{background-color:#49483e}.editor .invisible-character{color:hsla(0,0%,84%,.15)}.editor .comment{color:#75715e}.editor .string{color:#e6db74}.editor .constant.character,.editor .constant.language,.editor .constant.numeric,.editor .constant.other{color:#ae81ff}.editor .keyword,.editor .storage{color:#f92672}.editor .storage.type{font-style:italic;color:#66d9ef}.editor .entity.name.class,.editor .entity.other.inherited-class{text-decoration:underline;color:#a6e22e}.editor .entity.other.inherited-class{font-style:italic}.editor .entity.name.function{color:#a6e22e}.editor .entity.name.instance{color:#66d9ef}.editor .variable.parameter{font-style:italic;color:#fd971f}.editor .entity.name.tag{color:#f92672}.editor .entity.other.attribute-name{color:#a6e22e}.editor .support.constant,.editor .support.function{color:#66d9ef}.editor .support.class,.editor .support.type{font-style:italic;color:#66d9ef}.editor .invalid{color:#f8f8f0;background-color:#f92672}.editor .invalid.deprecated{color:#f8f8f0;background-color:#ae81ff}.editor .class.jade{color:#ae81ff}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/ho_blog/static/montserrat-latin-100.50d27986.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-100.5e334eff.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/ho_blog/static/montserrat-latin-100italic.8c070533.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-100italic.03e19243.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/ho_blog/static/montserrat-latin-200.4343d3d9.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-200.f2022ecd.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/ho_blog/static/montserrat-latin-200italic.116c4c4b.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-200italic.89614a60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/ho_blog/static/montserrat-latin-300.d2ad295b.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-300.3a371ee0.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/ho_blog/static/montserrat-latin-300italic.f6b6bf24.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-300italic.16521668.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/ho_blog/static/montserrat-latin-400.240a8444.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-400.b20cc131.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/ho_blog/static/montserrat-latin-400italic.86172bb8.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-400italic.9405e787.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/ho_blog/static/montserrat-latin-500.fb8d6b71.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-500.50825d47.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/ho_blog/static/montserrat-latin-500italic.c0a555a4.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-500italic.635de59c.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/ho_blog/static/montserrat-latin-600.d5615136.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-600.f300da4f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/ho_blog/static/montserrat-latin-600italic.10f29d13.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-600italic.2bc37d86.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/ho_blog/static/montserrat-latin-700.7d77e1f0.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-700.81826529.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/ho_blog/static/montserrat-latin-700italic.1dd2b53f.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-700italic.c162d257.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/ho_blog/static/montserrat-latin-800.d4e7bf86.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-800.895aadbf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/ho_blog/static/montserrat-latin-800italic.fc0cbe44.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-800italic.b3362875.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/ho_blog/static/montserrat-latin-900.c8bdd772.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-900.1b99ef78.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/ho_blog/static/montserrat-latin-900italic.cb72c1f9.woff2) format("woff2"),url(/ho_blog/static/montserrat-latin-900italic.b78bb9f8.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/ho_blog/static/merriweather-latin-300.f015f1e9.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-300.92dfe81b.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/ho_blog/static/merriweather-latin-300italic.7fd86b32.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-300italic.878b76f5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/ho_blog/static/merriweather-latin-400.12dbf4c0.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-400.1fffad22.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/ho_blog/static/merriweather-latin-400italic.1e0d3e81.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-400italic.de18d4c4.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/ho_blog/static/merriweather-latin-700.dc8fec81.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-700.d7d2ed8e.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/ho_blog/static/merriweather-latin-700italic.b7b7e5da.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-700italic.6210a5fc.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/ho_blog/static/merriweather-latin-900.43f870d5.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-900.8f3806df.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/ho_blog/static/merriweather-latin-900italic.168c1ab2.woff2) format("woff2"),url(/ho_blog/static/merriweather-latin-900italic.ae7778f0.woff) format("woff")}</style></head><body><div id="___gatsby"><div style="max-width:52.02rem;margin-left:auto;margin-right:auto;padding:2.295rem 1.1475rem;" data-reactroot="" data-reactid="1" data-react-checksum="649678098"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;" data-reactid="2"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/ho_blog/" data-reactid="3">Merlin Tec Blog</a></h3><div data-reactid="4"><!-- react-empty: 5 --><h1 data-reactid="6">React Fiber part2</h1><p style="font-size:0.87055rem;line-height:1.53rem;display:block;margin-bottom:1.53rem;margin-top:-1.53rem;" data-reactid="7">July 19, 2019</p><div data-reactid="8"><p><a href="https://medium.com/react-in-depth/inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react-e1c04700ef6e">ì´ê¸</a>ì ë²ì­ ë° ë¶ì í ê¸ìëë¤. ìëª»ë ë²ì­ ë° ìëµë ë²ì­ì´ ìì ì ììµëë¤.</p>
<h1>Inside Fiber: in-depth overview of the new reconciliation algorithm in React</h1>
<p>React ë ì ì ì¸í°íì´ì¤ë¥¼ ë§ë¤ê¸° ìí ë¼ì´ë¸ë¬ë¦¬ ìëë¤. React ì ì½ì´ë component ì state ë³íë¥¼ ì¶ì íê³  í´ë¹ state ë¥¼ íë©´ì ê°±ì í´ì£¼ë ê²ìëë¤. ì°ë¦¬ë React ììì ì´ë¬í íë¡ì¸ì¤ë¥¼ <strong>reconciliation</strong> ì¼ë¡ ìê³ ììµëë¤.</p>
<p>ì°ë¦¬ë setState ë©ìëë¥¼ í¸ì¶íê³  íë ììí¬ê° state ëë props ê° ë³íëì§ ì²´í¬íê³  UI ì ê·¸ë ¤ì§ component ë¥¼ ë¤ì ë ëë§ í©ëë¤.</p>
<p>React ì ë¬¸ìë React ìë¦¬ë¨¼í¸, ë¼ì´íì¬ì´í´ ë©ìë ê·¸ë¦¬ê³  render ë©ìë ê·¸ë¦¬ê³  children ì»´í¬ëí¸ì ì ì©ë diffing ìê³ ë¦¬ì¦ ì­íì ëí´ ì¢ì ì¤ëªì ì ê³µíê³  ììµëë¤. render ë©ìëë¥¼ íµí´ ë¦¬í´ë immutable í React elements í¸ë¦¬ë¤ì´ ê³µíµì ì¼ë¡ âvitual DOMâ ì¼ë¡ ìê³ ììµëë¤. ì´ ì©ì´ë ì´ê¸°ì ì¬ëë¤ìê² React ì ì¤ëªíë ë° ëìì´ëììµëë¤. íì§ë§ ê·¸ê²ì í¼ëì ì¼ê¸°íê¸°ëí©ëë¤. ê·¸ë¦¬ê³  React ë¬¸ì ì´ëìë ì¬ì©íì§ ììµëë¤.</p>
<p>ì´ ê¸ììë âvitual DOMâì React element ë¤ì í¸ë¦¬ ë¼ê³  ë¶ë¥´ê² ìµëë¤.</p>
<p>React element ë¤ì í¸ë¦¬ì¸ìë íë ììí¬ ìë state ë¥¼ ì ì§íë ì©ëë¡ í­ì ë´ë¶ instance ë¤ì í¸ë¦¬ë¥¼ ê°ì§ê³  ììµëë¤.(components, DOM nodes, ê¸°íë±ë±..)
16 ë²ì ë¶í°ë React ê° ë´ë¶ ì¸ì¤í´ì¤ í¸ë¦¬ì Fiber ë¼ë ì½ë ì´ë¦ì ê´ë¦¬íë ìê³ ë¦¬ì¦ì ìë¡ì´ êµ¬í íìµëë¤.</p>
<h2>Setting the background</h2>
<p>ì¬ê¸° ìì£¼ ê°ë¨í ì´íë¦¬ì¼ì´ìì´ ììµëë¤. ì´ê²ì ì´ ìë¦¬ì¦ìì ê³ì ì¬ì©í  ìì ìëë¤. ê°ë¨íê² ì«ìë¥¼ ì¦ê°ìí¤ë button íëê° ììµëë¤.</p>
<p><img src="/ho_blog/button-example01-79eb7adea5b944d5b0c045f8d5fb81e9.gif" alt="button-example01.gif"></p>
<p>ê·¸ë¦¬ê³  ì¬ê¸° êµ¬íë ì½ëê° ììµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta class js"><span class="storage type class js"><span>class</span></span><span>&nbsp;</span><span class="entity name type class js"><span>ClickCounter</span></span><span>&nbsp;</span><span class="storage modifier js"><span>extends</span></span><span>&nbsp;</span><span class="entity other inherited-class js"><span>React</span></span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>Component</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function js"><span class="entity name function constructor js"><span>constructor</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>props</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>super</span></span><span class="meta brace round js"><span>(</span></span><span>props</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>state</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;count</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>handleClick</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>handleClick</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>bind</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function method definition js"><span class="entity name function js"><span>handleClick</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>setState</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function arrow js"><span class="meta parameters js"><span class="variable parameter function js"><span>state</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;count</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable other object js"><span>state</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>count</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function method definition js"><span class="entity name function js"><span>render</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>button&nbsp;key</span><span class="keyword operator assignment js"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>1</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;onClick</span><span class="keyword operator assignment js"><span>=</span></span><span class="meta brace curly js"><span>{</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>handleClick</span></span><span class="meta brace curly js"><span>}</span></span><span class="keyword operator comparison js"><span>&gt;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update&nbsp;counter</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="keyword operator js"><span>/</span></span><span>button</span><span class="keyword operator comparison js"><span>&gt;</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator comparison js"><span>&lt;</span></span><span>span&nbsp;key</span><span class="keyword operator assignment js"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>2</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="keyword operator comparison js"><span>&gt;</span></span><span class="meta brace curly js"><span>{</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>state</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>count</span></span><span class="meta brace curly js"><span>}</span></span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="keyword operator js"><span>/</span></span><span>span</span><span class="keyword operator comparison js"><span>&gt;</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p><a href="https://stackblitz.com/edit/react-t4rdmh?source=post_page---------------------------">ì¬ê¸°ì</a> ëìí´ë³¼ ì ììµëë¤. ë³´ëê²ê³¼ ê°ì´ <code>render</code> ë©ìëìì 2 ê°ì child elements ì¸ <code>button</code> ê³¼ <code>span</code> ì ë°ííë ê°ë¨í component ìëë¤.
<code>button</code> ì í´ë¦­íìë§ì component ì state ë ë´ë¶ handler ì ìí´ ìë°ì´í¸ê° ë©ëë¤. ê·¸ ê²°ê³¼ë¡ <code>span</code> elemenì text ê° ìë°ì´í¸ê° ë©ëë¤.</p>
<p>React ë <code>reconciliation</code> ëì ë¤ìí ìíì í©ëë¤. ìë¥¼ ë¤ë©´ ì²« ë ëë§ ê³¼ state ê° update ëì ëì ìì¤ì React ìí ììì´ ììµëë¤.</p>
<ul>
<li>ClickCounter ì state ì ìë count íë¡í¼í°ê° ìë°ì´í¸ê° ë©ëë¤.</li>
<li>ClickCounter ì children ê³¼ ê·¸ê²ë¤ì props ë¤ì ë¹êµ, íìí©ëë¤.</li>
<li>span element ìí´ props ë¥¼ update í©ëë¤.</li>
</ul>
<p>ë¼ì´í ì¬ì´í´ ë©ìëë¥¼ í¸ì¶íê±°ë refs ë¥¼ ìë°ì´í¸íë ê²ê³¼ ê°ì <code>reconciliation</code> ì¤ì ìíëë ë¤ë¥¸ ììì´ ììµëë¤.
ì´ë° ëª¨ë  ììë¤ì Fiber ìí¤íì³ìì ì¼ê´ì ì¼ë¡ âworkâ ë¼ê³  ë¶ë¦ëë¤. ì´ë° work íìì ëê² React <code>element</code> ì íìê³¼ ê´ê³ê° ììµëë¤. ìë¥¼ ë¤ë©´ class component ë React ê° instance ë¥¼ ë§ë¤ê² í´ì£¼ì´ì¼ í©ëë¤. ë°ë©´ì í¨ì ì»´í¬ëí¸ ë¤ì ê²½ì°ìë ê·¸ë ì§ ììë ë©ëë¤. ìë¤ìí¼ React ììë ì¬ë¬ ì¢ë¥ì <code>element</code> ë¤ì´ ììµëë¤. ìë¥¼ ë¤ì´, class ì»´í¬ëí¸ , í¨ì ì»´í¬ëí¸, host ì»´í¬ëí¸ (DOM nodes) , í¬í ë±ë±. ì´ë° React íìì <code>createElement</code> í¨ìì ì²«ë²ì§¸ ë§¤ê°ë³ìì ìí´ ì ì ë©ëë¤.
ì´ <code>createElement</code> í¨ìë <code>render</code> ë©ìëììì <code>element</code> ë¥¼ ìì±íê¸° ìí´ ì¬ì©ë©ëë¤.</p>
<p>íëì íêµ¬ì ì£¼ì fiber ìê³ ë¦¬ì¦ì íêµ¬íê¸° ì ì ë¨¼ì  React ìì ë´ë¶ì ì¼ë¡ ì¬ì©íë ë°ì´í° êµ¬ì¡°ì ìµìí´ ì§ëë¡í©ìë¤.</p>
<h2>From React Elements to Fiber nodes</h2>
<p>React ì ëª¨ë  ì»´í¬ëí¸ë¤ì ì°ë¦¬ê° render ë©ìëìì ë¦¬í´ëë view ë¼ê³  ë¶ë¦¬ì°ê±°ë ëë ííë¦¿ì´ë¼ê³  UI ííì ê°ì§ê³  ììµëë¤. ì¬ê¸° ì°ë¦¬ì <code>ClickCounter</code> ì»´í¬ëí¸ë¥¼ ìí ííë¦¿ì´ ììµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>button</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>key</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>1</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>onClick</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>{this.onClick}</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>Update&nbsp;counter</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>button</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>span</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>key</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>2</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{this.state.count}</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>span</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre>
<h3>React Elements</h3>
<p>ì¤ì§ ííë¦¿ì JSX ì»´íì¼ë¬ë¥¼ íµí´ ê±°ì¹ë©´ React element ë¤ì´ ìë© ìê¹ëë¤. ì´ê²ì React ì»´í¬ëí¸ì render ë©ìëìì ë¦¬í´ëë ê²ì¼ë¡ HTML ì´ ìëëë¤. ì°ë¦¬ë JSX ë¥¼ ì¬ì©íì§ ììê±°ë¼ì <code>ClickCounter</code> ì»´í¬ëí¸ì render ë©ìëë ë¤ìê³¼ ê°ì´ ìì±ë  ì ìì ê²ìëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta class js"><span class="storage type class js"><span>class</span></span><span>&nbsp;</span><span class="entity name type class js"><span>ClickCounter</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator spread js"><span>...</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function method definition js"><span class="entity name function js"><span>render</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>React</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>button</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>1</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClick</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>onClick</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Update&nbsp;counter</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>React</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>span</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>2</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>state</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>count</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p><code>render</code> ë©ìë ììì <code>React.createElement</code> ë¥¼ í¸ì¶íë ê²ì 2 ê°ì ë°ì´í° êµ¬ì¡°ë¥¼ ìì±í  ê²ìëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$typeof</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="support class js"><span>Symbol</span></span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>react</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>element</span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>button</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>1</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Update&nbsp;counter</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function arrow json js"><span class="entity name function js"><span>onClick</span></span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span><span>&nbsp;</span><span class="storage type function arrow js"><span>=&gt;</span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span><span>&nbsp;</span><span class="keyword operator spread js"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$typeof</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="support class js"><span>Symbol</span></span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>react</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>element</span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>span</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>2</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace square js"><span>]</span></span></span></div></pre>
<p>ì¬ê¸°ì <code>$$typeof</code> ì íë¡í¼í°ë¥¼ React ê° ì¶ê°í´ì React elements ììë¡ ê³ ì íê² ìë³ë¨ì ì ì ììµëë¤.
ê·¸ë¦¬ê³  ëì element ì ì¤ëªì¸ <code>type</code>, <code>key</code> ê·¸ë¦¬ê³  <code>props</code> ë¥¼ ê°ì§ê³  ììµëë¤. ì´ ê°ë¤ì <code>React.createElement</code> ì ì ë¬ëë ê°ìëë¤. ì£¼ìí ì ì ì´ë»ê² React ê° text ì»¨íì¸ ë¥¼ <code>span</code> ê³¼ <code>button</code> ì children ì íííëê° ìëë¤. ê·¸ë¦¬ê³  ì´ë»ê² click handler ê° button element props ì í ë¶ë¶ì´ ëìëê° ìëë¤. React element ì ref ê°ì ë¤ë¥¸ íëë¤ì ì´ ê¸ìì ë²ì´ëë ê²ë¤ìëë¤.</p>
<p><code>ClickCounter</code> ë¥¼ ìí React element ë ì´ë¤ <code>props</code> ë <code>key</code> ë¥¼ ê°ì§ê³  ìì§ ììµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;$$typeof</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="support class js"><span>Symbol</span></span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>react</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>element</span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;key</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;props</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;ref</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;ClickCounter</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<h3>Fiber nodes</h3>
<p><strong>reconciliation</strong> íë ëìì render ë©ìëìì ë¦¬í´ë React element ë¤ë¡ ë¶í° ëì¨ dataë¥¼ fiber node í¸ë¦¬ë¤ì í©ì³ì§ê² ë©ëë¤. ê·¸ëì ëª¨ë  React element ë¤ì í´ë¹íë fiber node ë¥¼ ì§ëê² ë©ëë¤. fibers ì React element ë¤ê³¼ ë¤ë¥´ê² ë§¤ render ë§ë¤ ì¬ ìì±ëì§ ììµëë¤. ì´ê²ì ë³í  ì ìë components ì DOM ì ê°ì§ê³  ìë data êµ¬ì¡°ìëë¤.</p>
<p>ì°ë¦¬ë ì´ì ì React element íìì´ íë ììí¬ì ë¤ë¥¸ ìíì ìíë¤ê³  íìë¤. ì°ë¦¬ì ìí ì´íë¦¬ì¼ì´ììì <code>ClickCounter</code> í´ëì¤ ì»´í¬ëí¸ë ë¼ì´í ì¬ì´í´ ë©ìë ê³¼ <code>render</code> ë©ìëë¥¼ í¸ì¶íë¤. ë°ë©´ì <code>span</code> host ì»´í¬ëí¸(DOM node)ë DOM ë³íë¥¼ ìííê² ë©ëë¤. ë°ë¼ì ê° React element ë ìíí´ì¼ í  ììì ì¤ëªíë í´ë¹ íìì ë§ê² Fiber node ë¡ ë³íë©ëë¤.</p>
<p><strong>Fiber ë í´ì¼ í  ììì ëíë´ë ë°ì´í° êµ¬ì¡°ë¡ ìê°í  ì ììµëë¤. ì¦ ìì ë¨ììëë¤. Fiber ì ìí¤íì³ë ììì ì¶ì , ì¤ì¼ì¥´, ì¼ì§ì ì§, ì¤ë¨ í ì ìë í¸ë¦¬í ë°©ë²ì ì ê³µí©ëë¤.</strong></p>
<p>React element ê° fiber node ë¡ ì²ì ë³íëë©´, React ë element ë¶í° ëì¨ data ë¥¼ <a href="https://github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/react-reconciler/src/ReactFiber.js?source=post_page---------------------------#L414">createFiberFromTypeAndProps</a> ìì ì¬ì©í´ì fiber ë¥¼ ìì±íê² ë©ëë¤.</p>
<p>ê²°ê³¼ ìë°ì´í¸ìì Reactë fiber ë¸ëë¥¼ ì¬ì¬ì©íê³  í´ë¹ React element ì ë°ì´í°ë¥¼ ì¬ì©íì¬ íìí íë¡í¼í°ë¤ì ìë°ì´í¸ í©ëë¤.
React ë ëí node ë¥¼ key props ë¥¼ ê¸°ë°ì¼ë¡ ê³ì¸µììì ìì§ì´ê±°ë ë§ì½ ê´ë ¨ React element ê° render ë©ìëë¥¼ íµí´ ëì´ì ë¦¬í´ëì§ ìëë¤ë©´ node ë¥¼ ì­ì í  íìê° ììê²ì´ë¤.</p>
<blockquote>
<p><a href="https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactChildFiber.js?source=post_page---------------------------#L239">ChildReconciler</a> í¨ìë¥¼ íµí´ì ëª¨ë  íì±íë ëª¨ë  ë¦¬ì¤í¸ë¤ê³¼ React ëìì ìí fiber nodes ë¤ì ê´ë ¨í í¨ìë¤ì íì¸í  ì ììµëë¤.</p>
</blockquote>
<p>React ë ê° element ì ëí fiber ë¥¼ ìì±íê³  ê·¸ë¤ì elements ì í¸ë¦¬ë¥¼ ê°ì§ê³  ìê¸° ëë¬¸ì ì°ë¦¬ë fiber nodes í¸ë¦¬ë¥¼ ê°ì§ ì ììµëë¤. ì°ë¦¬ ìí ì¼ì´ì¤ì ê²½ì°ìë ë¤ìê³¼ ê°ì´ ííí  ì ììµëë¤.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/fiberNode01-38e8980311513636963103623b684072-c1cff.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 555px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 43.6036036036036%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABeUlEQVQoz3WRS0vDQBSF8/fcuRPUjY+FLgRBFBR0oVLsokV8oLhREEF3IqJ7oYtqjVSL2kpp2uY1iW2meYyZZB5OWqkoelYnw/0499xIUxl5fu9pduuh3nC479EAMUIY44z/FI649c7bUFhN00zTFEYaWc1PZ+XJtFx9NbilUV3lNkim2Q+c0BiFMMSe8II0DINSKrluYGoaQoEOWpvnSubsLXtcWj9+ubypcxeGPsIxJZTHPHZ4x+W+gAEAiqJgjCXGaOhD7Fovz2WxxfDq7eh6YXC5sHXyzD1AgMo/UJKMsfduI+gIb1mW2DxJ7i9GKbNh2NBhuVKrKoYB7J2rZuqwtHJQvMjpYiAmEaWkO5ko6fxVjwkl3yQSCRqCAFrqeCo/tHY3sJDLnJa7tX8f8TuZdS+EwzBwnd5Dqx3nmpWiqrke4X/pG+6dN46wY+meY0PbWNx/mtmWxzbujq6VXq//4f4fRYGAO22wdPA4t/s4kb4/uq79CX8CRVvqYWlSt/AAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="fiber tree"
        title=""
        src="/ho_blog/static/fiberNode01-38e8980311513636963103623b684072-c1cff.png"
        srcset="/ho_blog/static/fiberNode01-38e8980311513636963103623b684072-63669.png 148w,
/ho_blog/static/fiberNode01-38e8980311513636963103623b684072-b6aa5.png 295w,
/ho_blog/static/fiberNode01-38e8980311513636963103623b684072-c1cff.png 555w"
        sizes="(max-width: 555px) 100vw, 555px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>ëª¨ë  fiber ë¸ëë¤ì linked list ë¡ ì°ê²°ì´ ëì´ììµëë¤. fiber node ì <code>child</code>, <code>sibling</code> ê·¸ë¦¬ê³  <code>return</code> ì´ë¼ë íë¡í¼í°ë¥¼ ì¬ì©í´ì ì°ê²°ì´ ëì´ììµëë¤.
ì ì´ë° ë°©ìì¼ë¡ ììì´ ëìëì§ ì¢ ë ì¤ëªì ìíë¤ë©´ ë¤ì ê¸ì ë¨¼ì  ì½ì´ ë³´ì­ìì <a href="https://medium.com/react-in-depth/the-how-and-why-on-reacts-usage-of-linked-list-in-fiber-67f1014d0eb7?source=post_page---------------------------">The how and why on Reactâs usage of linked list in Fiber</a></p>
<h3>Current and work in progress trees</h3>
<p>ì²«ë²ì§¸ ë ëë§ ì´íì React ë UI ë ëë§ì íìí ì´íë¦¬ì¼ì´ìì state ë¥¼ ë°ìí fiber í¸ë¦¬ë¥¼ ê°ê² ëë¤. ì´ í¸ë¦¬ë ëê² <strong>current</strong>ë¼ê³  ë¶ë¦¬ì´ë¤. ( íë² ê·¸ë ¤ì§ ëìë¤ì ë°ìí í¸ë¦¬ë¥¼ current ë¼ê³  í¨ ). React ê° current ë¥¼ tree ë¥¼ update ììíë©´ ê·¸ê²ì <strong>workInProgress</strong> í¸ë¦¬ ë¼ê³  ë¶ë¦¬ì´ë¤. ì´ê²ì ì¤í¬ë¦°ì ë¿ë ¤ì§ê² ë  ë¯¸ëì state ë¥¼ ë°ìí©ëë¤.</p>
<p>ëª¨ë  ììì <code>workInProgress</code> í¸ë¦¬ì fiber ìì ìíë©ëë¤. React ê° <code>current</code> í¸ë¦¬ë¥¼ ì´í´ë³´ë©´ì ê¸°ì¡´ì ê° fiber ë¸ëì ëí´ <code>workInProgress</code> í¸ë¦¬ë¥¼ êµ¬ì±íë alternate(ëì²´) ë¸ëë¥¼ ë§ë­ëë¤. ì´ ë¸ëë <code>render</code> ë©ìëìì ë¦¬í´ë React element ìì ëì¨ data ë¥¼ ì¬ì©í´ì ë§ë¤ê² ë©ëë¤. ìë°ì´í¸ê° ì²ë¦¬ëê³  ëª¨ë  ê´ë ¨ ììì´ ìë£ëë©´, React ë ì¤í¬ë¦°ì ë¿ë ¤ì§ alternate í¸ë¦¬ë¥¼ ê°ì§ê³  ìì ê²ìëë¤. ì´ <code>workInProgress</code> í¸ë¦¬ê° render ëê³ ëë©´ ê·¸ê²ì ë¤ì <code>current</code> í¸ë¦¬ê° ë©ëë¤.</p>
<p>React ì½ì´ì ìë¦¬ì¤ íëë ì¼ê´ì±ìëë¤. <a href="https://overreacted.io/ko/react-as-a-ui-runtime/">ì¬ê¸°ì°¸ì¡°</a>. React ë í­ì DOM ì íë²ì update í©ëë¤. ë¶ë¶ì ì¸ ê²°ê³¼ë íìëì§ ììµëë¤. <code>workInProgress</code>í¸ë¦¬ë ì¬ì©ììê² íìëì§ ìë âì´ìâì¼ë¡ ì¬ì©ëë©°, ê·¸ëì React ë ë§¨ ë¨¼ì  ëª¨ë  ì»´í¬ëí¸ë¤ì ì²ë¦¬í ë¤ì ê·¸ê²ë¤ì ë³íë¥¼ ì¤í¬ë¦°ì ë°ìí  ì ììµëë¤. ì¬ê¸° ê·¸ë¬í í¨ì ì¤ íëì ìê·¸ëì² ìëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;updateHostComponent</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>updateHostComponent</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>current</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>workInProgress</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>renderExpirationTime</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span><span class="keyword operator spread js"><span>...</span></span><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>ê° fiber ë¸ëë <strong>alternate</strong> íëì ìë ë¤ë¥¸ í¸ë¦¬ë¡ ë¶í° ëì¨ í´ë¹ fiber nodeì ëìíë fiber ì°¸ì¡°ê°ì ë³´ì  íê³  ììµëë¤. <code>current</code> í¸ë¦¬ì ë¸ëë <code>workInProgress</code> í¸ë¦¬ì ë¸ëë¥¼ ê°ë¦¬í¤ê³  ê·¸ ë°ëì ê²½ì°ë ë§ì°¬ê°ì§ìëë¤.</p>
<h3>Side-effects</h3>
<p>ì°ë¦¬ë React ì»´í¬ëí¸ë¥¼ state ì props ë¥¼ ì¬ì©í´ì UI ííì ê³ì°íë í¨ìë¼ê³  ìê° í  ì ììµëë¤. DOM ì ë³ê²½íê±°ë ë¼ì´í ì¬ì´í´ ë©ìëë¥¼ í¸ì¶íë ê²ê³¼ ê°ì ë¤ë¥¸ ëª¨ë  íëì side-effect ëë ë¨ìí effect ë¡ ê°ì£¼ëì´ì¼í©ëë¤. Effect ë <a href="https://reactjs.org/docs/hooks-overview.html?source=post_page---------------------------#%EF%B8%8F-effect-hook">ë¬¸ì</a>ìë ì¸ê¸ëì´ ììµëë¤.</p>
<blockquote>
<p>ì°ë¦¬ë ë°ì´í° ê°ì ¸ ì¤ê¸°, êµ¬ë ëë ìëì¼ë¡ ì´ì  React component ìì ëì¨ <strong>DOM ì ë³ê²½</strong> íì ê²ìëë¤. ì°ë¦¬ë ì´ ììë¤ì âside effectâ ëë ì§§ê² âeffectâ ë¼ê³  ë¶ë ìµëë¤. ìëíë©´ ê·¸ê²ë¤ì ë¤ë¥¸ ì»´í¬ëí¸ì ìí¥ì ë¯¸ì¹ ì ìê³  ë ëë§ ëìì ìí í  ì ìê¸° ëë¬¸ìëë¤.</p>
</blockquote>
<p>ëë¶ë¶ì state ë° props ìë°ì´í¸ê° side-effects ì ì¼ì¼í¤ë ë°©ë²ì íì¸í  ì ììµëë¤. effects ë¥¼ ì ì©íë ê²ì´ ì¼ì¢ì ììì íìì´ê¸° ëë¬¸ì fiber ë¸ëë ìë°ì´í¸ ì¸ìë í¨ê³¼ë¥¼ ì¶ì íë í¸ë¦¬í ë©ì»¤ëì¦ìëë¤. ê° fiber ë¸ëë ê·¸ê²ê³¼ ì°ê´ë effects ë¥¼ ê°ì§ ì ììµëë¤. ê·¸ê²ë¤ì effectTag íëì ì¸ì½ë©ë©ëë¤.</p>
<p>ë°ë¼ì Fiber ì ìë effects ë ê¸°ë³¸ì ì¼ë¡ ìë°ì´í¸ê° ì²ë¦¬ ë í ì¸ì¤í´ì¤ì ëí´ ìíí´ì¼íë <a href="https://github.com/facebook/react/blob/b87aabdfe1b7461e7331abb3601d9e6bb27544bc/packages/shared/ReactSideEffectTags.js?source=post_page---------------------------">ìì</a>ì ì ìí©ëë¤. host component ë¤ (DOM ìì)ì ê²½ì° ììì ìì ì¶ê°, ìë°ì´í¸ ëë ì ê±°ë¡ êµ¬ì±ë©ëë¤. í´ëì¤ ì»´í¬ëí¸ì ê²½ì° React ë ref ë¥¼ ìë°ì´í¸íê³  <code>componentDidMount</code> ë° <code>componentDidUpdate</code> ë¼ì´í ì¬ì´í´ ë©ìëë¥¼ í¸ì¶í´ì¼ í  ì ììµëë¤. ë¤ë¥¸ ì íì fiber ë¤ì í´ë¹íë ë¤ë¥¸ effects ë ììµëë¤.</p>
<h3>Effects list</h3>
<p>React íë¡ì¸ì¤ë ìë°ì´í¸ë¥¼ ì ìíê² ì²ë¦¬íê³  ëª ê°ì§ í¥ë¯¸ë¡ì´ ê¸°ì ì ì¬ì©íì¬ ê·¸ ìì¤ì ì±ë¥ì ë¬ì±í©ëë¤. <strong>ê·¸ ì¤ íëë ì ìí ë°ë³µì ìí´ effect ê° ìë fiber ë¸ëì ì í ëª©ë¡ì ìì±íë ê²ìëë¤.</strong> ì í ëª©ë¡ ë°ë³µì í¸ë¦¬ë³´ë¤ í¨ì¬ ë¹ ë¥´ë©° side-effects ìë ë¸ëì ìê°ì í ì  í  íìê° ììµëë¤.</p>
<p>ì´ ë¦¬ì¤í¸ì ëª©íë DOM ìë°ì´í¸ ëë ì´ì ê´ë ¨ë ë¤ë¥¸ effects ê°ìë ë¸ëë¥¼ íìíë ê²ìëë¤. ì´ ëª©ë¡ì <code>finishedWork</code> í¸ë¦¬ì íì ì§í©ì´ë©° <code>current</code> ë° <code>workInProgress</code> í¸ë¦¬ìì ì¬ì©ëë <code>child</code> ìì± ëì  <code>nextEffect</code> ìì±ì ì¬ì©íì¬ ì°ê²°ë©ëë¤.</p>
<p>Dan Abramov ë effects list ì ëí ë¹ì ë¥¼ ì ìíìµëë¤. ê·¸ë í¬ë¦¬ì¤ë§ì¤ í¸ë¦¬ì ëª¨ë  effectful í ë¸ëë¥¼ ë¬¶ì´ëì âí¬ë¦¬ì¤ë§ì¤ ë¶ë¹âì´ ê°ê²¨ì ¸ìë ê²ì¼ë¡ ìê°íë ê²ì ì¢ìí©ëë¤. ì´ê²ì ìê°ííê¸° ìí´ ê°ì¡° íìë ë¸ëê° í  ì¼ì´ìë ë¤ìê³¼ ê°ì fiber ë¸ë í¸ë¦¬ë¥¼ ììí´ ë´ìë¤. ìë¥¼ ë¤ì´, ì°ë¦¬ì ìë°ì´í¸ë¡ ì¸í´ <code>c2</code>ê° DOM ì ì½ìëê³ , <code>d2</code>ì <code>c1</code>ì´ ìì±ì ë³ê²½íê³ , <code>b2</code>ë ë¼ì´í ì¬ì´í´ ë©ìëë¥¼ ì¤íí©ëë¤. ì´ effect list ë React ê° ëì¤ì ë¤ë¥¸ ë¸ëë¥¼ ê±´ë ë¸ ì ìëë¡ ê·¸ë¤ì ì°ê²°í©ëë¤ :</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/updateFiberTree-c5d667a728acff34d14b041891dd2d73-b7143.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 475px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 75.15789473684211%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACNklEQVQoz21Sy2oUQRTtnR/hSsGNfxBREF250Y1Z6MqVq0Q0opBVjEoQRRAZN4IoClloUHDjLGNghM4DTUbQOJkxJpN5dfWjunu6q6rr4a2anslrilrU455zzz33Wnzze/LqejJ7h/gOkUpIqQ4seDn8aJbF7PfBtSPB2NHgh42bQdhCKqMySRTnQ8L3s1gyQuzXV1WzAw8/evd7/PHiytKWol3h+cp1leepblcBlxCHWSxz0KeWR64+XD43Ufqy2IYrF0YtYOJYRZFmgR2GitIB3jIRHLYQso7IWi0kbHiFOhJUBIFWlKZ55p4GGbZZ4XJ6/xQtzREKvyzNZMrkELPADsBHUQ+s6xGNKp4+40+cwPOzccCCzZ0I4UYnTOKkn1hKsYcJISs/gR7X5TR1Hd+EGbqKHd0bCWfOpzuVTKcQB5IbcJYpxwEIE7KDmU5i+pRt2PjW8fDuSVz9udHOqvUw44A3ycG5XDbYaAwAz/yIDfyXGeV+Q7VqpIPGnq9emix9nN/WYWAJJNOGMSaheqVwTJ99+DP5sry87hldXPVLJM3OzcLa6PTK529NDe44WqwGEyJdHd1EyeiUfXp84W3xH7SyjrVB+WyE2KtVtytVHgUKuYNWW7p0hKB7LE7K687SatP1iEJ/kV3Mtsq5PaSbzJyNbx/Lii8G3en3GfBApj3AKvIVU8nrGzDw8dOLeZNoEheu4KkRas/pu+B7wP05kJpUf9CFN/GTC+mnB7t5eoO4f/0H5cA+V3QdyX0AAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="updateFiberTree"
        title=""
        src="/ho_blog/static/updateFiberTree-c5d667a728acff34d14b041891dd2d73-b7143.png"
        srcset="/ho_blog/static/updateFiberTree-c5d667a728acff34d14b041891dd2d73-5e15f.png 148w,
/ho_blog/static/updateFiberTree-c5d667a728acff34d14b041891dd2d73-563f9.png 295w,
/ho_blog/static/updateFiberTree-c5d667a728acff34d14b041891dd2d73-b7143.png 475w"
        sizes="(max-width: 475px) 100vw, 475px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>ì¬ê¸°ì effects ë¥¼ ê°ì§ ë¸ëë¤ì´ ì´ë»ê² ì°ê²°ëì´ìëì§ ë³¼ì ììµëë¤. ì´ë° ë¸ëë¤ì íìí ë React ë ì´ëì list ì ììì¸ì§ ìê¸° ìí´ì <code>firstEffect</code> í¬ì¸í°ë¥¼ ì¬ì©í©ëë¤.
ê·¸ëì ì ë¤ì´ì´ê·¸ë¨ì ìëì²ë¼ ì í ë¦¬ì¤í¸ë¡ ííë  ì ììµëë¤.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/ho_blog/static/effectList-cef15871ce25c3c451ff4ff7633ed42a-e18e2.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 14.466292134831463%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAvklEQVQI12P4////u/cfHjx8+OnzVyD7z9+/z5+/ePz4yc+fv4Dcr1+/Pnr0+MWLl//B4M3bdw8fPvr85SuEy/B9SdHf98//AbU9vf5tftbPvTP+/voJ5P48vvLrtJjft08A2f++fvi+rvH7ivI/718Aub/vnf02N/3H1h6GTxV6fx5f+f/79+9rBz4WKn2bnQJU+v/vn++raz4k8/w6sfL/v79/3zz60ubyqdbk77Mb///+/nV248c8uS8TggCc5ZkrityUCAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="effectList"
        title=""
        src="/ho_blog/static/effectList-cef15871ce25c3c451ff4ff7633ed42a-fb8a0.png"
        srcset="/ho_blog/static/effectList-cef15871ce25c3c451ff4ff7633ed42a-1a291.png 148w,
/ho_blog/static/effectList-cef15871ce25c3c451ff4ff7633ed42a-2bc4a.png 295w,
/ho_blog/static/effectList-cef15871ce25c3c451ff4ff7633ed42a-fb8a0.png 590w,
/ho_blog/static/effectList-cef15871ce25c3c451ff4ff7633ed42a-e18e2.png 712w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>ë³´ìë¤ìí¼ React ë children ë¶í° parents ê¹ì§ ììëë¡ í¨ê³¼ë¥¼ ì ì©í©ëë¤.</p>
<h3>Root of the fiber tree</h3>
<p>ëª¨ë  React ì íë¦¬ì¼ì´ììë ì»¨íì´ë ì­í ì íë íë ëë ì´ìì DOM ììê° ììµëë¤. ì¬ê¸°ìë ID ê° <code>container</code>ì¸ div ê° ì´ ê²½ì°ì í´ë¹ë©ëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>domContainer</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="support variable dom js"><span>document</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>querySelector</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#container</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>ReactDOM</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>render</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>React</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>createElement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>ClickCounter</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;domContainer</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div></pre>
<p>React ë ê° ì»¨íì´ëë¤ì ëí <a href="https://github.com/facebook/react/blob/0dc0ddc1ef5f90fe48b58f1a1ba753757961fc74/packages/react-reconciler/src/ReactFiberRoot.js?source=post_page---------------------------#L31">fiber root</a> ê°ì²´ë¥¼ ë§ë­ëë¤. DOM ììì ëí ì°¸ì¡°ë¥¼ ì¬ì©íì¬ ì¡ì¸ì¤ í  ì ììµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;DOM&nbsp;ë í¼ë°ì¤ì&nbsp;ì ê·¼í´ì&nbsp;fiberRootì&nbsp;ì ê·¼&nbsp;í &nbsp;ììë¤.</span></span></span></div><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>fiberRoot</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>query</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>#container</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other object property js"><span>_reactRootContainer</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>_internalRoot</span></span></span></div></pre>
<p>ì´ fiber root ë React ê° fiber tree ì ëí ì°¸ì¡°ë¥¼ ë³´ì íê³ ìë ê³³ìëë¤. ê·¸ fiber tree ì°¸ì¡° ê°ì fiber root ì <code>current</code> ìì±ì ì ì¥ë©ëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;#container&nbsp;ì&nbsp;Fiber&nbsp;node&nbsp;ì´ë¤.</span></span></span></div><div class="line"><span class="source js"><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>hostRootFiberNode</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>fiberRoot</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>current</span></span></span></div></pre>
<p>fiber í¸ë¦¬ë <code>HostRoot</code> ì¸ <a href="https://github.com/facebook/react/blob/cbbc2b6c4d0d8519145560bd8183ecde55168b12/packages/shared/ReactWorkTags.js?source=post_page---------------------------#L34">í¹ë³í íì</a>ì fiber ë¸ëë¡ ììí©ëë¤. ê·¸ê²ì ë´ë¶ì ì¼ë¡ ìì±ì´ ëê³  ê°ì¥ ìµìì ì»´í¬ëí¸ì ë¶ëª¨ ì­í ì í©ëë¤.
ì´ê²ì <code>HostRoot</code>ìì <code>stateNode</code> ìì±ì íµí´ <code>FiberRoot</code>ë¡ ì°ê²°ëë ë§í¬ê° ììµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;fiberRoot.current&nbsp;===&nbsp;hostRootFiberNode,&nbsp;#container&nbsp;ì&nbsp;Fiber&nbsp;node</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;hostRootFiberNode.stateNode&nbsp;===&nbsp;fiberRoot</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>fiberRoot</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>current</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>stateNode</span></span><span>&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;fiberRoot&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;true</span></span></span></div></pre>
<p>fiber root ë¥¼ íµí´ ìµìì <code>HostRoot</code> fiber ë¸ëì ì¡ì¸ì¤íì¬ fiber í¸ë¦¬ë¥¼ íì í  ì ììµëë¤. ëë ë¤ìê³¼ ê°ì´ êµ¬ì± ìì ì¸ì¤í´ì¤ìì ê°ë³ fiber ë¸ëë¥¼ ê°ì ¸ì¬ ì ììµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì»´í¬ëí¸&nbsp;ì¸ì¤í´ì¤ìì&nbsp;fiber&nbsp;nodeë¥¼&nbsp;ê°ì ¸ì¬&nbsp;ì&nbsp;ìë¤.</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>compInstance</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>_reactInternalFiber</span></span></span></div></pre>
<h3>Fiber node structure</h3>
<p>ê·¸ë ë¤ë©´ <code>ClickCounter</code> ì»´í¬ëí¸ìì ìì±ë fiber nodes ì êµ¬ì¡°ë¥¼ ì´í´ë³´ì.
ì´ fiber nodeì <code>child</code>, <code>sibling</code>, <code>return</code> ìì±ì ì§ëê³  ìë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;stateNode</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta class instance constructor js"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>ClickCounter</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;í¨ìí&nbsp;ì»´í¬ëí¸ë&nbsp;nullì´&nbsp;ë¤ì´ê°ë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;ClickCounter</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;alternate</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;key</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;updateQueue</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;memoizedState</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>count</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;pendingProps</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;memoizedProps</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;tag</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>1</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;effectTag</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;nextEffect</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p>ê·¸ë¦¬ê³  <code>span</code> DOM element :</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;stateNode</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta class instance constructor js"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>HTMLSpanElement</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;type</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>span</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;alternate</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;key</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>2</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;updateQueue</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;memoizedState</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;pendingProps</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;memoizedProps</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>children</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;tag</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>5</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;effectTag</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;nextEffect</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p>fiber node ì ê½¤ ë§ì íëë¤ì´ ììµëë¤. ì¬ê¸°ì ì´ì  ì¹ììì ë´¤ë íë <code>alternate</code>, <code>effetTag</code> ê·¸ë¦¬ê³  <code>nextEffects</code> ì ëª©ì ì ì¤ëªíìë¤. ê·¸ë ë¤ë©´ ëë¨¸ì§ë¤ì ì ì´ê²ë¤ì´ íìíì§ ë´ìë¤.</p>
<h4>stateNode</h4>
<p>ì»´í¬ëí¸ì í´ëì¤ ì¸ì¤í´ì¤ DOM ë¸ë ëë fiber node ì ê´ë ¨ë ë¤ë¥¸ React element íìì ì°¸ì¡°ê°ì ì§ëê³  ìë¤.
ì¼ë°ì ì¼ë¡ ì´ íë¡í¼í°ë fiber ì ê´ë ¨ë local state ë¥¼ ì ì§íëë° ì¬ì©ëë¤ê³  ë§í  ì ììµëë¤.</p>
<h4>type</h4>
<p>ì´ fiber ì ê´ë ¨ë í¨ìë í´ëì¤ë¥¼ ì ìíë¤. í´ëì¤ ì»´í¬ëí¸ë¤ì ê²½ì° type ì ìì±ì í¨ìë¥¼ ê°ë¦¬í¤ê³  DOM element ë¤ì ê²½ì°ìë í¹ë³í HTML íê·¸ë¥¼ ê°ë¦¬í¨ë¤. ì´ íëë fiber ë¸ëê° ì´ë¤ ìë¦¬ë¨¼í¸ì ê´ë ¨ìëì§ ì´í´íëë° ì¢ì¢ ì¬ì©ëë¤.</p>
<h4>tag</h4>
<p><a href="https://github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/shared/ReactWorkTags.js">fiber ì íì</a>ì ì ìíë¤. ê·¸ê²ì ì´ë¤ ì¼ì í´ì¼íëì§ë¥¼ ê²°ì íê¸° ìí reconciliation ìê³ ë¦¬ì¦ì¼ë¡ ì¬ì©ëë¤. ì´ì ì ì¸ê¸íë¯ì´, ììì React element ì íììë°ë¼ ë¬ë¼ì§ëë¤. í¨ì <a href="https://github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/react-reconciler/src/ReactFiber.js?source=post_page---------------------------#L414">createFiberFromTypeAndProps</a> React element ë¥¼ ê´ë ¨ë fiber ë¸ë íìê³¼ ë§¤íìì¼ì¤ë¤.
ì°ë¦¬ ì´íë¦¬ì¼ì´ì ììì <code>ClickCounter</code> ì»´í¬ëí¸ì <code>tag</code> íë¡í¼í°ë <code>1</code> ì´ë¤. ì´ê²ì <code>ClassComponent</code>ë¥¼ ë»íê³  <code>span</code> ìë¦¬ë¨¼í¸ì <code>5</code>ì ê²½ì°ìë <code>HostComponent</code>ë¥¼ ê°ë¦¬í¨ë¤.</p>
<h4>updateQueue</h4>
<p>state ìë°ì´í¸ë¤, ì½ë°±í¨ìë¤ê³¼ DOM update ë¤ì queue.</p>
<h4>memoizedState</h4>
<p>ê²°ê³¼ë¥¼ ë§ëëë° ì¬ì©ë fiber ì State. ìë°ì´í¸ ì²ë¦¬ í  ë memoizedStateë íì¬ íë©´ì ë ëë§ ë state ë¥¼ ë°ìí©ëë¤.</p>
<h4>memoizedProps</h4>
<p>ì´ì  ë ëë§ ëì ì¶ë ¥ì ìì±íë ë° ì¬ì© ë fiber ì Props.</p>
<h4>pendingProps</h4>
<p>React element ë¤ì ìë¡ì´ ë°ì´í°ë¡ ìë°ì´í¸ë Props ê·¸ë¦¬ê³  child components ëë DOM elements ì ì ì©í´ì¼í©ëë¤.</p>
<h4>key</h4>
<p>React ê° ì´ë¤ ìì´íì´ ë³ê²½ëìëì§, list ìì ì¶ê°ëìê±°ë ì­ì ëìëì§ ììì±ì ìê² í´ì£¼ë children ê·¸ë£¹ì í¬í¨ë í¹ë³í ìë³ì. ì¬ê¸°ì ì¤ëª ë React ì âëª©ë¡ ë° í¤âê¸°ë¥ê³¼ ê´ë ¨ì´ ììµëë¤.</p>
<p>ìì±ë fiber node ë <a href="https://github.com/facebook/react/blob/6e4f7c788603dac7fccd227a4852c110b072fe16/packages/react-reconciler/src/ReactFiber.js?source=post_page---------------------------#L78">ì¬ê¸°</a>ì íì¸í´ë³¼ì ìë¤. ì¬ê¸°ìë ìì ì¤ëªìì ì¬ë¬ íëë¥¼ ìëµíìµëë¤.
í¹í, ì´ì  ê¸ìì ì¤ëªí í¸ë¦¬ ë°ì´í° êµ¬ì¡°ë¥¼ êµ¬ì±íë í¬ì¸í°ì¸ <code>child</code>, <code>siblig</code> ê·¸ë¦¬ê³  <code>return</code> ì ê±´ë ë°ììµëë¤. ê·¸ë¦¬ê³  <code>expiredTime</code>, <code>childExpirationTime</code> ë° <code>mode</code> ì ê°ì ì¹´íê³ ë¦¬ë <code>Sceduler</code>ìë§ í´ë¹ë©ëë¤.</p>
<h2>General algorithm</h2>
<p>React ë <strong>ë ëë§</strong>ê³¼ <strong>ì»¤ë°</strong>ì ë ê°ì§ ì£¼ì ë¨ê³ë¡ ììì ìíí©ëë¤.</p>
<p>ì²« ë²ì§¸ <code>ë ëë§</code> ë¨ê³ìì React ë <code>setState</code> ëë <code>React.render</code>ë¥¼ íµí´ ìì½ ë componentë¤ì ìë°ì´í¸ë¥¼ ì ì©íê³  UI ìì ìë°ì´í¸í´ì¼ íë í­ëª©ì íìí©ëë¤.</p>
<p>ì´ê¸° ë ëë§ ì¸ ê²½ì° React ë <code>render</code> ë©ìëìì ë°í ë ê° ììì ëí´ ì fiber ë¸ëë¥¼ ë§ë­ëë¤. ë¤ì ìë°ì´í¸ììë ê¸°ì¡´ React ììì fiber ê° ë¤ì ì¬ì©ëê³  ìë°ì´í¸ë©ëë¤.</p>
<p><strong>ë¨ê³ì ê²°ê³¼ë side-effects ë§í¬ë¥¼ ê°ì§ fiber ë¸ëì í¸ë¦¬ìëë¤.</strong> ì´ effects ë ë¤ì <code>ì»¤ë°</code> ë¨ê³ìì ìíí´ì¼íë ììì ì¤ëªí©ëë¤.</p>
<p>ì´ <code>ì»¤ë°</code> ë¨ê³ìì React ë effects ë¡ íìë fiber í¸ë¦¬ë¥¼ ê°ì ¸ ìì ì¸ì¤í´ì¤ì ì ì©í©ëë¤. effects ëª©ë¡ì ê²í íë©´ì DOM ìë°ì´í¸ ë° ì¬ì©ìê° ë³¼ ììë ê¸°í ë³ê²½ ì¬í­ì ìíí©ëë¤.</p>
<p><strong>ì²« ë²ì§¸ <code>ë ëë§</code> ë¨ê³ìì ììì ë¹ëê¸° ì ì¼ë¡ ìí í  ì ìë¤ë ê²ì ì´í´íë ê²ì´ ì¤ìí©ëë¤.</strong></p>
<p>React ë ì¬ì© ê°ë¥í ìê°ì ë°ë¼ íë ì´ìì fiber ë¸ëë¥¼ ì²ë¦¬ í  ì ììµëë¤. ê·¸ë° ë¤ì ììì ì¨ê¸°ê³  ì¼ë¶ ì´ë²¤í¸ì ìë³´í©ëë¤. ê·¸ë° ë¤ì ì¤ë¨ ë ë¶ë¶ë¶í° ê³ìë©ëë¤.</p>
<p>ê·¸ë¬ë ëë¡ë ìë£ë ììì ë¬´ìíê³  ì²ìë¶í° ë¤ì ììí´ì¼ í  ìë ììµëë¤. ì´ë¬í ì¼ì ì¤ì§ë ì´ ë¨ê³ìì ìí í ììì¼ë¡ ì¸í´ DOM ìë°ì´í¸ì ê°ì ì¬ì©ìê° ë³¼ ììë ë³ê²½ ì¬í­ì´ ë°ìíì§ ììì¼ë¡ ì¸í´ ê°ë¥í©ëë¤.
<strong>ë°ëë¡ ë¤ì ì»¤ë° ë¨ê³ë í­ì ëê¸°ììëë¤.</strong></p>
<p>ì´ë ì´ ë¨ê³ìì ìí ë ììì´ ì¬ì©ììê² íìëë ë³ê²½ ì¬í­ (ì : DOM ìë°ì´í¸.) ì´ê¸° ëë¬¸ì React ê° ë¨ì¼ í¨ì¤ë¡ ì´ë¥¼ ìíí´ì¼í©ëë¤.</p>
<p>ë¼ì´í ì¬ì´í´ ë©ìë í¸ì¶ì React ê° ìííë ììì í ì íìëë¤.
ì¼ë¶ ë©ìëë <code>ë ëë§</code> ë¨ê³ìì í¸ì¶ëê³  ë¤ë¥¸ ë©ìëë <code>ì»¤ë°</code> ë¨ê³ìì í¸ì¶ë©ëë¤. ì²« ë²ì§¸ <code>ë ëë§</code> ë¨ê³ë¥¼ ìí í  ë í¸ì¶ëë ë¼ì´í ì¬ì´í´ ëª©ë¡ì ë¤ìê³¼ ê°ìµëë¤.</p>
<ul>
<li>[UNSAFE_]componentWillMount (deprecated)</li>
<li>[UNSAFE_]componentWillReceiveProps (deprecated)</li>
<li>getDerivedStateFromProps</li>
<li>shouldComponentUpdate</li>
<li>[UNSAFE_]componentWillUpdate (deprecated)</li>
<li>render</li>
</ul>
<p>ë³´ë ê²ê³¼ ê°ì´ <code>ë ëë§</code> ë¨ê³ìì ì¤íëë ì¼ë¶ ëªëª ë ê±°ì ë¼ì´í ì¬ì´í´ ë©ìëë ë²ì ¼ 16.3 ìì <code>UNSAFE</code>ë¼ê³  íìë©ëë¤. ê·¸ê²ë¤ì ë¬¸ììì ë ê±°ì ë¼ì´í ì¬ì´í´ì´ë¼ê³  ë¶ë¦¬ìì§ëë¤. ê·¸ê²ë¤ì ë¯¸ëì 16.x ìì ì§ìì´ ì¤ë¨ëë©° UNSAFE ì ëì¬ê° ìë í´ë¹ í­ëª©ì 17.0 ìì ì ê±°ë©ëë¤. ì´ ë³ê²½ ì¬í­ê³¼ ì ì ë ë§ì´ê·¸ë ì´ì ê²½ë¡ì ëí ìì¸í ë´ì©ì <a href="https://reactjs.org/blog/2018/03/27/update-on-async-rendering.html?source=post_page---------------------------">ì¬ê¸°</a>ë¥¼ ì°¸ì¡°íì­ìì¤.</p>
<p>ì´ê²ì ëí ì´ì ê° ê¶ê¸íì­ëê¹?</p>
<p><code>ë ëë§</code> ë¨ê³ììë DOM ìë°ì´í¸ì ê°ì ë¶ìì©ì´ ë°ìíì§ ìì¼ë¯ë¡ React ë êµ¬ì± ììë¥¼ ë¹ëê¸° ì ì¼ë¡ ìë°ì´í¸ë¥¼ ì²ë¦¬í  ì ììì ìììµëë¤. (ì ì¬ì ì¼ë¡ ì¬ë¬ ì¤ë ëìì ìë°ì´í¸ë¥¼ ì²ë¦¬ í  ìë ììµëë¤.) ê·¸ë¬ë <code>UNSAFE</code> ë¡ íìë ë¼ì´í ì¬ì´í´ì ì¢ì¢ ì¤í´ëê³  ë¯¸ë¬íê² ì¤ì©ëììµëë¤. ê°ë°ìë ìë¡ì´ ë¹ëê¸° ë ëë§ ë°©ìì ë¬¸ì ë¥¼ ì¼ì¼í¬ ììë ë¶ìì©ì´ìë ì½ëë¥¼ ì´ë¬í ë©ìëì ë£ë ê²½í¥ì´ ìììµëë¤. UNSAFE ì ëì¬ê° ìë í­ëª©ë§ ì ê±°ëì§ë§ ê³§ ëì¤ë ëì ëª¨ë (ì í í´ì  í  ì ìì)ì ì¬ì í ë¬¸ì ê° ë°ìí  ì ììµëë¤.</p>
<p>ë ë²ì§¸ <code>ì»¤ë° ë¨ê³</code>ìì ì¤í ë ë¼ì´í ì¬ì´í´ ë©ìë ëª©ë¡ì ë¤ìê³¼ ê°ìµëë¤.</p>
<ul>
<li>getSnapshotBeforeUpdate</li>
<li>componentDidMount</li>
<li>componentDidUpdate</li>
<li>componentWillUnmount</li>
</ul>
<p>ì´ë¬í ë©ìëë ëê¸°ì ì¸ <code>ì»¤ë°</code> ë¨ê³ìì ì¤íëê¸° ëë¬¸ì ë¶ìì©ì´ í¬í¨ëì´ DOM ì ì í  ì ììµëë¤.
ì ì´ì  ì°ë¦¬ë tree ë¥¼ íìíê³  ììì ìííë ë° ì¬ì©ëë ì¼ë°í ë ìê³ ë¦¬ì¦ì ì´í´ë³¼ ë°°ê²½ì ê°ì§ê³  ììµëë¤.</p>
<h2>Render phase</h2>
<p>reconciliation ìê³ ë¦¬ì¦ì í­ì <a href="https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js?source=post_page---------------------------#L1132">renderRoot</a> í¨ìë¥¼ ì¬ì©íì¬ ìµìì <code>HostRoot</code> fiber ë¸ëìì ììí©ëë¤. ê·¸ë¬ë, React ë ìë£ëì§ ìì ììì´ìë ë¸ëë¥¼ ì°¾ì ëê¹ì§ ì´ë¯¸ ì²ë¦¬ ë fiber ë¸ëìì ë²ì´ë©ëë¤ (ê±´ë ëëë¤). ìë¥¼ ë¤ì´, ì»´í¼ëí¸ í¸ë¦¬ì <code>setState</code> ë¥¼ ê¹ê² ë¤ì´ê°ìë component ìì í¸ì¶íë©´, React ë ìììë¶í° ìì í©ëë¤ë§, <code>setState</code> ë©ìëë¥¼ í¸ì¶ í ì»´í¼ëí¸ì ëì°©í  ëê¹ì§, ë¶ëª¨ë¥¼ ì ìíê² ì¤íµí©ëë¤.</p>
<h3>Main steps of the work loop</h3>
<p>ëª¨ë  fiber ë¸ëë <a href="https://github.com/facebook/react/blob/f765f022534958bcf49120bf23bc1aa665e8f651/packages/react-reconciler/src/ReactFiberScheduler.js?source=post_page---------------------------#L1136">ìì ë£¨í</a>ìì ì²ë¦¬ë©ëë¤. ë¤ìì ë£¨íì ëê¸° ë¶ë¶ êµ¬íìëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>workLoop</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>isYieldy</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator logical js"><span>!</span></span><span>isYieldy</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>while</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>nextUnitOfWork&nbsp;</span><span class="keyword operator comparison js"><span>!==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextUnitOfWork&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>performUnitOfWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>nextUnitOfWork</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span class="keyword operator spread js"><span>...</span></span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>ìì ì½ëìì <code>nextUnitOfWork</code>ë í  ì¼ì´ ìë <code>workInProgress</code> í¸ë¦¬ìì fiber ë¸ëì ëí ì°¸ì¡°ë¥¼ ë³´ì í©ëë¤. React ê° Fibers í¸ë¦¬ë¥¼ íìíë©´ì ì´ ë³ìë¥¼ ì¬ì©íì¬ ìë£ëì§ ìì ë¤ë¥¸ fiber ë¸ëê° ìëì§ë¥¼ íì¸í©ëë¤. íì¬ fiber ì²ë¦¬ ë í ë³ìë í¸ë¦¬ì ë¤ì fiber ë¸ëì ëí ì°¸ì¡° ëë null ì í¬í¨í©ëë¤. ì´ ê²½ì° React ë ìì ë£¨íë¥¼ ì¢ë£íê³  ë³ê²½ ì¬í­ì ì»¤ë° í  ì¤ë¹ê° ë©ëë¤.</p>
<p>í¸ë¦¬ë¥¼ íìíê³  ììì ììíê±°ë ìë£íë ë° ì¬ì©ëë 4 ê°ì§ ì£¼ì ê¸°ë¥ì´ ììµëë¤.</p>
<ul>
<li><a href="https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js?source=post_page---------------------------#L1056">performUnitOfWork</a></li>
<li><a href="https://github.com/facebook/react/blob/cbbc2b6c4d0d8519145560bd8183ecde55168b12/packages/react-reconciler/src/ReactFiberBeginWork.js?source=post_page---------------------------#L1489">beginWork</a></li>
<li><a href="https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js?source=post_page---------------------------#L879">completeUnitOfWork</a></li>
<li><a href="https://github.com/facebook/react/blob/cbbc2b6c4d0d8519145560bd8183ecde55168b12/packages/react-reconciler/src/ReactFiberCompleteWork.js?source=post_page---------------------------#L532">completeWork</a></li>
</ul>
<p>ê·¸ë¤ì´ ì´ë»ê² ì¬ì©ëëì§ë¥¼ ë³´ì¬ì£¼ê¸° ìí´ ë¤ìê³¼ ê°ì fiber í¸ë¦¬ íì ì ëë©ì´ìì ì´í´ë³´ì­ìì¤. ë°ëª¨ ì©ì¼ë¡ ì´ë¬í í¨ìì ë¨ìí ë êµ¬íì ì¬ì©íìµëë¤. ê° ê¸°ë¥ì fiber ë¸ëë¥¼ ì²ë¦¬íê³  React ê° í¸ë¦¬ ìëë¡ ê°ë©´ì íì¬ íì±í ë fiber ë¸ëê° ë³ê²½ë ê²ì ë³¼ ì ììµëë¤. ë¹ëì¤ìì ìê³ ë¦¬ì¦ì´ í ë¸ëì¹ìì ë¤ë¥¸ ë¸ëì¹ë¡ ì´ë»ê² ì´ëíëì§ ëªííê² ë³¼ ì ììµëë¤. parents ì ê°ê¸° ì ì ë¨¼ì  children ìí ì¼ì ë§ì¹©ëë¤.</p>
<p><img src="/ho_blog/fiberTraversing-4d6d43020835a41fd20492f29aea1a41.gif" alt="fiber Traversing"></p>
<blockquote>
<p>ê³§ì ìì§ ì°ê²°ì sibling ë¥¼ ìë¯¸íë ë°ë©´ êµ¬ë¶ë¬ì§ ì°ê²°ì children ë¥¼ ëíëëë¤. b1 ìë ììì´ìê³  b2 ìë ìì c1 ì´ íë ììµëë¤.</p>
</blockquote>
<p>ë¤ìì ì¬ìì ì¼ì ì¤ì§íê³  íì¬ ë¸ëì ê¸°ë¥ ìíë¥¼ ê²ì¬ í  ììë ë¹ëì¤ì ëí <a href="https://vimeo.com/302222454?source=post_page---------------------------">ë§í¬</a>ìëë¤. ê°ëì ì¼ë¡, ë¹ì ì âììâì êµ¬ì± ììë¡ âë¤ì´ê°ë ê²âì¼ë¡, âìë£âë âë¨ê³ì ì¼ë¡â ìííë ê²ì¼ë¡ ìê°í  ì ììµëë¤. ì´ í¨ìë¤ì´íë ì¼ì ì¤ëªíë©´ì <a href="https://stackblitz.com/edit/js-ntqfil?file=index.js&#x26;source=post_page---------------------------">ìì </a>ì êµ¬íì ê°ì§ê³  ë ìë ììµëë¤.</p>
<p><code>performUnitOfWork</code>ì <code>beginWork</code>ì ì²ì ë í¨ìë¥¼ ì´í´ ë³´ê² ìµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;while&nbsp;ë¬¸ìì&nbsp;ê³ì&nbsp;ë°ë³µíë&nbsp;í¨ì</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>performUnitOfWork</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>workInProgress</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;childrenì&nbsp;ëí&nbsp;í¬ì¸í°&nbsp;ëë&nbsp;null</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;next&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>beginWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>workInProgress</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>next&nbsp;</span><span class="keyword operator comparison js"><span>===</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ë&nbsp;ì´ìì&nbsp;ììì´&nbsp;ììë&nbsp;completeUnitOfWork&nbsp;-&gt;&nbsp;completeWorkë¥¼&nbsp;ìí</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;completeUnitOfWorkë&nbsp;siblingì´&nbsp;ììë&nbsp;return&nbsp;sibling&nbsp;í&nbsp;ë¤ì&nbsp;beginWork&nbsp;ì§í</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;siblingë&nbsp;ìì&nbsp;ìì&nbsp;ë¶ëª¨ë¡&nbsp;ì¬ë¼ê°ì&nbsp;completeUnitOfWork&nbsp;ë´ë¶ì&nbsp;ìë&nbsp;completeWorkë¥¼&nbsp;ìí</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;next&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>completeUnitOfWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>workInProgress</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;next</span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>beginWork</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>workInProgress</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object console js"><span>console</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function console js"><span>log</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>work&nbsp;performed&nbsp;for&nbsp;</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="variable other object js"><span>workInProgress</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>name</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="variable other object js"><span>workInProgress</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>child</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p><code>performUnitOfWork</code> í¨ìë <code>workInProgress</code> í¸ë¦¬ìì fiber ë¸ëë¥¼ ë°ê³  <code>beginWork</code> í¨ìë¥¼ í¸ì¶íì¬ ììì ììí©ëë¤. ì´ ê¸°ë¥ì fiber ëí´ ìíí´ì¼íë ëª¨ë  ììì ììíë ê¸°ë¥ìëë¤. ì´ ì¦ëªì ìí´, ì°ë¦¬ë ë¨ìí ììì´ ìë£ëììì ëíë´ê¸° ìí´ fiber ì ì´ë¦ì ê¸°ë¡í©ëë¤. <strong><code>beginWork</code> í¨ìë í­ì ë£¨íìì ì²ë¦¬ í  ë¤ì child ì ëí í¬ì¸í° ëë null ì ë°íí©ëë¤.</strong></p>
<p>ë¤ì ììì´ ìì¼ë©´ <code>workLoop</code> í¨ìì <code>nextUnitOfWork</code> ë³ìì í ë¹ë©ëë¤. ê·¸ë¬ë ììì´ ìì¼ë©´ React ë ë¶ê¸°ì ëì ëë¬ íì¼ë¯ë¡ íì¬ ë¸ëë¥¼ ìë£ í  ì ììì ìê²ë©ëë¤. <strong>ë¸ëê° ìì±ëë©´ siblings ë¥¼ ìí ììì ìí í í ê·¸ ë¶ëª¨ìê² ì­ ì¶ì í´ì¼í©ëë¤.</strong> ì´ ììì <code>completeUnitOfWork</code> í¨ììì ìíë©ëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ì¬ê¸°ì&nbsp;ë¤ì´ì¤ë&nbsp;workInProgressë&nbsp;childê°&nbsp;ìì´ì&nbsp;ë¤ì´ì¨ê²ì´ë¤.</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ë&nbsp;ì´ìì&nbsp;childê°&nbsp;ìë¤ëê±´&nbsp;íì¬&nbsp;ê¹ì´ì&nbsp;ëì&nbsp;ëë¬íë¤ë&nbsp;ê²ì´ê³ &nbsp;ì´&nbsp;fiberë¥¼&nbsp;completeWorkë¥¼&nbsp;ìííë¤.</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;workInProgressë¥¼&nbsp;ë°ìì&nbsp;siblingì&nbsp;ì°¾ìë³´ê³ &nbsp;ì°¾ëë¤ë©´&nbsp;ë¤ì&nbsp;&nbsp;performUnitOfWorkë¥¼&nbsp;ìííë¤.</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;childì&nbsp;siblingì´&nbsp;ìë¤ë©´&nbsp;ë¶ëª¨ë¡&nbsp;ì¬ë¼ê°ì&nbsp;completeWorkë¥¼&nbsp;ìííê²&nbsp;ëë¤.</span></span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>completeUnitOfWork</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>workInProgress</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>while</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;returnFiber&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>workInProgress</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>return</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type var js"><span>let</span></span><span>&nbsp;siblingFiber&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>workInProgress</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>sibling</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;nextUnitOfWork&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>completeWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>workInProgress</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>siblingFiber&nbsp;</span><span class="keyword operator comparison js"><span>!==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;If&nbsp;there&nbsp;is&nbsp;a&nbsp;sibling,&nbsp;return&nbsp;it</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;to&nbsp;perform&nbsp;work&nbsp;for&nbsp;this&nbsp;sibling</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;íì ê°&nbsp;ìì¼ë©´&nbsp;íì ë¥¼&nbsp;ë¦¬í´íë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;siblingFiber</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>returnFiber&nbsp;</span><span class="keyword operator comparison js"><span>!==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;If&nbsp;there&#39;s&nbsp;no&nbsp;more&nbsp;work&nbsp;in&nbsp;this&nbsp;returnFiber,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;continue&nbsp;the&nbsp;loop&nbsp;to&nbsp;complete&nbsp;the&nbsp;parent.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;ë¶ëª¨ê°&nbsp;ìì¼ë©´&nbsp;ìì&nbsp;í¸ë¦¬ë¥¼&nbsp;ë¶ëª¨ë¡&nbsp;í ë¹í´ì&nbsp;completeWorkë¥¼&nbsp;ì ëíë¤.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;workInProgress&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;returnFiber</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>continue</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;We&#39;ve&nbsp;reached&nbsp;the&nbsp;root.</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>completeWork</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>workInProgress</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object console js"><span>console</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function console js"><span>log</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>work&nbsp;completed&nbsp;for&nbsp;</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="variable other object js"><span>workInProgress</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>name</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>í¨ìì ìì§ê° ì»¤ë¤ë <code>while</code>ë£¨í ë¼ë ê²ì ì ì ììµëë¤. React ë <code>workInProgress</code> ë¸ëì children ì´ ìì ë ì´ í¨ì(<code>completeUnitOfWork</code>)ë¡ ë¤ì´ê°ëë¤. íì¬ fiber ì ëí ììì ë§ì¹ í sibling ê° ìëì§ íì¸í©ëë¤. ë°ê²¬ëë©´ React ê° í¨ìë¥¼ ì¢ë£íê³  íì ìê² í¬ì¸í°ë¥¼ ë°íí©ëë¤. <code>nextUnitOfWork</code> ë³ìì í ë¹ëê³  React ê° ì´ sibling ë¡ ììíë ë¶ê¸°ì ëí ììì ìíí©ëë¤. ì´ ìì ìì React ë ì´ì  siblings ë¥¼ ìí ììë§ ìë£íë¤ë ê²ì ì´í´íë ê²ì´ ì¤ìí©ëë¤. ìì ë¸ëì ëí ììì ìë£íì§ ìììµëë¤. <strong>ìì ë¸ëë¡ ììíë ëª¨ë  ë¶ê¸°ê° ìë£ëë©´ ë¶ëª¨ ë¸ëì ë°± í¸ëì ëí ììì´ ìë£ë©ëë¤.</strong></p>
<p>êµ¬íìì ë³¼ ì ìë¯ì´ <code>performUnitOfWork</code> ì <code>completeUnitOfWork</code> ë ëª¨ë ë°ë³µ ììì ìí´ ì£¼ë¡ ì¬ì©ëë ë°ë©´, ì£¼ì ììì <code>beginWork</code> ë° <code>completeWork</code> í¨ììì ìíë©ëë¤. ì´ ìë¦¬ì¦ì ë¤ì ê¸°ì¬ììë <code>ClickCounter</code> component ë° <code>span</code> ë¸ëì ëí´ React ê° <code>beginWork</code> ë° <code>completeWork</code> í¨ì ì ìíëë ê²ì ëí´ ìì ë´ëë¤.</p>
<h2>Commit phase</h2>
<p>ì´ ë¨ê³ë <a href="https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js?source=post_page---------------------------#L2306">completeRoot</a> í¨ìë¡ ììí©ëë¤. ì¬ê¸°ì React ë DOM ì ìë°ì´í¸íê³  ì¬ì  ë° ì¬í mutation ë¼ì´í ì¬ì´í´ ë©ìëë¥¼ í¸ì¶í©ëë¤.</p>
<p>React ê° ì´ ë¨ê³ì ì´ë¥´ë©´ 2 ê°ì tree ì effects list ê° ììµëë¤. ì²« ë²ì§¸ tree ë íì¬ íë©´ì ë ëë§ ë ìíë¥¼ ëíëëë¤. ê·¸ë° ë¤ì <code>ë ëë§</code> ë¨ê³ ëì ë§ë¤ì´ì§ <code>alternate</code> í¸ë¦¬ê° ììµëë¤. ìì¤ìì <code>finishedWork</code> ëë <code>workInProgress</code> ë¼ê³ íë©° íë©´ì ë°ì ëì´ì¼íë ìíë¥¼ ëíëëë¤. ì´ <code>alternate</code> í¸ë¦¬ë <code>child</code> ë° <code>sibling</code> í¬ì¸í°ë¥¼ íµí´ current í¸ë¦¬ì ë¹ì·íê² ì°ê²°ë©ëë¤.</p>
<p>ê·¸ë° ë¤ì effects list - <code>nextEffect</code> í¬ì¸í°ë¥¼ íµí´ ì°ê²°ë <code>finishedWork</code> í¸ë¦¬ì ë¸ë íì ì§í©ìëë¤. effects list ì <code>ë ëë§ ë¨ê³(render phase)</code>ë¥¼ ì¤í í ê²°ê³¼ìì ê¸°ìµíì­ìì¤. ë ëë§ì ì ì²´ í¬ì¸í¸ë ì½ì, ìë°ì´í¸ ëë ì­ì í´ì¼ í  ë¸ëì ì´ë componentsê° ë¼ì´í ì¬ì´í´ ë©ìë í¸ì¶ì´ íìíì§ë¥¼ ê²°ì íë ê²ì´ ììµëë¤. ì´ê²ì´ effects list ìì ì°ë¦¬ìê² ìë ¤ì¤ëë¤. <strong>ê·¸ë¦¬ê³  ê·¸ê²ì ì íí ì»¤ë° ë¨ê³ìì ë°ë³µëë ë¸ë ì§í©ìëë¤.</strong></p>
<blockquote>
<p>ëë²ê¹ì ìí´ <code>current</code> í¸ë¦¬ë fiber ë£¨í¸ì <code>current</code> ìì±ì íµí´ ì¡ì¸ì¤ í  ì ììµëë¤. <code>finishedWork</code> í¸ë¦¬ë <code>current</code> í¸ë¦¬ì <code>HostFiber</code> ë¸ëì <code>alternate</code> íë¡í¼í°ë¥¼ íµí´ ìì¸ì¤ í  ì ììµëë¤.</p>
</blockquote>
<p>ì»¤ë° ë¨ê³ìì ì¤íëë ì£¼ì ê¸°ë¥ì <code>commitRoot</code>ìëë¤. ê¸°ë³¸ì ì¼ë¡ ë¤ìê³¼ ê°ì ììì ìíí©ëë¤.</p>
<ul>
<li><code>Snapshot</code> effect íê·¸ê° ì§ì ë ë¸ëìì <code>getSnapshotBeforeUpdate</code> ë¼ì´í ì¬ì´í´ ë©ìëë¥¼ í¸ì¶í©ëë¤.</li>
<li><code>Deletion</code> effect íê·¸ê° ì§ì ë ë¸ëìì <code>componentWillUnmount</code> ë¼ì´í ì¬ì´í´ ë©ìëë¥¼ í¸ì¶í©ëë¤.</li>
<li>ëª¨ë  DOM ì½ì, ìë°ì´í¸ ë° ì­ì ë¥¼ ìíí©ëë¤.</li>
<li>ìì± ë <code>ìì í¸ë¦¬(finishedWork)</code>ë¥¼ íì¬ë¡ ì¤ì í©ëë¤.</li>
<li><code>Placement</code> effect íê·¸ê° ì§ì ë ë¸ëìì <code>componentDidMount</code> ë¼ì´í ì¬ì´í´ ë©ìë í¸ì¶</li>
<li><code>Update</code> effect íê·¸ê° ì§ì ë ë¸ëìì <code>componentDidUpdate</code> ë¼ì´í ì¬ì´í´ ë©ìëë¥¼ í¸ì¶í©ëë¤.</li>
</ul>
<p>pre-mutation ë©ìëì¸ <code>getSnapshotBeforeUpdate</code> ë¥¼ í¸ì¶ í í, React ë í¸ë¦¬ ë´ì ëª¨ë  side-effects ì»¤ë°í©ëë¤. ë ë¨ê³ì ê±¸ì³ <code>ì»¤ë°</code>ì ì§íí©ëë¤. ì²« ë²ì§¸ ë¨ê³ë ëª¨ë  DOM (host) ì½ì, ìë°ì´í¸, ì­ì  ë° ì°¸ì¡° í´ì ë¥¼ ìíí©ëë¤.
ê·¸ë° ë¤ì React ë <code>workInProgress</code> í¸ë¦¬ë¥¼ <code>current</code> í¸ë¦¬ë¡ íìíê¸° ìí´ <code>finishedWork</code> í¸ë¦¬ë¥¼ <code>FiberRoot</code> ì í ë¹í©ëë¤.</p>
<p>ì´ ììì ì»¤ë° ë¨ê³ì ì²« ë²ì§¸ ë¨ê³ ì´íì ìë£ëë©°, ë°ë¼ì <code>componentWillUnmount</code> ëììë ì´ì  í¸ë¦¬ë current ì´ì§ë§ ë ë²ì§¸ ë¨ê³ ì´ì ìë finished work í¸ë¦¬ê° <code>componentDidMount / Update</code> ëì current ìíê° ë©ëë¤.
ë ë²ì§¸ ë¨ê³ììë React ê° ë¤ë¥¸ ëª¨ë  ë¼ì´í ì¬ì´í´ ë©ìë ë° ref ì½ë°±ì í¸ì¶í©ëë¤. ì´ë¬í ë©ìëë ë³ëì ë¨ê³ë¡ ì¤íëë¯ë¡ ì ì²´ í¸ë¦¬ìì ëª¨ë  ë°°ì¹, ìë°ì´í¸ ë° ì­ì ë ì´ë¯¸ í¸ì¶ëììµëë¤.</p>
<p>ììì ì¤ëªí ë¨ê³ë¥¼ ì¤ííë í¨ìì ìì§ë ë¤ìê³¼ ê°ìµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>commitRoot</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>root</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>finishedWork</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>commitBeforeMutationLifecycles</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>commitAllHostEffects</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="variable other object js"><span>root</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support variable property dom js"><span>current</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;finishedWork</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>commitAllLifeCycles</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>ê° íì í¨ìë effects list ì ë°ë³µíê³  effect ì type ì íì¸íë ë£¨íë¥¼ êµ¬íí©ëë¤. í¨ìì ëª©ì ê³¼ ê´ë ¨ë í¨ê³¼ë¥¼ ë°ê²¬íë©´ ê·¸ê²ì ì ì©í©ëë¤.</p>
<h2>Pre-mutation lifecycle methods</h2>
<p>ìë¥¼ ë¤ì´, effects tree ë¥¼ ë°ë³µíê³  ë¸ëì <code>Snapshot effect</code>ê° ìëì§ íì¸íë ì½ëë ë¤ìê³¼ ê°ìµëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>commitBeforeMutationLifecycles</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>while</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>nextEffect&nbsp;</span><span class="keyword operator comparison js"><span>!==</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>effectTag</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>nextEffect</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>effectTag</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>effectTag&nbsp;</span><span class="keyword operator bitwise js"><span>&amp;</span></span><span>&nbsp;Snapshot</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type const js"><span>const</span></span><span>&nbsp;</span><span class="constant other js"><span>current</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>nextEffect</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>alternate</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>commitBeforeMutationLifeCycles</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>current</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;nextEffect</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;C&nbsp;ëë¬¸ì?</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;nextEffect&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>nextEffect</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>nextEffect</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>í´ëì¤ êµ¬ì± ììì ê²½ì°ì´ effect ë <code>getSnapshotBeforeUpdate</code> ë¼ì´í ì¬ì´í´ ë©ìëë¥¼ í¸ì¶íë ê²ì ìë¯¸í©ëë¤.</p>
<h2>DOM updates</h2>
<p><a href="https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js?source=post_page---------------------------#L376">commitAllHostEffects</a> ë React ê° DOM ìë°ì´í¸ë¥¼ ìííë í¨ììëë¤. ì´ í¨ìë ê¸°ë³¸ì ì¼ë¡ ë¸ëì ëí´ ìíí´ì¼íë ìì ì íì ì ìíê³  ì¤íí©ëë¤.</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type var js"><span>let</span></span><span>&nbsp;nextEffect</span><span class="keyword operator assignment js"><span>:</span></span><span>&nbsp;Fiber&nbsp;</span><span class="keyword operator bitwise js"><span>|</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>commitAllHostEffects</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta switch-statement js"><span class="keyword control switch js"><span>switch</span></span><span>&nbsp;</span><span class="punctuation definition switch-expression begin bracket round js"><span>(</span></span><span>primaryEffectTag</span><span class="punctuation definition switch-expression end bracket round js"><span>)</span></span><span>&nbsp;</span><span class="punctuation definition section switch-block begin bracket curly js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control case js"><span>case</span></span><span>&nbsp;</span><span>Placement</span><span class="punctuation definition section case-statement js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>commitPlacement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>nextEffect</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator spread js"><span>...</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control case js"><span>case</span></span><span>&nbsp;</span><span>PlacementAndUpdate</span><span class="punctuation definition section case-statement js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>commitPlacement</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>nextEffect</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>commitWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>current</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;nextEffect</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator spread js"><span>...</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control case js"><span>case</span></span><span>&nbsp;</span><span>Update</span><span class="punctuation definition section case-statement js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>commitWork</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>current</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;nextEffect</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator spread js"><span>...</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control case js"><span>case</span></span><span>&nbsp;</span><span>Deletion</span><span class="punctuation definition section case-statement js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>commitDeletion</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>nextEffect</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator spread js"><span>...</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></span></div><div class="line"><span class="source js"><span class="meta switch-statement js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition section switch-block end bracket curly js"><span>}</span></span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div></pre>
<p>React ê° <code>commitDeletion</code> í¨ììì ì­ì  íë¡ì¸ì¤ì ì¼ë¶ë¡ <code>componentWillUnmount</code> ë©ìëë¥¼ í¸ì¶íë¤ë ê²ì í¥ë¯¸ë¡­ìµëë¤.</p>
<h2>Post-mutation lifecycle methods</h2>
<p><a href="https://github.com/facebook/react/blob/95a313ec0b957f71798a69d8e83408f40e76765b/packages/react-reconciler/src/ReactFiberScheduler.js?source=post_page---------------------------#L465">commitAllLifecycles</a> ë React ê° ëë¨¸ì§ ëª¨ë  ë¼ì´í ì¬ì´í´ ë©ìë ì¸ <code>componentDidUpdate</code> ë° <code>componentDidMount</code> ë¥¼ í¸ì¶íë í¨ììëë¤.</p></div><hr style="margin-bottom:1.53rem;" data-reactid="9"/><div style="display:flex;margin-bottom:3.825rem;" data-reactid="10"><img src="/ho_blog/static/img_profile.1f79e005.jpeg" alt="Merlin.ho" style="margin-right:0.765rem;margin-bottom:0;width:3.06rem;height:3.06rem;" data-reactid="11"/><p data-reactid="12"><!-- react-text: 13 -->Written by <!-- /react-text --><strong data-reactid="14">Merlin.ho</strong><!-- react-text: 15 --> who lives and works in Pangyo building useful things.<!-- /react-text --><!-- react-text: 16 --> <!-- /react-text --></p></div></div><span style="display:block;clear:both;" data-reactid="17"> </span></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-23b0c044303f71ee319d.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-dabe65ee189101b630a0.js","35783957827783":"component---src-pages-index-js-4a72a400e6141dde0d21.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","111898030062913":"path---call-stack-ae217c5d96088f3ccd78.js","140444808481594":"path---docker-depolyment-4012246536442f60159d.js","67469829867878":"path---hello-monad-59e45b33826bee6342ec.js","163121481561693":"path---hello-web-server-50ce4db03e3201a76414.js","205017683208400":"path---hello-rollup-88836d5214ae53769fe2.js","275591574691347":"path---lazy-evaluation-b06a6cf4962e0032b9fb.js","163591510377563":"path---maintainable-javascript-no-null-comparison-cd4e4ae619857122decb.js","78697077285144":"path---maintainable-javascript-user-error-throwing-2f9594d962f6c72f1e44.js","240236403038750":"path---maintainable-javascript-event-handling-08483da9a7c1874195de.js","219926873231408":"path---refactoring-complex-refactoring-3bde085886c272fceff0.js","122409595676540":"path---think-high-order-function-58f7199816abbe8ab707.js","5023129853458":"path---value-and-reference-6083800bc1607839d93d.js","105843449635648":"path---experience-monorepo-481c39ada3235001112a.js","211646524460608":"path---hello-enzyme-20c1ec114c4f8773af3a.js","174342234436027":"path---hello-middleware-214cfa12d70783762915.js","60702703624353":"path---hello-react-e0cd56e5890daca606f6.js","51191554927023":"path---javascript-basic-1-9a67a2cd34c9412b299b.js","73704410068446":"path---javascript-object-a5446c0327b623ee17b9.js","24443999554804":"path---javascript-prototype-dd176c5979078c57a58c.js","203204203537797":"path---react-hook-8e62e2129fd00f7574c6.js","79996153856445":"path---refactoring-method-cleanup-46236c286e9dee8da3fa.js","257369935370228":"path---refactoring-moving-between-object-9e40449234c2cb6b787d.js","88166365168691":"path---try-catch-8e0ec6acd7f1cfd8bb47.js","142221992286439":"path---ui-unit-testing-a749535a7628a8651417.js","246346007348531":"path---tail-recursion-112d6f6c158ce2ab06a7.js","121991548295207":"path---virual-dom-overhead-991315eb831ed6af284d.js","177359372373161":"path---webpack-config-d646c3ec578c78b12b66.js","59645336058927":"path---hello-flow-f37b9fb2cac1b9d9b179.js","90837107504198":"path---hello-oop-8753bd908c30244d5ee3.js","77823104784020":"path---hello-react-react-9dde0a852ade465d7131.js","231909470762625":"path---refactoring-concise-conditionals-d2ab514478d45d06c674.js","58827738984857":"path---refactoring-organization-data-1-3cae99d84479a08a4086.js","75445273333793":"path---react-fiber-react-fiber-01-de4b57b558db4cda0d1b.js","55049869895717":"path---hello-docker-05e42a31d1677fb4a2e0.js","160582500480188":"path---hello-webpack-b0122eda8ae66d76c639.js","122211975447119":"path---hello-webpack-webpack-understanding-64a65d688b58382b4d6f.js","45440482069588":"path---react-hook-hood-hook-75a9cdff94a7a74ac6a2.js","234343465206083":"path---sop-and-cors-dns-rebinding-a179c3cb1c4d51b972a0.js","239272989053013":"path---refactoring-generalization-processing-e71d2e5e4b0e785fd2f5.js","23603272521549":"path---make-promise-bace773fbd60258945c5.js","122362222700994":"path---refactoring-5ee2d02ba04bdb575764.js","201965495218339":"path---refactoring-organization-data-2-6725e1fa3585396087cf.js","71473981912016":"path---javascript-pattern-648c1f680f29c9828e5a.js","120945912393580":"path---refactoring-simplifying-method-calls-294a8dadb4d3828fd246.js","147139475262338":"path---react-fiber-react-fiber-02-92e24b4eb81ef95103c4.js","43779473796627":"path---react-fiber-react-fiber-03-29e733efaa17068c8d71.js","262138261438389":"path---hello-rxjs-4cc822cee5387e69c583.js","84418080753772":"path---hello-d-3-geo-bc20dd312d935abda640.js","74801690423126":"path---hello-d-3-b6735c76aea8c3a438ff.js","184966363590167":"path---hello-testing-2626ec3be8d67f1feb92.js","134631639062865":"path---build-react-bdc86e6d7eed10152aa4.js","132591256042226":"path---hello-mobx-60b6bc228aa6a7f9648f.js","142629428675168":"path---index-89af4937a358b129b72c.js","114276838955818":"component---src-layouts-index-js-60e98b905b7a1c56256e.js"}/*]]>*/</script><script>
            
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto');
      }
      </script><script>/*<![CDATA[*/["/ho_blog/commons-241c3561f1c9cf4619a9.js","/ho_blog/app-23b0c044303f71ee319d.js","/ho_blog/path---react-fiber-react-fiber-02-92e24b4eb81ef95103c4.js","/ho_blog/component---src-templates-blog-post-js-dabe65ee189101b630a0.js","/ho_blog/component---src-layouts-index-js-60e98b905b7a1c56256e.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>