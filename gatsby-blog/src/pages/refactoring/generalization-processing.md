---
title: 일반화 처리
date: "2019-04-22T10:00:03.284Z"
---

해당 글은 `리팩토링 (코드 품질을 개선하는 객체지향 사고법)` 에서 발췌 했습니다. 코드 예제는 javascript 로 전환하였습니다.

일반화 관련 리팩토링 기법은 별도로 분류할 수 있다. 일반화는 주로 상속 계층구조나 상속 계층의 위나 아래로, 즉 상위클래스나 하위클래스로 메서드를 옮기는 기법이다.

## 필드 상향

```
classDiagram

Employee <|-- Salesman
Employee <|-- Engineer
Salesman : string name
Engineer : string name
```

위 상황을 아래 처럼 수정하자.

```
classDiagram

Employee <|-- Salesman
Employee <|-- Engineer
Employee : string name
```

두 하위클래스에 같은 필드가 들어 있을 땐 필드를 상위 클래스로 옮기자.

각각의 하위클래스를 따로 개발중이거나 리팩토링을 적용해서 연결할 경우, 여러 하위클래스에 중복된 기능이 들어 있는 경우가 많다. 
특히 특정한 몇 개의 필드가 중복될 수 있다. 중복된 필드는 이름이 서로 비슷할 때도 있다. 어느 필드가 무슨 용도로 쓰이는지 알려면, 
필드를 살펴보면서 다른 메서드에 어떤 식으로 사용되는지 보면 된다. 중복된 필드가 서로 비슷한 방식으로 사용된다면 그 필드를 일반화 화면 된다. 
일바화란 상위클래스로 옮기는 작업을 말한다.

여기서 만약 필드가 private이면 상위클래스 필드를 protected로 수정해서 하위클래스가 참조할 수 있게 하자.

## 메서드 상향

기능이 같은 메서드가 여러 하위클래스에 들어 있을땐 그 메서드를 상위클래스로 옮기자.

메서드 상향을 적용해야 할 가장 단순한 상황은 메서드의 내용이 마치 복사해서 붙여 넣은 것처럼 서로 같을 때다.
메서드 상향은 다른 리팩토링 단계를 마친 후 적용하는 것이 일반적이다. 다른 클래스에 들어 있는 두 개의 메서드가 매개변수로 전환되어 결국 실제론 같은 메서드가 될 수도 있다. 이럴 때 가장 작은 단계는 각 메서드를 따로따로 매개변수로 전환한 후 상위클래스로 옮기면 된다. 

메서드를 매개변수로 전환 -> 메서드 안의 로직은 비슷하고 어떤 특정한 값만 다를때 그 값을 매개변수로 전달 받는 메서드를 하나 작성하자. 여기서 추가 메서드가 생겨날 수도 있고 2개의 메서드가 하나의 메서드로 합쳐질 수 도 있다. ( 메서드 호출 단순화 참조 )

## 생성자 내용 상향
## 메서드 하향
## 필드 하향
## 하위클래스 추출
## 상위클래스 추출
## 인터페이스 추출
## 계층 변합
## 템플릿 메서드 형성
## 상속을 위임으로 전환
## 위임을 상속으로 전환